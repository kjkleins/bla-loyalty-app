/*! For license information please see main.786f1ed4.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},72:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function o(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var a,l=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),s(r,n.prototype),o(r),r}return i(t,e),t}(Error);class u extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}u.kind="Exception";class c extends u{}c.kind="ArgumentException";class h extends u{}h.kind="IllegalArgumentException";class d{constructor(e){if(this.binarizer=e,null===e)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new d(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new d(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new d(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class f extends u{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class g{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class p{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class m extends u{}m.kind="IndexOutOfBoundsException";class y extends m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class w{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){w.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new h("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return p.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=w.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const s=i+r>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-r-1}static numberComparator(e,t){return e-t}}class v{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}v.MIN_VALUE_32_BITS=-2147483648,v.MAX_VALUE=Number.MAX_SAFE_INTEGER;class E{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?E.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=E.makeArray(e);p.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);const s=n.length;for(;0===i;){if(++r===s)return t;i=n[r]}const o=32*r+v.numberOfTrailingZeros(i);return o>t?t:o}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);const s=n.length;for(;0===i;){if(++r===s)return t;i=~n[r]}const o=32*r+v.numberOfTrailingZeros(i);return o>t?t:o}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new h;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let s=n;s<=r;s++){const o=(2<<(s<r?31:31&t))-(1<<(s>n?0:31&e));i[s]|=o}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new h;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let o=r;o<=i;o++){const a=(2<<(o<i?31:31&t))-(1<<(o>r?0:31&e))&4294967295;if((s[o]&a)!==(n?a:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new h("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+i]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-i]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let i=1;i<n;i++){const n=e[i];r|=n<<32-t,e[i-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof E))return!1;const t=e;return this.size===t.size&&w.equals(this.bits,t.bits)}hashCode(){return 31*this.size+w.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new E(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(a||(a={}));var _,C=a;class I extends u{static getFormatInstance(){return new I}}I.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(_||(_={}));class S{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];this.otherEncodingNames=i,S.VALUE_IDENTIFIER_TO_ECI.set(e,this),S.NAME_TO_ECI.set(n,this);const o=this.values;for(let a=0,l=o.length;a!==l;a++){const e=o[a];S.VALUES_TO_ECI.set(e,this)}for(const a of i)S.NAME_TO_ECI.set(a,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new I("incorect value");const t=S.VALUES_TO_ECI.get(e);if(void 0===t)throw new I("incorect value");return t}static getCharacterSetECIByName(e){const t=S.NAME_TO_ECI.get(e);if(void 0===t)throw new I("incorect value");return t}equals(e){if(!(e instanceof S))return!1;const t=e;return this.getName()===t.getName()}}S.VALUE_IDENTIFIER_TO_ECI=new Map,S.VALUES_TO_ECI=new Map,S.NAME_TO_ECI=new Map,S.Cp437=new S(_.Cp437,Int32Array.from([0,2]),"Cp437"),S.ISO8859_1=new S(_.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),S.ISO8859_2=new S(_.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),S.ISO8859_3=new S(_.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),S.ISO8859_4=new S(_.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),S.ISO8859_5=new S(_.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),S.ISO8859_6=new S(_.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),S.ISO8859_7=new S(_.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),S.ISO8859_8=new S(_.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),S.ISO8859_9=new S(_.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),S.ISO8859_10=new S(_.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),S.ISO8859_11=new S(_.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),S.ISO8859_13=new S(_.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),S.ISO8859_14=new S(_.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),S.ISO8859_15=new S(_.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),S.ISO8859_16=new S(_.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),S.SJIS=new S(_.SJIS,20,"SJIS","Shift_JIS"),S.Cp1250=new S(_.Cp1250,21,"Cp1250","windows-1250"),S.Cp1251=new S(_.Cp1251,22,"Cp1251","windows-1251"),S.Cp1252=new S(_.Cp1252,23,"Cp1252","windows-1252"),S.Cp1256=new S(_.Cp1256,24,"Cp1256","windows-1256"),S.UnicodeBigUnmarked=new S(_.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),S.UTF8=new S(_.UTF8,26,"UTF8","UTF-8"),S.ASCII=new S(_.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),S.Big5=new S(_.Big5,28,"Big5"),S.GB18030=new S(_.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),S.EUC_KR=new S(_.EUC_KR,30,"EUC_KR","EUC-KR");class A extends u{}A.kind="UnsupportedOperationException";class T{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!T.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof S?e:S.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(T.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(S.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new A(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(S.UTF8)||e.equals(S.ISO8859_1)||e.equals(S.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class b{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return T.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(C.CHARACTER_SET))return t.get(C.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,s=!0,o=0,a=0,l=0,u=0,c=0,h=0,d=0,f=0,g=0,p=0,m=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let w=0;w<n&&(r||i||s);w++){const t=255&e[w];s&&(o>0?0===(128&t)?s=!1:o--:0!==(128&t)&&(0===(64&t)?s=!1:(o++,0===(32&t)?a++:(o++,0===(16&t)?l++:(o++,0===(8&t)?u++:s=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&m++),i&&(c>0?t<64||127===t||t>252?i=!1:c--:128===t||160===t||t>239?i=!1:t>160&&t<224?(h++,f=0,d++,d>g&&(g=d)):t>127?(c++,d=0,f++,f>p&&(p=f)):(d=0,f=0))}return s&&o>0&&(s=!1),i&&c>0&&(i=!1),s&&(y||a+l+u>0)?b.UTF8:i&&(b.ASSUME_SHIFT_JIS||g>=3||p>=3)?b.SHIFT_JIS:r&&i?2===g&&2===h||10*m>=n?b.SHIFT_JIS:b.ISO88591:r?b.ISO88591:i?b.SHIFT_JIS:s?b.UTF8:b.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=-1;function s(e,t,r,s,o,a){if("%%"===e)return"%";if(void 0===n[++i])return;e=s?parseInt(s.substr(1)):void 0;let l,u=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=n[i];break;case"c":l=n[i][0];break;case"f":l=parseFloat(n[i]).toFixed(e);break;case"p":l=parseFloat(n[i]).toPrecision(e);break;case"e":l=parseFloat(n[i]).toExponential(e);break;case"x":l=parseInt(n[i]).toString(u||16);break;case"d":l=parseFloat(parseInt(n[i],u||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(r),h=r&&r[0]+""==="0"?"0":" ";for(;l.length<c;)l=void 0!==t?l+h:h+l;return l}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)}static getBytes(e,t){return T.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}b.SHIFT_JIS=S.SJIS.getName(),b.GB2312="GB2312",b.ISO88591=S.ISO8859_1.getName(),b.EUC_JP="EUC_JP",b.UTF8=S.UTF8.getName(),b.PLATFORM_DEFAULT_ENCODING=b.UTF8,b.ASSUME_SHIFT_JIS=!1;class N{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=b.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class D{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new h("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new D(n,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<n;e++)t[e]&&r.set(e,i)}return r}static parseFromString(e,t,n){if(null===e)throw new h("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,s=0,o=-1,a=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new h("row lengths do not match");s=i,a++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[i]=!0,i++;else{if(e.substring(l,l+n.length)!==n)throw new h("illegal character encountered: "+e.substring(l));l+=n.length,r[i]=!1,i++}if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new h("row lengths do not match");a++}const u=new D(o,a);for(let c=0;c<i;c++)r[c]&&u.set(Math.floor(c%o),Math.floor(c/o));return u}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new h("input matrix dimensions do not match");const t=new E(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){const s=i*n,o=e.getRow(i,t).getBitArray();for(let e=0;e<n;e++)r[s+e]^=o[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new h("Left and top must be nonnegative");if(r<1||n<1)throw new h("Height and width must be at least 1");const i=e+n,s=t+r;if(s>this.height||i>this.width)throw new h("The region must fit inside the matrix");const o=this.rowSize,a=this.bits;for(let l=t;l<s;l++){const t=l*o;for(let n=e;n<i;n++)a[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new E(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let s=0;s<n;s++)t.setBulk(32*s,r[i+s]);return t}setRow(e,t){p.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new E(e),r=new E(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,s=t,o=-1,a=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=r[l*n+e];if(0!==t){if(l<s&&(s=l),l>a&&(a=l),32*e<i){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<i&&(i=32*e+n)}if(32*e+31>o){let n=31;for(;t>>>n===0;)n--;32*e+n>o&&(o=32*e+n)}}}return o<i||a<s?null:Int32Array.from([i,s,o-i+1,a-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const s=t[n];let o=0;for(;0===(s<<31-o&4294967295);)o++;return i+=o,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let i=32*Math.floor(n%e);const s=t[n];let o=31;for(;s>>>o===0;)o--;return i+=o,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof D))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&w.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+w.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new N;for(let i=0,s=this.height;i<s;i++){for(let n=0,s=this.width;n<s;n++)r.append(this.get(n,i)?e:t);r.append(n)}return r.toString()}clone(){return new D(this.width,this.height,this.rowSize,this.bits.slice())}}class R extends u{static getNotFoundInstance(){return new R}}R.kind="NotFoundException";class M extends g{constructor(e){super(e),this.luminances=M.EMPTY,this.buckets=new Int32Array(M.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new E(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),s=this.buckets;for(let a=0;a<r;a++)s[(255&i[a])>>M.LUMINANCE_SHIFT]++;const o=M.estimateBlackPoint(s);if(r<3)for(let a=0;a<r;a++)(255&i[a])<o&&t.set(a);else{let e=255&i[0],n=255&i[1];for(let s=1;s<r-1;s++){const r=255&i[s+1];(4*n-e-r)/2<o&&t.set(s),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new D(t,n);this.initArrays(t);const i=this.buckets;for(let a=1;a<5;a++){const r=Math.floor(n*a/5),s=e.getRow(r,this.luminances),o=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<o;e++)i[(255&s[e])>>M.LUMINANCE_SHIFT]++}const s=M.estimateBlackPoint(i),o=e.getMatrix();for(let a=0;a<n;a++){const e=a*t;for(let n=0;n<t;n++)(255&o[e+n])<s&&r.set(n,a)}return r}createBinarizer(e){return new M(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<M.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let u=0;u<t;u++)e[u]>i&&(r=u,i=e[u]),e[u]>n&&(n=e[u]);let s=0,o=0;for(let u=0;u<t;u++){const t=u-r,n=e[u]*t*t;n>o&&(s=u,o=n)}if(r>s){const e=r;r=s,s=e}if(s-r<=t/16)throw new R;let a=s-1,l=-1;for(let u=s-1;u>r;u--){const t=u-r,i=t*t*(s-u)*(n-e[u]);i>l&&(a=u,l=i)}return a<<M.LUMINANCE_SHIFT}}M.LUMINANCE_BITS=5,M.LUMINANCE_SHIFT=8-M.LUMINANCE_BITS,M.LUMINANCE_BUCKETS=1<<M.LUMINANCE_BITS,M.EMPTY=Uint8ClampedArray.from([0]);class O extends M{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=O.MINIMUM_DIMENSION&&n>=O.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>O.BLOCK_SIZE_POWER;0!==(t&O.BLOCK_SIZE_MASK)&&i++;let s=n>>O.BLOCK_SIZE_POWER;0!==(n&O.BLOCK_SIZE_MASK)&&s++;const o=O.calculateBlackPoints(r,i,s,t,n),a=new D(t,n);O.calculateThresholdForBlock(r,i,s,t,n,o,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new O(e)}static calculateThresholdForBlock(e,t,n,r,i,s,o){const a=i-O.BLOCK_SIZE,l=r-O.BLOCK_SIZE;for(let u=0;u<n;u++){let i=u<<O.BLOCK_SIZE_POWER;i>a&&(i=a);const c=O.cap(u,2,n-3);for(let n=0;n<t;n++){let a=n<<O.BLOCK_SIZE_POWER;a>l&&(a=l);const u=O.cap(n,2,t-3);let h=0;for(let e=-2;e<=2;e++){const t=s[c+e];h+=t[u-2]+t[u-1]+t[u]+t[u+1]+t[u+2]}const d=h/25;O.thresholdBlock(e,a,i,d,r,o)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let o=0,a=n*i+t;o<O.BLOCK_SIZE;o++,a+=i)for(let i=0;i<O.BLOCK_SIZE;i++)(255&e[a+i])<=r&&s.set(t+i,n+o)}static calculateBlackPoints(e,t,n,r,i){const s=i-O.BLOCK_SIZE,o=r-O.BLOCK_SIZE,a=new Array(n);for(let l=0;l<n;l++){a[l]=new Int32Array(t);let n=l<<O.BLOCK_SIZE_POWER;n>s&&(n=s);for(let i=0;i<t;i++){let t=i<<O.BLOCK_SIZE_POWER;t>o&&(t=o);let s=0,u=255,c=0;for(let i=0,o=n*r+t;i<O.BLOCK_SIZE;i++,o+=r){for(let t=0;t<O.BLOCK_SIZE;t++){const n=255&e[o+t];s+=n,n<u&&(u=n),n>c&&(c=n)}if(c-u>O.MIN_DYNAMIC_RANGE)for(i++,o+=r;i<O.BLOCK_SIZE;i++,o+=r)for(let t=0;t<O.BLOCK_SIZE;t++)s+=255&e[o+t]}let h=s>>2*O.BLOCK_SIZE_POWER;if(c-u<=O.MIN_DYNAMIC_RANGE&&(h=u/2,l>0&&i>0)){const e=(a[l-1][i]+2*a[l][i-1]+a[l-1][i-1])/4;u<e&&(h=e)}a[l][i]=h}}return a}}O.BLOCK_SIZE_POWER=3,O.BLOCK_SIZE=1<<O.BLOCK_SIZE_POWER,O.BLOCK_SIZE_MASK=O.BLOCK_SIZE-1,O.MINIMUM_DIMENSION=5*O.BLOCK_SIZE,O.MIN_DYNAMIC_RANGE=24;class k{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new A("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new A("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new A("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new N;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let i;i=n<64?"#":n<128?"+":n<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class P extends k{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new P(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new P(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new P(this.delegate.rotateCounterClockwise45())}}class L extends k{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=L.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return L.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,s=0,o=e.length;i<o;i+=4,s++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[s]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*L.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=o,t.height=a,n.translate(o/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=L.makeBufferFromCanvasImageData(t),this}invert(){return new P(this)}}L.DEGREE_TO_RADIANS=Math.PI/180;class x{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B,F=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){e.done?n(e.value):i(e.value).then(o,a)}l((r=r.apply(e,t||[])).next())})};class U{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return F(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||`Video device ${t.length+1}`,kind:e,groupId:n.groupId};t.push(r)}return t})}getVideoInputDevices(){return F(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new x(e.deviceId,e.label))})}findDeviceById(e){return F(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return F(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return F(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return F(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return F(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return F(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return F(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return F(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return F(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return F(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return F(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new c(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new c(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new c("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new c("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new c("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new c("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new c("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new c("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new c("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new c("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return F(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return F(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(i,s)=>{if(this._stopAsyncDecode)return s(new R("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(o){if(t&&o instanceof R||(o instanceof f||o instanceof I)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(o)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof f||r instanceof I||r instanceof R)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new L(t),r=new O(n);return new d(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class V{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===s||null===s?p.currentTimeMillis():s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);p.arraycopy(t,0,n,0,t.length),p.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(B||(B={}));var z,H=B;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(z||(z={}));var j,G,W,Y,X,q,Q=z;class K{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ${exp(e){return this.expTable[e]}log(e){if(0===e)throw new h;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Z{constructor(e,t){if(0===t.length)throw new h;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),p.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=$.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,i=this.field;for(let s=1;s<r;s++)n=$.addOrSubtract(i.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const i=n.length-t.length;p.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=$.addOrSubtract(t[s-i],n[s]);return new Z(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),o=this.field;for(let a=0;a<n;a++){const e=t[a];for(let t=0;t<i;t++)s[a+t]=$.addOrSubtract(s[a+t],o.multiply(e,r[t]))}return new Z(o,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new Z(n,r)}multiplyByMonomial(e,t){if(e<0)throw new h;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let o=0;o<r;o++)i[o]=s.multiply(n[o],t);return new Z(s,i)}divide(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new h("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const i=r.getDegree()-e.getDegree(),o=t.multiply(r.getCoefficient(r.getDegree()),s),a=e.multiplyByMonomial(i,o),l=t.buildMonomial(i,o);n=n.addOrSubtract(l),r=r.addOrSubtract(a)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class J extends u{}J.kind="ArithmeticException";class ee extends ${constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let o=0;o<t;o++)r[o]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const s=new Int32Array(t);for(let o=0;o<t-1;o++)s[r[o]]=o;this.logTable=s,this.zero=new Z(this,Int32Array.from([0])),this.one=new Z(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new h;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new Z(this,n)}inverse(e){if(0===e)throw new J;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+v.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends u{}te.kind="ReedSolomonException";class ne extends u{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new Z(n,e),i=new Int32Array(t);let s=!0;for(let d=0;d<t;d++){const e=r.evaluateAt(n.exp(d+n.getGeneratorBase()));i[i.length-1-d]=e,0!==e&&(s=!1)}if(s)return;const o=new Z(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(t,1),o,t),l=a[0],u=a[1],c=this.findErrorLocations(l),h=this.findErrorMagnitudes(u,c);for(let d=0;d<c.length;d++){const t=e.length-1-n.log(c[d]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],h[d])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let i=e,s=t,o=r.getZero(),a=r.getOne();for(;s.getDegree()>=(n/2|0);){let e=i,t=o;if(i=s,o=a,i.isZero())throw new te("r_{i-1} was zero");s=e;let n=r.getZero();const l=i.getCoefficient(i.getDegree()),u=r.inverse(l);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const e=s.getDegree()-i.getDegree(),t=r.multiply(s.getCoefficient(s.getDegree()),u);n=n.addOrSubtract(r.buildMonomial(e,t)),s=s.addOrSubtract(i.multiplyByMonomial(e,t))}if(a=n.multiply(o).addOrSubtract(t),s.getDegree()>=i.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=a.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const u=r.inverse(l);return[a.multiplyScalar(u),s.multiplyScalar(u)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)0===e.evaluateAt(s)&&(n[r]=i.inverse(s),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){const o=i.inverse(t[s]);let a=1;for(let e=0;e<n;e++)if(s!==e){const n=i.multiply(t[e],o),r=0===(1&n)?1|n:-2&n;a=i.multiply(a,r)}r[s]=i.multiply(e.evaluateAt(o),i.inverse(a)),0!==i.getGeneratorBase()&&(r[s]=i.multiply(r[s],o))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(j||(j={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=ie.convertBoolArrayToByteArray(r),s=ie.getEncodedData(r),o=new K(i,s,null,null);return o.setNumBits(r.length),o}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=j.UPPER,r=j.UPPER,i="",s=0;for(;s<t;)if(r===j.BINARY){if(t-s<5)break;let o=ie.readCode(e,s,5);if(s+=5,0===o){if(t-s<11)break;o=ie.readCode(e,s,11)+31,s+=11}for(let n=0;n<o;n++){if(t-s<8){s=t;break}const n=ie.readCode(e,s,8);i+=b.castAsNonUtf8Char(n),s+=8}r=n}else{let o=r===j.DIGIT?4:5;if(t-s<o)break;let a=ie.readCode(e,s,o);s+=o;let l=ie.getCharacter(r,a);l.startsWith("CTRL_")?(n=r,r=ie.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(i+=l,r=n)}return i}static getTable(e){switch(e){case"L":return j.LOWER;case"P":return j.PUNCT;case"M":return j.MIXED;case"D":return j.DIGIT;case"B":return j.BINARY;default:return j.UPPER}}static getCharacter(e,t){switch(e){case j.UPPER:return ie.UPPER_TABLE[t];case j.LOWER:return ie.LOWER_TABLE[t];case j.MIXED:return ie.MIXED_TABLE[t];case j.PUNCT:return ie.PUNCT_TABLE[t];case j.DIGIT:return ie.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new I;let s=e.length%n,o=new Int32Array(i);for(let d=0;d<i;d++,s+=n)o[d]=ie.readCode(e,s,n);try{new re(t).decode(o,i-r)}catch(h){throw new I(h)}let a=(1<<n)-1,l=0;for(let d=0;d<r;d++){let e=o[d];if(0===e||e===a)throw new I;1!==e&&e!==a-1||l++}let u=new Array(r*n-l),c=0;for(let d=0;d<r;d++){let e=o[d];if(1===e||e===a-1)u.fill(e>1,c,c+n-1),c+=n-1;else for(let t=n-1;t>=0;--t)u[c++]=0!==(e&1<<t)}return u}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let o=0;o<i.length;o++)i[o]=o;else{let e=r+1+2*v.truncDivision(v.truncDivision(r,2)-1,15),t=r/2,n=v.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+v.truncDivision(r,15);i[t-r-1]=n-e-1,i[t+r]=n+e+1}}for(let o=0,a=0;o<n;o++){let l=4*(n-o)+(t?9:12),u=2*o,c=r-1-u;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)s[a+n+r]=e.get(i[u+r],i[u+t]),s[a+2*l+n+r]=e.get(i[u+t],i[c-r]),s[a+4*l+n+r]=e.get(i[c-r],i[c-t]),s[a+6*l+n+r]=e.get(i[c-t],i[u+r])}a+=8*l}return s}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ie.readCode(e,t,8):ie.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ie.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class se{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class oe{static floatToIntBits(e){return e}}oe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ae){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*oe.floatToIntBits(this.x)+oe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,s,o;if(n>=t&&n>=r?(s=e[0],i=e[1],o=e[2]):r>=n&&r>=t?(s=e[1],i=e[0],o=e[2]):(s=e[2],i=e[0],o=e[1]),this.crossProductZ(i,s,o)<0){const e=i;i=o,o=e}e[0]=i,e[1]=s,e[2]=o}static distance(e,t){return se.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ue extends le{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ce{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ce.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new R}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,s=!0,o=!1,a=!1,l=!1,u=!1,c=!1;const h=this.width,d=this.height;for(;s;){s=!1;let f=!0;for(;(f||!a)&&t<h;)f=this.containsBlackPoint(n,r,t,!1),f?(t++,s=!0,a=!0):a||t++;if(t>=h){i=!0;break}let g=!0;for(;(g||!l)&&r<d;)g=this.containsBlackPoint(e,t,r,!0),g?(r++,s=!0,l=!0):l||r++;if(r>=d){i=!0;break}let p=!0;for(;(p||!u)&&e>=0;)p=this.containsBlackPoint(n,r,e,!1),p?(e--,s=!0,u=!0):u||e--;if(e<0){i=!0;break}let m=!0;for(;(m||!c)&&n>=0;)m=this.containsBlackPoint(e,t,n,!0),m?(n--,s=!0,c=!0):c||n--;if(n<0){i=!0;break}s&&(o=!0)}if(!i&&o){const i=t-e;let s=null;for(let t=1;null===s&&t<i;t++)s=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==s)throw new R;let o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==o)throw new R;let a=null;for(let e=1;null===a&&e<i;e++)a=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==a)throw new R;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new R;return this.centerEdges(l,s,a,o)}throw new R}getBlackPointOnSegment(e,t,n,r){const i=se.round(se.distance(e,t,n,r)),s=(n-e)/i,o=(r-t)/i,a=this.image;for(let l=0;l<i;l++){const n=se.round(e+l*s),r=se.round(t+l*o);if(a.get(n,r))return new ae(n,r)}return null}centerEdges(e,t,n,r){const i=e.getX(),s=e.getY(),o=t.getX(),a=t.getY(),l=n.getX(),u=n.getY(),c=r.getX(),h=r.getY(),d=ce.CORR;return i<this.width/2?[new ae(c-d,h+d),new ae(o+d,a+d),new ae(l-d,u-d),new ae(i+d,s-d)]:[new ae(c+d,h+d),new ae(o+d,a-d),new ae(l-d,u+d),new ae(i-d,s-d)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let s=e;s<=t;s++)if(i.get(s,n))return!0}else for(let s=e;s<=t;s++)if(i.get(n,s))return!0;return!1}}ce.INIT_SIZE=10,ce.CORR=1;class he{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const e=Math.floor(t[s]),o=Math.floor(t[s+1]);if(e<-1||e>n||o<-1||o>r)throw new R;i=!1,-1===e?(t[s]=0,i=!0):e===n&&(t[s]=n-1,i=!0),-1===o?(t[s+1]=0,i=!0):o===r&&(t[s+1]=r-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const e=Math.floor(t[s]),o=Math.floor(t[s+1]);if(e<-1||e>n||o<-1||o>r)throw new R;i=!1,-1===e?(t[s]=0,i=!0):e===n&&(t[s]=n-1,i=!0),-1===o?(t[s+1]=0,i=!0):o===r&&(t[s+1]=r-1,i=!0)}}}class de{constructor(e,t,n,r,i,s,o,a,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=o,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,i,s,o,a,l,u,c,h,d,f,g,p){const m=de.quadrilateralToSquare(e,t,n,r,i,s,o,a);return de.squareToQuadrilateral(l,u,c,h,d,f,g,p).times(m)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,u=this.a32,c=this.a33;for(let h=0;h<t;h+=2){const t=e[h],d=e[h+1],f=i*t+a*d+c;e[h]=(n*t+s*d+l)/f,e[h+1]=(r*t+o*d+u)/f}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,u=this.a32,c=this.a33,h=e.length;for(let d=0;d<h;d++){const h=e[d],f=t[d],g=i*h+a*f+c;e[d]=(n*h+s*f+l)/g,t[d]=(r*h+o*f+u)/g}}static squareToQuadrilateral(e,t,n,r,i,s,o,a){const l=e-n+i-o,u=t-r+s-a;if(0===l&&0===u)return new de(n-e,i-n,e,r-t,s-r,t,0,0,1);{const c=n-i,h=o-i,d=r-s,f=a-s,g=c*f-h*d,p=(l*f-h*u)/g,m=(c*u-l*d)/g;return new de(n-e+p*n,o-e+m*o,e,r-t+p*r,a-t+m*a,t,p,m,1)}}static quadrilateralToSquare(e,t,n,r,i,s,o,a){return de.squareToQuadrilateral(e,t,n,r,i,s,o,a).buildAdjoint()}buildAdjoint(){return new de(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new de(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends he{sampleGrid(e,t,n,r,i,s,o,a,l,u,c,h,d,f,g,p,m,y,w){const v=de.quadrilateralToQuadrilateral(r,i,s,o,a,l,u,c,h,d,f,g,p,m,y,w);return this.sampleGridWithTransform(e,t,n,v)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new R;const i=new D(t,n),s=new Float32Array(2*t);for(let a=0;a<n;a++){const t=s.length,n=a+.5;for(let e=0;e<t;e+=2)s[e]=e/2+.5,s[e+1]=n;r.transformPoints(s),he.checkAndNudgePoints(e,s);try{for(let n=0;n<t;n+=2)e.get(Math.floor(s[n]),Math.floor(s[n+1]))&&i.set(n/2,a)}catch(o){throw new R}}return i}}class ge{static setGridSampler(e){ge.gridSampler=e}static getInstance(){return ge.gridSampler}}ge.gridSampler=new fe;class pe{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class me{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ue(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new R;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let e=n[(this.shift+s)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let n=0;e.forEach((e,r,i)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(v.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new R}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let l=n-1;l>=0;--l)s[l]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(s,i)}catch(a){throw new R}let o=0;for(let l=0;l<r;l++)o=(o<<4)+s[l];return o}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,s,1,-1),o=this.getFirstDifferent(n,s,1,1),a=this.getFirstDifferent(r,s,-1,1),l=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,o,a,l))break}t=e,n=o,r=a,i=l,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new R;this.compact=5===this.nbCenterLayers;let o=new ae(t.getX()+.5,t.getY()-.5),a=new ae(n.getX()+.5,n.getY()+.5),l=new ae(r.getX()-.5,r.getY()+.5),u=new ae(i.getX()-.5,i.getY()-.5);return this.expandSquare([o,a,l,u],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let i=new ce(this.image).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(o){let i=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new pe(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new pe(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new pe(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new pe(i-7,s-7),!1,-1,-1).toResultPoint()}let i=se.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let o=new ce(this.image,15,i,s).detect();e=o[0],t=o[1],n=o[2],r=o[3]}catch(o){e=this.getFirstDifferent(new pe(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new pe(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new pe(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new pe(i-7,s-7),!1,-1,-1).toResultPoint()}return i=se.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new pe(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=ge.getInstance(),o=this.getDimension(),a=o/2-this.nbCenterLayers,l=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,a,a,l,a,l,l,a,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,o=e.getX(),a=e.getY(),l=s*(t.getX()-e.getX())/i,u=s*(t.getY()-e.getY())/i;for(let c=0;c<n;c++)this.image.get(se.round(o+c*l),se.round(a+c*u))&&(r|=1<<n-c-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new pe(e.getX()-i,e.getY()+i),t=new pe(t.getX()-i,t.getY()-i),n=new pe(n.getX()+i,n.getY()-i),r=new pe(r.getX()+i,r.getY()+i);let s=this.getColor(r,e);if(0===s)return!1;let o=this.getColor(e,t);return o===s&&(o=this.getColor(t,n),o===s&&(o=this.getColor(n,r),o===s))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,o=e.getX(),a=e.getY(),l=this.image.get(e.getX(),e.getY()),u=Math.ceil(n);for(let h=0;h<u;h++)o+=r,a+=i,this.image.get(se.round(o),se.round(a))!==l&&s++;let c=s/n;return c>.1&&c<.9?0:c<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return s-=r,new pe(i,s)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,l=new ae(o+r*i,a+r*s),u=new ae(o-r*i,a-r*s);return i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2,[l,new ae(o+r*i,a+r*s),u,new ae(o-r*i,a-r*s)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=se.round(e.getX()),n=se.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(v.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new me(e.getBlackMatrix()),i=null,s=null;try{let e=r.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),s=(new ie).decode(e)}catch(u){n=u}if(null==s)try{let e=r.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),s=(new ie).decode(e)}catch(u){if(null!=n)throw n;throw u}let o=new V(s.getText(),s.getRawBytes(),s.getNumBits(),i,H.AZTEC,p.currentTimeMillis()),a=s.getByteSegments();null!=a&&o.putMetadata(Q.BYTE_SEGMENTS,a);let l=s.getECLevel();return null!=l&&o.putMetadata(Q.ERROR_CORRECTION_LEVEL,l),o}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(C.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class we extends U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class ve{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(C.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata();let s=270;null!==i&&!0===i.get(Q.ORIENTATION)&&(s+=i.get(Q.ORIENTATION)%360),r.putMetadata(Q.ORIENTATION,s);const o=r.getResultPoints();if(null!==o){const e=n.getHeight();for(let t=0;t<o.length;t++)o[t]=new ae(e-o[t].getY()-1,o[t].getX())}return r}throw new R}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new E(n);const s=t&&!0===t.get(C.TRY_HARDER),o=Math.max(1,r>>(s?8:5));let a;a=s?r:15;const l=Math.trunc(r/2);for(let h=0;h<a;h++){const s=Math.trunc((h+1)/2),a=l+o*(0===(1&h)?s:-s);if(a<0||a>=r)break;try{i=e.getBlackRow(a,i)}catch(u){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(C.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(C.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(a,i,t);if(1===e){r.putMetadata(Q.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new ae(n-e[0].getX()-1,e[0].getY()),e[1]=new ae(n-e[1].getX()-1,e[1].getY()))}return r}catch(c){}}}throw new R}static recordPattern(e,t,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const i=e.getSize();if(t>=i)throw new R;let s=!e.get(t),o=0,a=t;for(;a<i;){if(e.get(a)!==s)n[o]++;else{if(++o===r)break;n[o]=1,s=!s}a++}if(o!==r&&(o!==r-1||a!==i))throw new R}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new R;ve.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,s=0;for(let l=0;l<r;l++)i+=e[l],s+=t[l];if(i<s)return Number.POSITIVE_INFINITY;const o=i/s;n*=o;let a=0;for(let l=0;l<r;l++){const r=e[l],i=t[l]*o,s=r>i?r-i:i-r;if(s>n)return Number.POSITIVE_INFINITY;a+=s}return a/i}}class Ee extends ve{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,o=!1;const a=6;for(let l=n;l<t;l++)if(e.get(l)!==o)i[r]++;else{if(r===a-1){let t=Ee.MAX_AVG_VARIANCE,n=-1;for(let e=Ee.CODE_START_A;e<=Ee.CODE_START_C;e++){const r=ve.patternMatchVariance(i,Ee.CODE_PATTERNS[e],Ee.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,s-(l-s)/2),s,!1))return Int32Array.from([s,l,n]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,o=!o}throw new R}static decodeCode(e,t,n){ve.recordPattern(e,n,t);let r=Ee.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<Ee.CODE_PATTERNS.length;s++){const e=Ee.CODE_PATTERNS[s],n=this.patternMatchVariance(t,e,Ee.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=s)}if(i>=0)return i;throw new R}decodeRow(e,t,n){const r=n&&!0===n.get(C.ASSUME_GS1),i=Ee.findStartPattern(t),s=i[2];let o=0;const a=new Uint8Array(20);let l;switch(a[o++]=s,s){case Ee.CODE_START_A:l=Ee.CODE_CODE_A;break;case Ee.CODE_START_B:l=Ee.CODE_CODE_B;break;case Ee.CODE_START_C:l=Ee.CODE_CODE_C;break;default:throw new I}let u=!1,c=!1,h="",d=i[0],g=i[1];const p=Int32Array.from([0,0,0,0,0,0]);let m=0,y=0,w=s,v=0,E=!0,_=!1,S=!1;for(;!u;){const e=c;switch(c=!1,m=y,y=Ee.decodeCode(t,p,g),a[o++]=y,y!==Ee.CODE_STOP&&(E=!0),y!==Ee.CODE_STOP&&(v++,w+=v*y),d=g,g+=p.reduce((e,t)=>e+t,0),y){case Ee.CODE_START_A:case Ee.CODE_START_B:case Ee.CODE_START_C:throw new I}switch(l){case Ee.CODE_CODE_A:if(y<64)h+=S===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),S=!1;else if(y<96)h+=S===_?String.fromCharCode(y-64):String.fromCharCode(y+64),S=!1;else switch(y!==Ee.CODE_STOP&&(E=!1),y){case Ee.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case Ee.CODE_FNC_2:case Ee.CODE_FNC_3:break;case Ee.CODE_FNC_4_A:!_&&S?(_=!0,S=!1):_&&S?(_=!1,S=!1):S=!0;break;case Ee.CODE_SHIFT:c=!0,l=Ee.CODE_CODE_B;break;case Ee.CODE_CODE_B:l=Ee.CODE_CODE_B;break;case Ee.CODE_CODE_C:l=Ee.CODE_CODE_C;break;case Ee.CODE_STOP:u=!0}break;case Ee.CODE_CODE_B:if(y<96)h+=S===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),S=!1;else switch(y!==Ee.CODE_STOP&&(E=!1),y){case Ee.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case Ee.CODE_FNC_2:case Ee.CODE_FNC_3:break;case Ee.CODE_FNC_4_B:!_&&S?(_=!0,S=!1):_&&S?(_=!1,S=!1):S=!0;break;case Ee.CODE_SHIFT:c=!0,l=Ee.CODE_CODE_A;break;case Ee.CODE_CODE_A:l=Ee.CODE_CODE_A;break;case Ee.CODE_CODE_C:l=Ee.CODE_CODE_C;break;case Ee.CODE_STOP:u=!0}break;case Ee.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==Ee.CODE_STOP&&(E=!1),y){case Ee.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case Ee.CODE_CODE_A:l=Ee.CODE_CODE_A;break;case Ee.CODE_CODE_B:l=Ee.CODE_CODE_B;break;case Ee.CODE_STOP:u=!0}}e&&(l=l===Ee.CODE_CODE_A?Ee.CODE_CODE_B:Ee.CODE_CODE_A)}const A=g-d;if(g=t.getNextUnset(g),!t.isRange(g,Math.min(t.getSize(),g+(g-d)/2),!1))throw new R;if(w-=v*m,w%103!==m)throw new f;const T=h.length;if(0===T)throw new R;T>0&&E&&(h=l===Ee.CODE_CODE_C?h.substring(0,T-2):h.substring(0,T-1));const b=(i[1]+i[0])/2,N=d+A/2,D=a.length,M=new Uint8Array(D);for(let f=0;f<D;f++)M[f]=a[f];const O=[new ae(b,e),new ae(N,e)];return new V(h,M,0,O,H.CODE_128,(new Date).getTime())}}Ee.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ee.MAX_AVG_VARIANCE=.25,Ee.MAX_INDIVIDUAL_VARIANCE=.7,Ee.CODE_SHIFT=98,Ee.CODE_CODE_C=99,Ee.CODE_CODE_B=100,Ee.CODE_CODE_A=101,Ee.CODE_FNC_1=102,Ee.CODE_FNC_2=97,Ee.CODE_FNC_3=96,Ee.CODE_FNC_4_A=101,Ee.CODE_FNC_4_B=100,Ee.CODE_START_A=103,Ee.CODE_START_B=104,Ee.CODE_START_C=105,Ee.CODE_STOP=106;class _e extends ve{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,s,o=_e.findAsteriskPattern(t,r),a=t.getNextSet(o[1]),l=t.getSize();do{_e.recordPattern(t,a,r);let e=_e.toNarrowWidePattern(r);if(e<0)throw new R;i=_e.patternToChar(e),this.decodeRowResult+=i,s=a;for(let t of r)a+=t;a=t.getNextSet(a)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let u,c=0;for(let f of r)c+=f;if(a!==l&&2*(a-s-c)<c)throw new R;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=_e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==_e.ALPHABET_STRING.charAt(t%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new R;u=this.extendedMode?_e.decodeExtended(this.decodeRowResult):this.decodeRowResult;let h=(o[1]+o[0])/2,d=s+c/2;return new V(u,null,0,[new ae(h,e),new ae(d,e)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,s=r,o=!1,a=t.length;for(let l=r;l<n;l++)if(e.get(l)!==o)t[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(t)===_e.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,o=!o}throw new R}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let i=2147483647;for(let t of e)t<i&&t>r&&(i=t);r=i,t=0;let s=0,o=0;for(let a=0;a<n;a++){let i=e[a];i>r&&(o|=1<<n-1-a,t++,s+=i)}if(3===t){for(let i=0;i<n&&t>0;i++){let n=e[i];if(n>r&&(t--,2*n>=s))return-1}return o}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<_e.CHARACTER_ENCODINGS.length;t++)if(_e.CHARACTER_ENCODINGS[t]===e)return _e.ALPHABET_STRING.charAt(t);if(e===_e.ASTERISK_ENCODING)return"*";throw new R}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(r+1),s="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new I;s=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new I;s=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")s=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")s=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")s=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)s="\0";else if("V"===i)s="@";else if("W"===i)s="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new I;s="\x7f"}break;case"/":if(i>="A"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new I;s=":"}}n+=s,r++}else n+=t}return n}}_e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_e.ASTERISK_ENCODING=148;class Ce extends ve{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new N;Ce.decodeMiddle(t,r[1],i[0],s);let o=s.toString(),a=null;null!=n&&(a=n.get(C.ALLOWED_LENGTHS)),null==a&&(a=Ce.DEFAULT_ALLOWED_LENGTHS);let l=o.length,u=!1,c=0;for(let d of a){if(l===d){u=!0;break}d>c&&(c=d)}if(!u&&l>c&&(u=!0),!u)throw new I;const h=[new ae(r[1],e),new ae(i[0],e)];return new V(o,null,0,h,H.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),o=new Int32Array(5);for(i.fill(0),s.fill(0),o.fill(0);t<n;){ve.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;s[e]=i[t],o[e]=i[t+1]}let n=Ce.decodeDigit(s);r.append(n.toString()),n=this.decodeDigit(o),r.append(n.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=Ce.skipWhiteSpace(e),n=Ce.findGuardPattern(e,t,Ce.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new R}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new R;return n}decodeEnd(e){e.reverse();try{let n,r=Ce.skipWhiteSpace(e);try{n=Ce.findGuardPattern(e,r,Ce.END_PATTERN_REVERSED[0])}catch(t){t instanceof R&&(n=Ce.findGuardPattern(e,r,Ce.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let i=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-i,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),o=!1,a=0,l=t;i.fill(0);for(let u=t;u<s;u++)if(e.get(u)!==o)i[a]++;else{if(a===r-1){if(ve.patternMatchVariance(i,n,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return[l,u];l+=i[0]+i[1],p.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,o=!o}throw new R}static decodeDigit(e){let t=Ce.MAX_AVG_VARIANCE,n=-1,r=Ce.PATTERNS.length;for(let i=0;i<r;i++){let r=Ce.PATTERNS[i],s=ve.patternMatchVariance(e,r,Ce.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,n=i):s===t&&(n=-1)}if(n>=0)return n%10;throw new R}}Ce.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ce.MAX_AVG_VARIANCE=.38,Ce.MAX_INDIVIDUAL_VARIANCE=.5,Ce.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ce.START_PATTERN=Int32Array.from([1,1,1,1]),Ce.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ie extends ve{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,i=Int32Array.from([0,0,0]);for(;!n;){i=Int32Array.from([0,0,0]),t=Ie.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let s=t[0];r=t[1];let o=s-(r-s);o>=0&&(n=e.isRange(o,s,!1))}return t}static checkChecksum(e){return Ie.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ie.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new I;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new I;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Ie.findGuardPattern(e,t,!1,Ie.START_END_PATTERN,new Int32Array(Ie.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize(),o=0,a=t=n?e.getNextUnset(t):e.getNextSet(t),l=r.length,u=n;for(let c=t;c<s;c++)if(e.get(c)!==u)i[o]++;else{if(o===l-1){if(ve.patternMatchVariance(i,r,Ie.MAX_INDIVIDUAL_VARIANCE)<Ie.MAX_AVG_VARIANCE)return Int32Array.from([a,c]);a+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<o-1;t++)i[t]=e[t];i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,u=!u}throw new R}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,o=r.length;for(let a=0;a<o;a++){let e=r[a],n=ve.patternMatchVariance(t,e,Ie.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,s=a)}if(s>=0)return s;throw new R}}Ie.MAX_AVG_VARIANCE=.48,Ie.MAX_INDIVIDUAL_VARIANCE=.7,Ie.START_END_PATTERN=Int32Array.from([1,1,1]),Ie.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ie.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ie.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Se{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),o=Se.parseExtensionString(s),a=[new ae((n[0]+n[1])/2,e),new ae(i,e)],l=new V(s,null,0,a,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let l=0;l<5&&s<i;l++){let t=Ie.decodeDigit(e,r,s,Ie.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(o|=1<<4-l),4!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==n.length)throw new R;let a=this.determineCheckDigit(o);if(Se.extensionChecksum(n.toString())!==a)throw new R;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new R}static parseExtensionString(e){if(5!==e.length)return null;let t=Se.parseExtension5String(e);return null==t?null:new Map([[Q.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class Ae{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),o=Ae.parseExtensionString(s),a=[new ae((n[0]+n[1])/2,e),new ae(i,e)],l=new V(s,null,0,a,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<2&&s<i;a++){let t=Ie.decodeDigit(e,r,s,Ie.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(o|=1<<1-a),1!==a&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new R;if(parseInt(n.toString())%4!==o)throw new R;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[Q.ISSUE_NUMBER,parseInt(e)]])}}class Te{static decodeRow(e,t,n){let r=Ie.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Se).decodeRow(e,t,r)}catch(i){return(new Ae).decodeRow(e,t,r)}}}Te.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class be extends Ie{constructor(){super(),this.decodeRowStringBuffer="",be.L_AND_G_PATTERNS=be.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=be.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];be.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=be.findStartGuardPattern(t),i=null==n?null:n.get(C.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new ae((r[0]+r[1])/2,e);i.foundPossibleResultPoint(t)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),o=s.rowOffset,a=s.resultString;if(null!=i){const t=new ae(o,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,o);if(null!=i){const t=new ae((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let u=l[1],c=u+(u-l[0]);if(c>=t.getSize()||!t.isRange(u,c,!1))throw new R;let h=a.toString();if(h.length<8)throw new I;if(!be.checkChecksum(h))throw new f;let d=(r[1]+r[0])/2,g=(l[1]+l[0])/2,p=this.getBarcodeFormat(),m=[new ae(d,e),new ae(g,e)],y=new V(h,null,0,m,p,(new Date).getTime()),w=0;try{let n=Te.decodeRow(e,t,l[1]);y.putMetadata(Q.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),w=n.getText().length}catch(E){}let v=null==n?null:n.get(C.ALLOWED_EAN_EXTENSIONS);if(null!=v){let e=!1;for(let t in v)if(w.toString()===t){e=!0;break}if(!e)throw new R}return y}decodeEnd(e,t){return be.findGuardPattern(e,t,!1,be.START_END_PATTERN,new Int32Array(be.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return be.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return be.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new I;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new I;n+=t}return(1e3-n)%10}}class Ne extends be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<6&&s<i;a++){let t=be.decodeDigit(e,r,s,be.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(o|=1<<5-a)}n=Ne.determineFirstDigit(n,o),s=be.findGuardPattern(e,s,!0,be.MIDDLE_PATTERN,new Int32Array(be.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<6&&s<i;a++){let t=be.decodeDigit(e,r,s,be.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new R}}Ne.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class De extends be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let o=0;o<4&&s<i;o++){let t=be.decodeDigit(e,r,s,be.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}s=be.findGuardPattern(e,s,!0,be.MIDDLE_PATTERN,new Int32Array(be.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<4&&s<i;o++){let t=be.decodeDigit(e,r,s,be.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return H.EAN_8}}class Re extends be{constructor(){super(...arguments),this.ean13Reader=new Ne}getBarcodeFormat(){return H.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new V(t.substring(1),null,null,e.getResultPoints(),H.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new R}reset(){this.ean13Reader.reset()}}class Me extends be{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let s=t[1],o=0;for(let a=0;a<6&&s<i;a++){const t=Me.decodeDigit(e,r,s,Me.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(o|=1<<5-a)}return{rowOffset:s,resultString:Me.determineNumSysAndCheckDigit(n,o)}}decodeEnd(e,t){return Me.findGuardPatternWithoutCounters(e,t,!0,Me.MIDDLE_END_PATTERN)}checkChecksum(e){return be.checkChecksum(Me.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw R.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new N;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Me.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Me.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Oe extends ve{constructor(e){super();let n=null==e?null:e.get(C.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new Ne),r.push(new Re),r.push(new De),r.push(new Me)):(n.indexOf(H.EAN_13)>-1&&r.push(new Ne),n.indexOf(H.UPC_A)>-1&&r.push(new Re),n.indexOf(H.EAN_8)>-1&&r.push(new De),n.indexOf(H.UPC_E)>-1&&r.push(new Me)),this.readers=r}decodeRow(e,t,n){for(let i of this.readers)try{const r=i.decodeRow(e,t,n),s=r.getBarcodeFormat()===H.EAN_13&&"0"===r.getText().charAt(0),o=null==n?null:n.get(C.POSSIBLE_FORMATS),a=null==o||o.includes(H.UPC_A);if(s&&a){const e=r.getRawBytes(),t=new V(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),H.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new R}reset(){for(let e of this.readers)e.reset()}}class ke extends ve{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(ve.patternMatchVariance(e,t[n],ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE)return n;throw new R}static count(e){return se.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=ke.MIN_FINDER_PATTERN_RATIO&&n<=ke.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}ke.MAX_AVG_VARIANCE=.2,ke.MAX_INDIVIDUAL_VARIANCE=.45,ke.MIN_FINDER_PATTERN_RATIO=9.5/12,ke.MAX_FINDER_PATTERN_RATIO=12.5/14;class Pe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Pe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Le{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ae(n,i)),this.resultPoints.push(new ae(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Le))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class xe{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let a of e)r+=a;let i=0,s=0,o=e.length;for(let a=0;a<o-1;a++){let l;for(l=1,s|=1<<a;l<e[a];l++,s&=~(1<<a)){let e=xe.combins(r-l-1,o-a-2);if(n&&0===s&&r-l-(o-a-1)>=o-a-1&&(e-=xe.combins(r-l-(o-a),o-a-2)),o-a-1>1){let n=0;for(let e=r-l-(o-a-2);e>t;e--)n+=xe.combins(r-l-e-1,o-a-3);e-=n*(o-1-a)}else r-l>t&&e--;i+=e}r-=l}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let o=e;o>n;o--)i*=o,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class Be{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new E(12*t),r=0,i=e[0].getRightChar().getValue();for(let s=11;s>=0;--s)0!=(i&1<<s)&&n.set(r),r++;for(let s=1;s<e.length;++s){let t=e[s],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(i&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class Fe{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ue{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Ve extends Ue{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Ve.FNC1}}Ve.FNC1="$";class ze extends Ue{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class He extends Ue{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new I;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===He.FNC1}isSecondDigitFNC1(){return this.secondDigit===He.FNC1}isAnyFNC1(){return this.firstDigit===He.FNC1||this.secondDigit===He.FNC1}}He.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new R;let t=e.substring(0,2);for(let i of je.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,i[2],e):je.processFixedAI(2,i[1],e);if(e.length<3)throw new R;let n=e.substring(0,3);for(let i of je.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,i[2],e):je.processFixedAI(3,i[1],e);for(let i of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,i[2],e):je.processFixedAI(4,i[1],e);if(e.length<4)throw new R;let r=e.substring(0,4);for(let i of je.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,i[2],e):je.processFixedAI(4,i[1],e);throw new R}static processFixedAI(e,t,n){if(n.length<e)throw new R;let r=n.substring(0,e);if(n.length<e+t)throw new R;let i=n.substring(e,e+t),s=n.substring(e+t),o="("+r+")"+i,a=je.parseFieldsInGeneralPurpose(s);return null==a?o:o+a}static processVariableAI(e,t,n){let r,i=n.substring(0,e);r=n.length<e+t?n.length:e+t;let s=n.substring(e,r),o=n.substring(r),a="("+i+")"+s,l=je.parseFieldsInGeneralPurpose(o);return null==l?a:a+l}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class Ge{constructor(e){this.buffer=new N,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),i=je.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new He(this.information.getSize(),0===t?He.FNC1:t-1,He.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new He(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return Ge.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new ze(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ze(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new ze(this.current.getPosition(),this.buffer.toString()):new ze(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Fe(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fe(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fe(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fe(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ve(e+5,Ve.FNC1);if(t>=5&&t<15)return new Ve(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ve(e+7,""+(r+1));if(r>=90&&r<116)return new Ve(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new I}return new Ve(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ve(e+5,Ve.FNC1);if(t>=5&&t<15)return new Ve(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ve(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new Ve(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class We{constructor(e){this.information=e,this.generalDecoder=new Ge(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ye extends We{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ye.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),e.append(n)}}Ye.GTIN_SIZE=40;class Xe extends Ye{constructor(e){super(e)}parseInformation(){let e=new N;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Xe.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Xe.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE+44)}}Xe.HEADER_SIZE=4;class qe extends We{constructor(e){super(e)}parseInformation(){let e=new N;return this.getGeneralDecoder().decodeAllCodes(e,qe.HEADER_SIZE)}}qe.HEADER_SIZE=5;class Qe extends Ye{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let o=0;o<5;++o)i/s===0&&e.append("0"),s/=10;e.append(i)}}class Ke extends Qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ke.HEADER_SIZE+Qe.GTIN_SIZE+Ke.WEIGHT_SIZE)throw new R;let e=new N;return this.encodeCompressedGtin(e,Ke.HEADER_SIZE),this.encodeCompressedWeight(e,Ke.HEADER_SIZE+Qe.GTIN_SIZE,Ke.WEIGHT_SIZE),e.toString()}}Ke.HEADER_SIZE=5,Ke.WEIGHT_SIZE=15;class $e extends Ke{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ze extends Ke{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+Ye.GTIN_SIZE)throw new R;let e=new N;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+Ye.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+Ye.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class et extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ye.GTIN_SIZE)throw new R;let e=new N;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Qe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new R;let e=new N;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Xe(e);if(!e.get(2))return new qe(e);switch(Ge.extractNumericValueFromBitArray(e,1,4)){case 4:return new $e(e);case 5:return new Ze(e)}switch(Ge.extractNumericValueFromBitArray(e,1,5)){case 12:return new Je(e);case 13:return new et(e)}switch(Ge.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class st extends ke{constructor(e){super(...arguments),this.pairs=new Array(st.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return st.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,st.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof R){if(!this.pairs.length)throw new R;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new R}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!st.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(t);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new R}static isValidSequence(e){for(let t of st.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}i||r||st.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(Be.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),i=[n[0],n[1],r[0],r[1]];return new V(t,null,null,i,H.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let s=1;s<this.pairs.size();++s){let e=this.pairs.get(s);r+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,i=t.length%2==0;this.startFromEven&&(i=!i);let s=!0,o=-1;do{this.findNextPair(e,t,o),r=this.parseFoundFinderPattern(e,n,i),null==r?o=st.getNextSecondBar(e,this.startEnd[0]):s=!1}while(s);let a,l=this.decodeDataCharacter(e,r,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new R;try{a=this.decodeDataCharacter(e,r,i,!1)}catch(u){a=null,this.verbose&&console.log(u)}return new rt(l,a,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,s=e.getSize();i=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let o=t.length%2!=0;this.startFromEven&&(o=!o);let a=!1;for(;i<s&&(a=!e.get(i),a);)i++;let l=0,u=i;for(let c=i;c<s;c++)if(e.get(c)!=a)r[l]++;else{if(3==l){if(o&&st.reverseCounters(r),st.isFinderPattern(r))return this.startEnd[0]=u,void(this.startEnd[1]=c);o&&st.reverseCounters(r),u+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,a=!a}throw new R}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,i=t,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let o,a=this.getDecodeFinderCounters();p.arraycopy(a,0,a,1,a.length-1),a[0]=r;try{o=this.parseFinderValue(a,st.FINDER_PATTERNS)}catch(l){return null}return new Le(o,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let S=0;S<i.length;S++)i[S]=0;if(r)st.recordPatternInReverse(e,t.getStartEnd()[0],i);else{st.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let s=17,o=se.sum(new Int32Array(i))/s,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(o-a)/a>.3)throw new R;let l=this.getOddCounts(),u=this.getEvenCounts(),c=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let S=0;S<i.length;S++){let e=1*i[S]/o,t=e+.5;if(t<1){if(e<.3)throw new R;t=1}else if(t>8){if(e>8.7)throw new R;t=8}let n=S/2;0==(1&S)?(l[n]=t,c[n]=e-t):(u[n]=t,h[n]=e-t)}this.adjustOddEvenCounts(s);let d=4*t.getValue()+(n?0:2)+(r?0:1)-1,f=0,g=0;for(let S=l.length-1;S>=0;S--){if(st.isNotA1left(t,n,r)){let e=st.WEIGHTS[d][2*S];g+=l[S]*e}f+=l[S]}let p=0;for(let S=u.length-1;S>=0;S--)if(st.isNotA1left(t,n,r)){let e=st.WEIGHTS[d][2*S+1];p+=u[S]*e}let m=g+p;if(0!=(1&f)||f>13||f<4)throw new R;let y=(13-f)/2,w=st.SYMBOL_WIDEST[y],v=9-w,E=xe.getRSSvalue(l,w,!0),_=xe.getRSSvalue(u,v,!1),C=st.EVEN_TOTAL_SUBSET[y],I=st.GSUM[y];return new Pe(E*C+_+I,m)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=se.sum(new Int32Array(this.getOddCounts())),n=se.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);let a=t+n-e,l=1==(1&t),u=0==(1&n);if(1==a)if(l){if(u)throw new R;i=!0}else{if(!u)throw new R;o=!0}else if(-1==a)if(l){if(u)throw new R;r=!0}else{if(!u)throw new R;s=!0}else{if(0!=a)throw new R;if(l){if(!u)throw new R;t<n?(r=!0,o=!0):(i=!0,s=!0)}else if(u)throw new R}if(r){if(i)throw new R;st.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&st.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(o)throw new R;st.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&st.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.SYMBOL_WIDEST=[7,5,4,3,1],st.EVEN_TOTAL_SUBSET=[4,20,52,104,204],st.GSUM=[0,348,1388,2948,3988],st.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],st.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],st.FINDER_PAT_A=0,st.FINDER_PAT_B=1,st.FINDER_PAT_C=2,st.FINDER_PAT_D=3,st.FINDER_PAT_E=4,st.FINDER_PAT_F=5,st.FINDER_PATTERN_SEQUENCES=[[st.FINDER_PAT_A,st.FINDER_PAT_A],[st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B],[st.FINDER_PAT_A,st.FINDER_PAT_C,st.FINDER_PAT_B,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_C],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F]],st.MAX_PAIRS=11;class ot extends Pe{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class at extends ke{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);at.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);at.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&at.checkChecksum(s,e))return at.constructResult(s,e);throw new R}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new N;for(let l=13-r.length;l>0;l--)i.append("0");i.append(r);let s=0;for(let l=0;l<13;l++){let e=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);s+=0===(1&l)?3*e:e}s=10-s%10,10===s&&(s=0),i.append(s.toString());let o=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new V(i.toString(),null,0,[o[0],o[1],a[0],a[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),o=null==r?null:r.get(C.NEED_RESULT_POINT_CALLBACK);if(null!=o){let r=(i[0]+i[1])/2;t&&(r=e.getSize()-1-r),o.foundPossibleResultPoint(new ae(r,n))}let a=this.decodeDataCharacter(e,s,!0),l=this.decodeDataCharacter(e,s,!1);return new ot(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch(i){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let p=0;p<r.length;p++)r[p]=0;if(n)ve.recordPatternInReverse(e,t.getStartEnd()[0],r);else{ve.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let i=n?16:15,s=se.sum(new Int32Array(r))/i,o=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let p=0;p<r.length;p++){let e=r[p]/s,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(p/2);0===(1&p)?(o[n]=t,l[n]=e-t):(a[n]=t,u[n]=e-t)}this.adjustOddEvenCounts(n,i);let c=0,h=0;for(let p=o.length-1;p>=0;p--)h*=9,h+=o[p],c+=o[p];let d=0,f=0;for(let p=a.length-1;p>=0;p--)d*=9,d+=a[p],f+=a[p];let g=h+3*d;if(n){if(0!==(1&c)||c>12||c<4)throw new R;let e=(12-c)/2,t=at.OUTSIDE_ODD_WIDEST[e],n=9-t,r=xe.getRSSvalue(o,t,!1),i=xe.getRSSvalue(a,n,!0),s=at.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=at.OUTSIDE_GSUM[e];return new Pe(r*s+i+l,g)}{if(0!==(1&f)||f>10||f<4)throw new R;let e=(10-f)/2,t=at.INSIDE_ODD_WIDEST[e],n=9-t,r=xe.getRSSvalue(o,t,!0),i=xe.getRSSvalue(a,n,!1),s=at.INSIDE_ODD_TOTAL_SUBSET[e],l=at.INSIDE_GSUM[e];return new Pe(i*s+r+l,g)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&(i=!e.get(s),t!==i);)s++;let o=0,a=s;for(let l=s;l<r;l++)if(e.get(l)!==i)n[o]++;else{if(3===o){if(ke.isFinderPattern(n))return[a,l];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,o--}else o++;n[o]=1,i=!i}throw new R}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const o=r[0]-s,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);p.arraycopy(a,0,l,1,a.length-1),l[0]=o;const u=this.parseFinderValue(l,at.FINDER_PATTERNS);let c=s,h=r[1];return n&&(c=e.getSize()-1-c,h=e.getSize()-1-h),new Le(u,[s,r[1]],c,h,t)}adjustOddEvenCounts(e,t){let n=se.sum(new Int32Array(this.getOddCounts())),r=se.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,o=!1,a=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(o=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(o=!0));let l=n+r-t,u=(1&n)===(e?1:0),c=1===(1&r);if(1===l)if(u){if(c)throw new R;s=!0}else{if(!c)throw new R;a=!0}else if(-1===l)if(u){if(c)throw new R;i=!0}else{if(!c)throw new R;o=!0}else{if(0!==l)throw new R;if(u){if(!c)throw new R;n<r?(i=!0,a=!0):(s=!0,o=!0)}else if(c)throw new R}if(i){if(s)throw new R;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new R;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],at.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],at.OUTSIDE_GSUM=[0,161,961,2015,2715],at.INSIDE_GSUM=[0,336,1036,1516],at.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],at.INSIDE_ODD_WIDEST=[2,4,6,8],at.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends ve{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(C.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(C.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(H.EAN_13)||n.includes(H.UPC_A)||n.includes(H.EAN_8)||n.includes(H.UPC_E))&&this.readers.push(new Oe(e)),n.includes(H.CODE_39)&&this.readers.push(new _e(r)),n.includes(H.CODE_128)&&this.readers.push(new Ee),n.includes(H.ITF)&&this.readers.push(new Ce),n.includes(H.RSS_14)&&this.readers.push(new at),n.includes(H.RSS_EXPANDED)&&this.readers.push(new st(this.verbose))):(this.readers.push(new Oe(e)),this.readers.push(new _e),this.readers.push(new Oe(e)),this.readers.push(new Ee),this.readers.push(new Ce),this.readers.push(new at),this.readers.push(new st(this.verbose)))}decodeRow(e,t,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,n)}catch(r){}throw new R}reset(){this.readers.forEach(e=>e.reset())}}class ut extends U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ct{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ht{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class dt{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let o=0;const a=s.getECCodewords(),l=s.getECBlocks();for(let u of l)o+=u.getCount()*(u.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new I;for(let n of dt.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new I}toString(){return""+this.versionNumber}static buildVersions(){return[new dt(1,10,10,8,8,new ct(5,new ht(1,3))),new dt(2,12,12,10,10,new ct(7,new ht(1,5))),new dt(3,14,14,12,12,new ct(10,new ht(1,8))),new dt(4,16,16,14,14,new ct(12,new ht(1,12))),new dt(5,18,18,16,16,new ct(14,new ht(1,18))),new dt(6,20,20,18,18,new ct(18,new ht(1,22))),new dt(7,22,22,20,20,new ct(20,new ht(1,30))),new dt(8,24,24,22,22,new ct(24,new ht(1,36))),new dt(9,26,26,24,24,new ct(28,new ht(1,44))),new dt(10,32,32,14,14,new ct(36,new ht(1,62))),new dt(11,36,36,16,16,new ct(42,new ht(1,86))),new dt(12,40,40,18,18,new ct(48,new ht(1,114))),new dt(13,44,44,20,20,new ct(56,new ht(1,144))),new dt(14,48,48,22,22,new ct(68,new ht(1,174))),new dt(15,52,52,24,24,new ct(42,new ht(2,102))),new dt(16,64,64,14,14,new ct(56,new ht(2,140))),new dt(17,72,72,16,16,new ct(36,new ht(4,92))),new dt(18,80,80,18,18,new ct(48,new ht(4,114))),new dt(19,88,88,20,20,new ct(56,new ht(4,144))),new dt(20,96,96,22,22,new ct(68,new ht(4,174))),new dt(21,104,104,24,24,new ct(56,new ht(6,136))),new dt(22,120,120,18,18,new ct(68,new ht(6,175))),new dt(23,132,132,20,20,new ct(62,new ht(8,163))),new dt(24,144,144,22,22,new ct(62,new ht(8,156),new ht(2,155))),new dt(25,8,18,6,16,new ct(7,new ht(1,5))),new dt(26,8,32,6,14,new ct(11,new ht(1,10))),new dt(27,12,26,10,24,new ct(14,new ht(1,16))),new dt(28,12,36,10,16,new ct(18,new ht(1,22))),new dt(29,16,36,14,16,new ct(24,new ht(1,32))),new dt(30,16,48,14,22,new ct(28,new ht(1,49)))]}}dt.VERSIONS=dt.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new I;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new D(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return dt.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let o=!1,a=!1,l=!1,u=!1;do{if(n!==i||0!==r||o)if(n!==i-2||0!==r||0===(3&s)||a)if(n!==i+4||2!==r||0!==(7&s)||l)if(n!==i-2||0!==r||4!==(7&s)||u){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n-=2,r+=2}while(n>=0&&r<s);n+=1,r+=3;do{n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,s),n-=2,r+=2,u=!0;else e[t++]=255&this.readCorner3(i,s),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(i,s),n-=2,r+=2,a=!0;else e[t++]=255&this.readCorner1(i,s),n-=2,r+=2,o=!0}while(n<i||r<s);if(t!==this.version.getTotalCodewords())throw new I;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new h("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,o=n/i|0,a=new D(o*i,s*r);for(let l=0;l<s;++l){const t=l*r;for(let n=0;n<o;++n){const s=n*i;for(let o=0;o<r;++o){const u=l*(r+2)+1+o,c=t+o;for(let t=0;t<i;++t){const r=n*(i+2)+1+t;if(e.get(r,u)){const e=s+t;a.set(e,c)}}}}}return a}}class gt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let h of i)r+=h.getCount();const s=new Array(r);let o=0;for(let h of i)for(let e=0;e<h.getCount();e++){const e=h.getDataCodewords(),t=n.getECCodewords()+e;s[o++]=new gt(e,new Uint8Array(t))}const a=s[0].codewords.length-n.getECCodewords(),l=a-1;let u=0;for(let h=0;h<l;h++)for(let t=0;t<o;t++)s[t].codewords[h]=e[u++];const c=24===t.getVersionNumber(),d=c?8:o;for(let h=0;h<d;h++)s[h].codewords[a-1]=e[u++];const f=s[0].codewords.length;for(let h=a;h<f;h++)for(let t=0;t<o;t++){const n=c?(t+8)%o:t,r=c&&n>7?h-1:h;s[n].codewords[r]=e[u++]}if(u!==e.length)throw new h;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new h(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const s=8-n,o=e<s?e:s,a=s-o,l=255>>8-o<<a;t=(i[r]&l)>>a,e-=o,n+=o,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){const s=8-e,o=255>>s<<s;t=t<<e|(i[r]&o)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(G||(G={}));class mt{static decode(e){const t=new pt(e),n=new N,r=new N,i=new Array;let s=G.ASCII_ENCODE;do{if(s===G.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case G.C40_ENCODE:this.decodeC40Segment(t,n);break;case G.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case G.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case G.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case G.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new I}s=G.ASCII_ENCODE}}while(s!==G.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new K(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new I;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),G.ASCII_ENCODE;if(129===i)return G.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return G.C40_ENCODE;case 231:return G.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return G.ANSIX12_ENCODE;case 239:return G.TEXT_ENCODE;case 240:return G.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new I}}while(e.available()>0);return G.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){const s=r[e];switch(i){case 0:if(s<3)i=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new I;{const e=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new I}i=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),i=0;break;default:throw new I}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){const s=r[e];switch(i){case 0:if(s<3)i=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new I;{const e=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new I}i=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new I;{const e=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),i=0}break;default:throw new I}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new I;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let s;if(s=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new I;const o=new Uint8Array(s);for(let l=0;l<s;l++){if(e.available()<8)throw new I;o[l]=this.unrandomize255State(e.readBits(8),r++)}n.push(o);try{t.append(T.decode(o,b.ISO88591))}catch(a){throw new ne("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}mt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mt.TEXT_SHIFT2_SET_CHARS=mt.C40_SHIFT2_SET_CHARS,mt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),n=t.getVersion(),r=t.readCodewords(),i=gt.getDataBlocks(r,n);let s=0;for(let l of i)s+=l.getNumDataCodewords();const o=new Uint8Array(s),a=i.length;for(let l=0;l<a;l++){const e=i[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)o[r*a+l]=t[r]}return mt.decode(o)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class wt{constructor(e){this.image=e,this.rectangleDetector=new ce(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new R;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],s=t[3];let o=this.transitionsBetween(n,s)+1,a=this.transitionsBetween(i,s)+1;1===(1&o)&&(o+=1),1===(1&a)&&(a+=1),4*o<7*a&&4*a<7*o&&(o=a=Math.max(o,a));let l=wt.sampleGrid(this.image,n,r,i,s,o,a);return new le(l,[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new ae(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new ae(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),o=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),l=this.transitionsBetween(i,t),u=s,c=[i,t,n,r];return u>o&&(u=o,c[0]=t,c[1]=n,c[2]=r,c[3]=i),u>a&&(u=a,c[0]=n,c[1]=r,c[2]=i,c[3]=t),u>l&&(c[0]=r,c[1]=i,c[2]=t,c[3]=n),c}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),o=wt.shiftPoint(n,r,4*(s+1)),a=wt.shiftPoint(r,n,4*(s+1));return this.transitionsBetween(o,t)<this.transitionsBetween(a,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),o=this.transitionsBetween(n,i),a=wt.shiftPoint(t,n,4*(o+1)),l=wt.shiftPoint(r,n,4*(s+1));s=this.transitionsBetween(a,i),o=this.transitionsBetween(l,i);let u=new ae(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),c=new ae(i.getX()+(t.getX()-n.getX())/(o+1),i.getY()+(t.getY()-n.getY())/(o+1));return this.isValid(u)?this.isValid(c)?this.transitionsBetween(a,u)+this.transitionsBetween(l,u)>this.transitionsBetween(a,c)+this.transitionsBetween(l,c)?u:c:u:this.isValid(c)?c:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,o=this.transitionsBetween(r,i)+1,a=wt.shiftPoint(t,n,4*o),l=wt.shiftPoint(r,n,4*s);s=this.transitionsBetween(a,i)+1,o=this.transitionsBetween(l,i)+1,1===(1&s)&&(s+=1),1===(1&o)&&(o+=1);let u,c,h=(t.getX()+n.getX()+r.getX()+i.getX())/4,d=(t.getY()+n.getY()+r.getY()+i.getY())/4;return t=wt.moveAway(t,h,d),n=wt.moveAway(n,h,d),r=wt.moveAway(r,h,d),i=wt.moveAway(i,h,d),a=wt.shiftPoint(t,n,4*o),a=wt.shiftPoint(a,i,4*s),u=wt.shiftPoint(n,t,4*o),u=wt.shiftPoint(u,r,4*s),l=wt.shiftPoint(r,i,4*o),l=wt.shiftPoint(l,n,4*s),c=wt.shiftPoint(i,r,4*o),c=wt.shiftPoint(c,t,4*s),[a,u,l,c]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,o){return ge.getInstance().sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-r)>Math.abs(i-n);if(o){let e=n;n=r,r=e,e=i,i=s,s=e}let a=Math.abs(i-n),l=Math.abs(s-r),u=-a/2,c=r<s?1:-1,h=n<i?1:-1,d=0,f=this.image.get(o?r:n,o?n:r);for(let g=n,p=r;g!==i;g+=h){let e=this.image.get(o?p:g,o?g:p);if(e!==f&&(d++,f=e),u+=l,u>0){if(p===s)break;p+=c,u-=a}}return d}}class vt{constructor(){this.decoder=new yt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(C.PURE_BARCODE)){const r=vt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=vt.NO_POINTS}else{const r=new wt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const i=t.getRawBytes(),s=new V(t.getText(),i,8*i.length,n,H.DATA_MATRIX,p.currentTimeMillis()),o=t.getByteSegments();null!=o&&s.putMetadata(Q.BYTE_SEGMENTS,o);const a=t.getECLevel();return null!=a&&s.putMetadata(Q.ERROR_CORRECTION_LEVEL,a),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new R;const r=this.moduleSize(t,e);let i=t[1];const s=n[1];let o=t[0];const a=(n[0]-o+1)/r,l=(s-i+1)/r;if(a<=0||l<=0)throw new R;const u=r/2;i+=u,o+=u;const c=new D(a,l);for(let h=0;h<l;h++){const t=i+h*r;for(let n=0;n<a;n++)e.get(o+n*r,t)&&c.set(n,h)}return c}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new R;const s=r-e[0];if(0===s)throw new R;return s}}vt.NO_POINTS=[];class Et extends U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new vt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(W||(W={}));class _t{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,_t.FOR_BITS.set(n,this),_t.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return _t.L;case"M":return _t.M;case"Q":return _t.Q;case"H":return _t.H;default:throw new c(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof _t))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=_t.FOR_BITS.size)throw new h;return _t.FOR_BITS.get(e)}}_t.FOR_BITS=new Map,_t.FOR_VALUE=new Map,_t.L=new _t(W.L,"L",1),_t.M=new _t(W.M,"M",0),_t.Q=new _t(W.Q,"Q",3),_t.H=new _t(W.H,"H",2);class Ct{constructor(e){this.errorCorrectionLevel=_t.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return v.bitCount(e^t)}static decodeFormatInformation(e,t){const n=Ct.doDecodeFormatInformation(e,t);return null!==n?n:Ct.doDecodeFormatInformation(e^Ct.FORMAT_INFO_MASK_QR,t^Ct.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of Ct.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new Ct(i[1]);let o=Ct.numBitsDiffering(e,s);o<n&&(r=i[1],n=o),e!==t&&(o=Ct.numBitsDiffering(t,s),o<n&&(r=i[1],n=o))}return n<=3?new Ct(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Ct))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Ct.FORMAT_INFO_MASK_QR=21522,Ct.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class It{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class St{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.ecBlocks=r;let s=0;const o=r[0].getECCodewordsPerBlock(),a=r[0].getECBlocks();for(const l of a)s+=l.getCount()*(l.getDataCodewords()+o);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new I;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new I}}static getVersionForNumber(e){if(e<1||e>40)throw new h;return At.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<At.VERSION_DECODE_INFO.length;r++){const i=At.VERSION_DECODE_INFO[r];if(i===e)return At.getVersionForNumber(r+7);const s=Ct.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?At.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new D(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new It(7,new St(1,19)),new It(10,new St(1,16)),new It(13,new St(1,13)),new It(17,new St(1,9))),new At(2,Int32Array.from([6,18]),new It(10,new St(1,34)),new It(16,new St(1,28)),new It(22,new St(1,22)),new It(28,new St(1,16))),new At(3,Int32Array.from([6,22]),new It(15,new St(1,55)),new It(26,new St(1,44)),new It(18,new St(2,17)),new It(22,new St(2,13))),new At(4,Int32Array.from([6,26]),new It(20,new St(1,80)),new It(18,new St(2,32)),new It(26,new St(2,24)),new It(16,new St(4,9))),new At(5,Int32Array.from([6,30]),new It(26,new St(1,108)),new It(24,new St(2,43)),new It(18,new St(2,15),new St(2,16)),new It(22,new St(2,11),new St(2,12))),new At(6,Int32Array.from([6,34]),new It(18,new St(2,68)),new It(16,new St(4,27)),new It(24,new St(4,19)),new It(28,new St(4,15))),new At(7,Int32Array.from([6,22,38]),new It(20,new St(2,78)),new It(18,new St(4,31)),new It(18,new St(2,14),new St(4,15)),new It(26,new St(4,13),new St(1,14))),new At(8,Int32Array.from([6,24,42]),new It(24,new St(2,97)),new It(22,new St(2,38),new St(2,39)),new It(22,new St(4,18),new St(2,19)),new It(26,new St(4,14),new St(2,15))),new At(9,Int32Array.from([6,26,46]),new It(30,new St(2,116)),new It(22,new St(3,36),new St(2,37)),new It(20,new St(4,16),new St(4,17)),new It(24,new St(4,12),new St(4,13))),new At(10,Int32Array.from([6,28,50]),new It(18,new St(2,68),new St(2,69)),new It(26,new St(4,43),new St(1,44)),new It(24,new St(6,19),new St(2,20)),new It(28,new St(6,15),new St(2,16))),new At(11,Int32Array.from([6,30,54]),new It(20,new St(4,81)),new It(30,new St(1,50),new St(4,51)),new It(28,new St(4,22),new St(4,23)),new It(24,new St(3,12),new St(8,13))),new At(12,Int32Array.from([6,32,58]),new It(24,new St(2,92),new St(2,93)),new It(22,new St(6,36),new St(2,37)),new It(26,new St(4,20),new St(6,21)),new It(28,new St(7,14),new St(4,15))),new At(13,Int32Array.from([6,34,62]),new It(26,new St(4,107)),new It(22,new St(8,37),new St(1,38)),new It(24,new St(8,20),new St(4,21)),new It(22,new St(12,11),new St(4,12))),new At(14,Int32Array.from([6,26,46,66]),new It(30,new St(3,115),new St(1,116)),new It(24,new St(4,40),new St(5,41)),new It(20,new St(11,16),new St(5,17)),new It(24,new St(11,12),new St(5,13))),new At(15,Int32Array.from([6,26,48,70]),new It(22,new St(5,87),new St(1,88)),new It(24,new St(5,41),new St(5,42)),new It(30,new St(5,24),new St(7,25)),new It(24,new St(11,12),new St(7,13))),new At(16,Int32Array.from([6,26,50,74]),new It(24,new St(5,98),new St(1,99)),new It(28,new St(7,45),new St(3,46)),new It(24,new St(15,19),new St(2,20)),new It(30,new St(3,15),new St(13,16))),new At(17,Int32Array.from([6,30,54,78]),new It(28,new St(1,107),new St(5,108)),new It(28,new St(10,46),new St(1,47)),new It(28,new St(1,22),new St(15,23)),new It(28,new St(2,14),new St(17,15))),new At(18,Int32Array.from([6,30,56,82]),new It(30,new St(5,120),new St(1,121)),new It(26,new St(9,43),new St(4,44)),new It(28,new St(17,22),new St(1,23)),new It(28,new St(2,14),new St(19,15))),new At(19,Int32Array.from([6,30,58,86]),new It(28,new St(3,113),new St(4,114)),new It(26,new St(3,44),new St(11,45)),new It(26,new St(17,21),new St(4,22)),new It(26,new St(9,13),new St(16,14))),new At(20,Int32Array.from([6,34,62,90]),new It(28,new St(3,107),new St(5,108)),new It(26,new St(3,41),new St(13,42)),new It(30,new St(15,24),new St(5,25)),new It(28,new St(15,15),new St(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new It(28,new St(4,116),new St(4,117)),new It(26,new St(17,42)),new It(28,new St(17,22),new St(6,23)),new It(30,new St(19,16),new St(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new It(28,new St(2,111),new St(7,112)),new It(28,new St(17,46)),new It(30,new St(7,24),new St(16,25)),new It(24,new St(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new It(30,new St(4,121),new St(5,122)),new It(28,new St(4,47),new St(14,48)),new It(30,new St(11,24),new St(14,25)),new It(30,new St(16,15),new St(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new It(30,new St(6,117),new St(4,118)),new It(28,new St(6,45),new St(14,46)),new It(30,new St(11,24),new St(16,25)),new It(30,new St(30,16),new St(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new It(26,new St(8,106),new St(4,107)),new It(28,new St(8,47),new St(13,48)),new It(30,new St(7,24),new St(22,25)),new It(30,new St(22,15),new St(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new It(28,new St(10,114),new St(2,115)),new It(28,new St(19,46),new St(4,47)),new It(28,new St(28,22),new St(6,23)),new It(30,new St(33,16),new St(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new It(30,new St(8,122),new St(4,123)),new It(28,new St(22,45),new St(3,46)),new It(30,new St(8,23),new St(26,24)),new It(30,new St(12,15),new St(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new It(30,new St(3,117),new St(10,118)),new It(28,new St(3,45),new St(23,46)),new It(30,new St(4,24),new St(31,25)),new It(30,new St(11,15),new St(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new It(30,new St(7,116),new St(7,117)),new It(28,new St(21,45),new St(7,46)),new It(30,new St(1,23),new St(37,24)),new It(30,new St(19,15),new St(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new It(30,new St(5,115),new St(10,116)),new It(28,new St(19,47),new St(10,48)),new It(30,new St(15,24),new St(25,25)),new It(30,new St(23,15),new St(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new It(30,new St(13,115),new St(3,116)),new It(28,new St(2,46),new St(29,47)),new It(30,new St(42,24),new St(1,25)),new It(30,new St(23,15),new St(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new It(30,new St(17,115)),new It(28,new St(10,46),new St(23,47)),new It(30,new St(10,24),new St(35,25)),new It(30,new St(19,15),new St(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new It(30,new St(17,115),new St(1,116)),new It(28,new St(14,46),new St(21,47)),new It(30,new St(29,24),new St(19,25)),new It(30,new St(11,15),new St(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new It(30,new St(13,115),new St(6,116)),new It(28,new St(14,46),new St(23,47)),new It(30,new St(44,24),new St(7,25)),new It(30,new St(59,16),new St(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new It(30,new St(12,121),new St(7,122)),new It(28,new St(12,47),new St(26,48)),new It(30,new St(39,24),new St(14,25)),new It(30,new St(22,15),new St(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new It(30,new St(6,121),new St(14,122)),new It(28,new St(6,47),new St(34,48)),new It(30,new St(46,24),new St(10,25)),new It(30,new St(2,15),new St(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new It(30,new St(17,122),new St(4,123)),new It(28,new St(29,46),new St(14,47)),new It(30,new St(49,24),new St(10,25)),new It(30,new St(24,15),new St(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new It(30,new St(4,122),new St(18,123)),new It(28,new St(13,46),new St(32,47)),new It(30,new St(48,24),new St(14,25)),new It(30,new St(42,15),new St(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new It(30,new St(20,117),new St(4,118)),new It(28,new St(40,47),new St(7,48)),new It(30,new St(43,24),new St(22,25)),new It(30,new St(10,15),new St(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new It(30,new St(19,118),new St(6,119)),new It(28,new St(18,47),new St(31,48)),new It(30,new St(34,24),new St(34,25)),new It(30,new St(20,15),new St(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Y||(Y={}));class Tt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Tt.values=new Map([[Y.DATA_MASK_000,new Tt(Y.DATA_MASK_000,(e,t)=>0===(e+t&1))],[Y.DATA_MASK_001,new Tt(Y.DATA_MASK_001,(e,t)=>0===(1&e))],[Y.DATA_MASK_010,new Tt(Y.DATA_MASK_010,(e,t)=>t%3===0)],[Y.DATA_MASK_011,new Tt(Y.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[Y.DATA_MASK_100,new Tt(Y.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[Y.DATA_MASK_101,new Tt(Y.DATA_MASK_101,(e,t)=>e*t%6===0)],[Y.DATA_MASK_110,new Tt(Y.DATA_MASK_110,(e,t)=>e*t%6<3)],[Y.DATA_MASK_111,new Tt(Y.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class bt{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new I;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=Ct.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new I}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return At.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,s,n);let i=At.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let s=5;s>=0;s--)for(let t=e-9;t>=r;t--)n=this.copyBit(s,t,n);if(i=At.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new I}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Tt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let s=!0;const o=new Uint8Array(t.getTotalCodewords());let a=0,l=0,u=0;for(let c=r-1;c>0;c-=2){6===c&&c--;for(let e=0;e<r;e++){const t=s?r-1-e:e;for(let e=0;e<2;e++)i.get(c-e,t)||(u++,l<<=1,this.bitMatrix.get(c-e,t)&&(l|=1),8===u&&(o[a++]=l,u=0,l=0))}s=!s}if(a!==t.getTotalCodewords())throw new I;return o}remask(){if(null===this.parsedFormatInfo)return;const e=Tt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Nt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new h;const r=t.getECBlocksForLevel(n);let i=0;const s=r.getECBlocks();for(const h of s)i+=h.getCount();const o=new Array(i);let a=0;for(const h of s)for(let e=0;e<h.getCount();e++){const e=h.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;o[a++]=new Nt(e,new Uint8Array(t))}const l=o[0].codewords.length;let u=o.length-1;for(;u>=0&&o[u].codewords.length!==l;)u--;u++;const c=l-r.getECCodewordsPerBlock();let d=0;for(let h=0;h<c;h++)for(let t=0;t<a;t++)o[t].codewords[h]=e[d++];for(let h=u;h<a;h++)o[h].codewords[c]=e[d++];const f=o[0].codewords.length;for(let h=c;h<f;h++)for(let t=0;t<a;t++){const n=t<u?h:h+1;o[t].codewords[n]=e[d++]}return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(X||(X={}));class Dt{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,Dt.FOR_BITS.set(r,this),Dt.FOR_VALUE.set(e,this)}static forBits(e){const t=Dt.FOR_BITS.get(e);if(void 0===t)throw new h;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Dt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}Dt.FOR_BITS=new Map,Dt.FOR_VALUE=new Map,Dt.TERMINATOR=new Dt(X.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Dt.NUMERIC=new Dt(X.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Dt.ALPHANUMERIC=new Dt(X.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Dt.STRUCTURED_APPEND=new Dt(X.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Dt.BYTE=new Dt(X.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Dt.ECI=new Dt(X.ECI,"ECI",Int32Array.from([0,0,0]),7),Dt.KANJI=new Dt(X.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Dt.FNC1_FIRST_POSITION=new Dt(X.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Dt.FNC1_SECOND_POSITION=new Dt(X.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Dt.HANZI=new Dt(X.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Rt{static decode(e,t,n,r){const i=new pt(e);let s=new N;const o=new Array;let a=-1,l=-1;try{let e,n=null,u=!1;do{if(i.available()<4)e=Dt.TERMINATOR;else{const t=i.readBits(4);e=Dt.forBits(t)}switch(e){case Dt.TERMINATOR:break;case Dt.FNC1_FIRST_POSITION:case Dt.FNC1_SECOND_POSITION:u=!0;break;case Dt.STRUCTURED_APPEND:if(i.available()<16)throw new I;a=i.readBits(8),l=i.readBits(8);break;case Dt.ECI:const c=Rt.parseECIValue(i);if(n=S.getCharacterSetECIByValue(c),null===n)throw new I;break;case Dt.HANZI:const h=i.readBits(4),d=i.readBits(e.getCharacterCountBits(t));h===Rt.GB2312_SUBSET&&Rt.decodeHanziSegment(i,s,d);break;default:const f=i.readBits(e.getCharacterCountBits(t));switch(e){case Dt.NUMERIC:Rt.decodeNumericSegment(i,s,f);break;case Dt.ALPHANUMERIC:Rt.decodeAlphanumericSegment(i,s,f,u);break;case Dt.BYTE:Rt.decodeByteSegment(i,s,f,n,o,r);break;case Dt.KANJI:Rt.decodeKanjiSegment(i,s,f);break;default:throw new I}}}while(e!==Dt.TERMINATOR)}catch(u){throw new I}return new K(e,s.toString(),0===o.length?null:o,null===n?null:n.toString(),a,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new I;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let s=t/96<<8&4294967295|t%96;s+=s<959?41377:42657,r[i]=s>>8&255,r[i+1]=255&s,i+=2,n--}try{t.append(T.decode(r,b.GB2312))}catch(s){throw new I(s)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new I;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let s=t/192<<8&4294967295|t%192;s+=s<7936?33088:49472,r[i]=s>>8,r[i+1]=s,i+=2,n--}try{t.append(T.decode(r,b.SHIFT_JIS))}catch(s){throw new I(s)}}static decodeByteSegment(e,t,n,r,i,s){if(8*n>e.available())throw new I;const o=new Uint8Array(n);for(let u=0;u<n;u++)o[u]=e.readBits(8);let a;a=null===r?b.guessEncoding(o,s):r.getName();try{t.append(T.decode(o,a))}catch(l){throw new I(l)}i.push(o)}static toAlphaNumericChar(e){if(e>=Rt.ALPHANUMERIC_CHARS.length)throw new I;return Rt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new I;const r=e.readBits(11);t.append(Rt.toAlphaNumericChar(Math.floor(r/45))),t.append(Rt.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new I;t.append(Rt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let s=i;s<t.length();s++)"%"===t.charAt(s)&&(s<t.length()-1&&"%"===t.charAt(s+1)?t.deleteCharAt(s+1):t.setCharAt(s,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new I;const r=e.readBits(10);if(r>=1e3)throw new I;t.append(Rt.toAlphaNumericChar(Math.floor(r/100))),t.append(Rt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(Rt.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new I;const n=e.readBits(7);if(n>=100)throw new I;t.append(Rt.toAlphaNumericChar(Math.floor(n/10))),t.append(Rt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new I;const n=e.readBits(4);if(n>=10)throw new I;t.append(Rt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new I}}Rt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Rt.GB2312_SUBSET=1;class Mt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Ot{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(D.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new bt(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Mt(!0)),e}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=Nt.getDataBlocks(i,n,r);let o=0;for(const u of s)o+=u.getNumDataCodewords();const a=new Uint8Array(o);let l=0;for(const u of s){const e=u.getCodewords(),t=u.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)a[l++]=e[n]}return Rt.decode(a,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class kt extends ae{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new kt(r,i,s)}}class Pt{constructor(e,t,n,r,i,s,o){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),s=this.image;for(let o=0;o<t;o++){const t=r+(0===(1&o)?Math.floor((o+1)/2):-Math.floor((o+1)/2));i[0]=0,i[1]=0,i[2]=0;let a=e;for(;a<n&&!s.get(a,t);)a++;let l=0;for(;a<n;){if(s.get(a,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,a);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;a++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new R}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&!i.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(t,a)&&o[1]<=n;)o[1]++,a++;if(a===s||o[1]>n)return NaN;for(;a<s&&!i.get(t,a)&&o[2]<=n;)o[2]++,a++;if(o[2]>n)return NaN;const l=o[0]+o[1]+o[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(o)?Pt.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Pt.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,s,i))return e.combineEstimate(s,i,t);const n=new kt(i,s,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Lt extends ae{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,o=(this.count*this.estimatedModuleSize+n)/r;return new Lt(i,s,o,r)}}class xt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Bt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(C.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(C.PURE_BARCODE),r=this.image,i=r.getHeight(),s=r.getWidth();let o=Math.floor(3*i/(4*Bt.MAX_MODULES));(o<Bt.MIN_SKIP||t)&&(o=Bt.MIN_SKIP);let a=!1;const l=new Int32Array(5);for(let c=o-1;c<i&&!a;c+=o){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<s;t++)if(r.get(t,c))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Bt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,c,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(o=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(c+=e-l[2]-o,t=s-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Bt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,c,s,n)&&(o=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const u=this.selectBestPatterns();return ae.orderBestPatterns(u),new xt(u)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const n=e[i];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let s=0;const o=this.image;for(;e>=s&&t>=s&&o.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||t<s||i[1]>n)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;const a=o.getHeight(),l=o.getWidth();for(s=1;e+s<a&&t+s<l&&o.get(t+s,e+s);)i[2]++,s++;if(e+s>=a||t+s>=l)return!1;for(;e+s<a&&t+s<l&&!o.get(t+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=a||t+s>=l||i[3]>=n)return!1;for(;e+s<a&&t+s<l&&o.get(t+s,e+s)&&i[4]<n;)i[4]++,s++;if(i[4]>=n)return!1;const u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-r)<2*r&&Bt.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),o=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(t,a);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&i.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(t,a);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(t,a)&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;a<s&&i.get(t,a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;const l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-r)>=2*r?NaN:Bt.foundPatternCross(o)?Bt.centerFromEnd(o,a):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,s=i.getWidth(),o=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(a,t);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,t)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&i.get(a,t)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(a,t);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(a,t)&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;a<s&&i.get(a,t)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;const l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-r)>=r?NaN:Bt.foundPatternCross(o)?Bt.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let s=Bt.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],i),!isNaN(s)&&(!r||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],i)))){const e=i/7;let t=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(e,o,s)){n[r]=i.combineEstimate(o,s,e),t=!0;break}}if(!t){const t=new Lt(s,o,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Bt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=Bt.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const s of this.possibleCenters)i+=Math.abs(s.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new R;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,i+=t*t}n=r/e;let s=Math.sqrt(i/e-n*n);t.sort((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0});const o=Math.max(.2*n,s);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>o&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Bt.CENTER_QUORUM=2,Bt.MIN_SKIP=3,Bt.MAX_MODULES=57;class Ft{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(C.NEED_RESULT_POINT_CALLBACK);const t=new Bt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new R("No pattern found in proccess finder.");const s=Ft.computeDimension(t,n,r,i),o=At.getProvisionalVersionForDimension(s),a=o.getDimensionForVersion()-7;let l=null;if(o.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),s=n.getY()-t.getY()+r.getY(),o=1-3/a,u=Math.floor(t.getX()+o*(e-t.getX())),c=Math.floor(t.getY()+o*(s-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(i,u,c,t);break}catch(d){if(!(d instanceof R))throw d}}const u=Ft.createTransform(t,n,r,l,s),c=Ft.sampleGrid(this.image,u,s);let h;return h=null===l?[r,t,n]:[r,t,n,l],new le(c,h)}static createTransform(e,t,n,r,i){const s=i-3.5;let o,a,l,u;return null!==r?(o=r.getX(),a=r.getY(),l=s-3,u=l):(o=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),l=s,u=s),de.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,u,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return ge.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=se.round(ae.distance(e,t)/r),s=se.round(ae.distance(e,n)/r);let o=Math.floor((i+s)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new R("Dimensions could be not found.")}return o}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);let a=Math.floor(t-(r-t)*s);return s=1,a<0?(s=t/(t-a),a=0):a>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,o,a),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let i=e;e=t,t=i,i=n,n=r,r=i}const s=Math.abs(n-e),o=Math.abs(r-t);let a=-s/2;const l=e<n?1:-1,u=t<r?1:-1;let c=0;const h=n+l;for(let d=e,f=t;d!==h;d+=l){const n=i?f:d,l=i?d:f;if(1===c===this.image.get(n,l)){if(2===c)return se.distance(d,f,e,t);c++}if(a+=o,a>0){if(f===r)break;f+=u,a-=s}}return 2===c?se.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),s=Math.max(0,t-i),o=Math.min(this.image.getWidth()-1,t+i);if(o-s<3*e)throw new R("Alignment top exceeds estimated module size.");const a=Math.max(0,n-i),l=Math.min(this.image.getHeight()-1,n+i);if(l-a<3*e)throw new R("Alignment bottom exceeds estimated module size.");return new Pt(this.image,s,a,o-s,l-a,e,this.resultPointCallback).find()}}class Ut{constructor(){this.decoder=new Ot}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(C.PURE_BARCODE)){const i=Ut.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),r=Ut.NO_POINTS}else{const i=new Ft(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(i.getBits(),t),r=i.getPoints()}n.getOther()instanceof Mt&&n.getOther().applyMirroredCorrection(r);const i=new V(n.getText(),n.getRawBytes(),void 0,r,H.QR_CODE,void 0),s=n.getByteSegments();null!==s&&i.putMetadata(Q.BYTE_SEGMENTS,s);const o=n.getECLevel();return null!==o&&i.putMetadata(Q.ERROR_CORRECTION_LEVEL,o),n.hasStructuredAppend()&&(i.putMetadata(Q.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(Q.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new R;const r=this.moduleSize(t,e);let i=t[1],s=n[1],o=t[0],a=n[0];if(o>=a||i>=s)throw new R;if(s-i!==a-o&&(a=o+(s-i),a>=e.getWidth()))throw new R;const l=Math.round((a-o+1)/r),u=Math.round((s-i+1)/r);if(l<=0||u<=0)throw new R;if(u!==l)throw new R;const c=Math.floor(r/2);i+=c,o+=c;const h=o+Math.floor((l-1)*r)-a;if(h>0){if(h>c)throw new R;o-=h}const d=i+Math.floor((u-1)*r)-s;if(d>0){if(d>c)throw new R;i-=d}const f=new D(l,u);for(let g=0;g<u;g++){const t=i+Math.floor(g*r);for(let n=0;n<l;n++)e.get(o+Math.floor(n*r),t)&&f.set(n,g)}return f}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],s=e[1],o=!0,a=0;for(;i<r&&s<n;){if(o!==t.get(i,s)){if(5===++a)break;o=!o}i++,s++}if(i===r||s===n)throw new R;return(i-e[0])/7}}Ut.NO_POINTS=new Array;class Vt{PDF417Common(){}static getBitCountSum(e){return se.sum(e)}static toIntArray(e){if(null==e||!e.length)return Vt.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=w.binarySearch(Vt.SYMBOL_TABLE,262143&e);return t<0?-1:(Vt.CODEWORD_TABLE[t]-1)%Vt.NUMBER_OF_CODEWORDS}}Vt.NUMBER_OF_CODEWORDS=929,Vt.MAX_CODEWORDS_IN_BARCODE=Vt.NUMBER_OF_CODEWORDS-1,Vt.MIN_ROWS_IN_BARCODE=3,Vt.MAX_ROWS_IN_BARCODE=90,Vt.MODULES_IN_CODEWORD=17,Vt.MODULES_IN_STOP_PATTERN=18,Vt.BARS_IN_MODULE=8,Vt.EMPTY_INT_ARRAY=new Int32Array([]),Vt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Vt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class zt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Ht.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Ht.detect(n,r)),new zt(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,s=!1;for(;r<t.getHeight();){const o=Ht.findVertices(t,r,i);if(null!=o[0]||null!=o[3]){if(s=!0,n.push(o),!e)break;null!=o[2]?(i=Math.trunc(o[2].getX()),r=Math.trunc(o[2].getY())):(i=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY()))}else{if(!s)break;s=!1,i=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=Ht.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),s=new Array(8);return Ht.copyToResult(s,Ht.findRowsWithPattern(e,r,i,t,n,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),Ht.copyToResult(s,Ht.findRowsWithPattern(e,r,i,t,n,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){const o=new Array(4);let a=!1;const l=new Int32Array(s.length);for(;r<t;r+=Ht.ROW_STEP){let t=Ht.findGuardPattern(e,i,r,n,!1,s,l);if(null!=t){for(;r>0;){const o=Ht.findGuardPattern(e,i,--r,n,!1,s,l);if(null==o){r++;break}t=o}o[0]=new ae(t[0],r),o[1]=new ae(t[1],r),a=!0;break}}let u=r+1;if(a){let r=0,i=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;u<t;u++){const t=Ht.findGuardPattern(e,i[0],u,n,!1,s,l);if(null!=t&&Math.abs(i[0]-t[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<Ht.MAX_PATTERN_DRIFT)i=t,r=0;else{if(r>Ht.SKIPPED_ROW_COUNT_MAX)break;r++}}u-=r+1,o[2]=new ae(i[0],u),o[3]=new ae(i[1],u)}return u-r<Ht.BARCODE_MIN_HEIGHT&&w.fill(o,null),o}static findGuardPattern(e,t,n,r,i,s,o){w.fillWithin(o,0,o.length,0);let a=t,l=0;for(;e.get(a,n)&&a>0&&l++<Ht.MAX_PIXEL_DRIFT;)a--;let u=a,c=0,h=s.length;for(let d=i;u<r;u++)if(e.get(u,n)!==d)o[c]++;else{if(c===h-1){if(Ht.patternMatchVariance(o,s,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([a,u]);a+=o[0]+o[1],p.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,d=!d}return c===h-1&&Ht.patternMatchVariance(o,s,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([a,u-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let l=0;l<r;l++)i+=e[l],s+=t[l];if(i<s)return 1/0;let o=i/s;n*=o;let a=0;for(let l=0;l<r;l++){let r=e[l],i=t[l]*o,s=r>i?r-i:i-r;if(s>n)return 1/0;a+=s}return a/i}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class jt{constructor(e,t){if(0===t.length)throw new h;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),p.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;p.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=this.field.add(t[s-i],n[s]);return new jt(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof jt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new jt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let o=0;o<n;o++){let e=t[o];for(let t=0;t<i;t++)s[o+t]=this.field.add(s[o+t],this.field.multiply(e,r[t]))}return new jt(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new jt(this.field,t)}multiplyScalar(e){if(0===e)return new jt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new jt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new h;if(0===t)return new jt(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new jt(this.field,r)}toString(){let e=new N;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Gt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new h;return this.logTable[e]}inverse(e){if(0===e)throw new J;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Wt extends Gt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new jt(this,new Int32Array([0])),this.one=new jt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new h;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new jt(this,n)}}Wt.PDF417_GF=new Wt(Vt.NUMBER_OF_CODEWORDS,3);class Yt{constructor(){this.field=Wt.PDF417_GF}decode(e,t,n){let r=new jt(this.field,e),i=new Int32Array(t),s=!1;for(let f=t;f>0;f--){let e=r.evaluateAt(this.field.exp(f));i[t-f]=e,0!==e&&(s=!0)}if(!s)return 0;let o=this.field.getOne();if(null!=n)for(const f of n){let t=this.field.exp(e.length-1-f),n=new jt(this.field,new Int32Array([this.field.subtract(0,t),1]));o=o.multiply(n)}let a=new jt(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),u=l[0],c=l[1],h=this.findErrorLocations(u),d=this.findErrorMagnitudes(c,u,h);for(let g=0;g<h.length;g++){let t=e.length-1-this.field.log(h[g]);if(t<0)throw f.getChecksumInstance();e[t]=this.field.subtract(e[t],d[g])}return h.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,i=t,s=this.field.getZero(),o=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let e=r,t=s;if(r=i,s=o,r.isZero())throw f.getChecksumInstance();i=e;let n=this.field.getZero(),a=r.getCoefficient(r.getDegree()),l=this.field.inverse(a);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let e=i.getDegree()-r.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),i=i.subtract(r.multiplyByMonomial(e,t))}o=n.multiply(s).subtract(t).negative()}let a=o.getCoefficient(0);if(0===a)throw f.getChecksumInstance();let l=this.field.inverse(a);return[o.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw f.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let l=1;l<=r;l++)i[r-l]=this.field.multiply(l,t.getCoefficient(l));let s=new jt(this.field,i),o=n.length,a=new Int32Array(o);for(let l=0;l<o;l++){let t=this.field.inverse(n[l]),r=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(s.evaluateAt(t));a[l]=this.field.multiply(r,i)}return a}}class Xt{constructor(e,t,n,r,i){e instanceof Xt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const s=null==t||null==n,o=null==r||null==i;if(s&&o)throw new R;s?(t=new ae(0,r.getY()),n=new ae(0,i.getY())):o&&(r=new ae(e.getWidth()-1,t.getY()),i=new ae(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Xt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let o=new ae(t.getX(),i);n?r=o:s=o}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let s=new ae(e.getX(),r);n?i=s:o=s}return new Xt(this.image,r,i,s,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class qt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,i,s,o,a){if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let l,u=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(u||16);break;case"d":l=parseFloat(parseInt(t[n],u||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(i),h=i&&i[0]+""==="0"?"0":" ";for(;l.length<c;)l=void 0!==r?l+h:h+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=Qt.form(e,n)}toString(){return this.buffer}}class Kt{constructor(e){this.boundingBox=new Xt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Kt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Qt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Kt.MAX_NEARBY_DISTANCE=5;class $t{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return Vt.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Zt extends Kt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,l=1,u=0;for(let c=s;c<o;c++){if(null==t[c])continue;let n=t[c],r=n.getRowNumber()-a;if(0===r)u++;else if(1===r)l=Math.max(l,u),u=1,a=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>c)t[c]=null;else{let e;e=l>2?(l-2)*r:r;let i=e>=c;for(let n=1;n<=e&&!i;n++)i=null!=t[c-n];i?t[c]=null:(a=n.getRowNumber(),u=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.getCodewords(),a=-1;for(let l=i;l<s;l++){if(null==o[l])continue;let t=o[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-a;0===n||(1===n?a=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?o[l]=null:a=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new $t,n=new $t,r=new $t,i=new $t;for(let o of e){if(null==o)continue;o.setRowNumberAsRowIndicatorColumn();let e=o.getValue()%30,s=o.getRowNumber();switch(this._isLeft||(s+=2),s%3){case 0:n.setValue(3*e+1);break;case 1:i.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<Vt.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>Vt.MAX_ROWS_IN_BARCODE)return null;let s=new qt(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount())e[n]=null;else switch(this._isLeft||(s+=2),s%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Jt{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Vt.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(i=Jt.adjustRowNumberIfValid(r,i,s),s.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(i=Jt.adjustRowNumberIfValid(r,i,s),s.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let o=new Array(14);o[2]=i[t],o[3]=s[t],t>0&&(o[0]=n[t-1],o[4]=i[t-1],o[5]=s[t-1]),t>1&&(o[8]=n[t-2],o[10]=i[t-2],o[11]=s[t-2]),t<n.length-1&&(o[1]=n[t+1],o[6]=i[t+1],o[7]=s[t+1]),t<n.length-2&&(o[9]=n[t+2],o[12]=i[t+2],o[13]=s[t+2]);for(let a of o)if(Jt.adjustRowNumber(r,a))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Qt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<Vt.SYMBOL_TABLE.length;e++){let t=Vt.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<Vt.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(Vt.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][Vt.BARS_IN_MODULE-r-1]=Math.fround(i/Vt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=se.sum(e),n=new Int32Array(Vt.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<Vt.MODULES_IN_CODEWORD;s++){let o=t/(2*Vt.MODULES_IN_CODEWORD)+s*t/Vt.MODULES_IN_CODEWORD;i+e[r]<=o&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===Vt.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=se.sum(e),n=new Array(Vt.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=oe.MAX_VALUE,i=-1;this.bSymbolTableReady||tn.initialize();for(let s=0;s<tn.RATIOS_TABLE.length;s++){let e=0,t=tn.RATIOS_TABLE[s];for(let i=0;i<Vt.BARS_IN_MODULE;i++){let s=Math.fround(t[i]-n[i]);if(e+=Math.fround(s*s),e>=r)break}e<r&&(r=e,i=Vt.SYMBOL_TABLE[s])}return i}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(Vt.SYMBOL_TABLE.length).map(e=>new Array(Vt.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class sn extends u{}sn.kind="NullPointerException";class on{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new sn;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new m;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class an extends u{}class ln extends on{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new h("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new an;t=v.MAX_VALUE}this.buf=w.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new m;this.ensureCapacity(this.count+n),p.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return w.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function un(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let cn;function hn(e){if("undefined"===typeof cn&&(cn=un()),null===cn)throw new Error("BigInt is not supported!");return cn(e)}function dn(){let e=[];e[0]=hn(1);let t=hn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(q||(q={}));class fn{static decode(e,t){let n=new N(""),r=S.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],o=new nn;for(;i<e[0];){switch(s){case fn.TEXT_COMPACTION_MODE_LATCH:i=fn.textCompaction(e,i,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:i=fn.byteCompaction(s,e,r,i,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:i=fn.numericCompaction(e,i,n);break;case fn.ECI_CHARSET:S.getCharacterSetECIByValue(e[i++]);break;case fn.ECI_GENERAL_PURPOSE:i+=2;break;case fn.ECI_USER_DEFINED:i++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=fn.decodeMacroBlock(e,i,o);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new I;default:i--,i=fn.textCompaction(e,i,n)}if(!(i<e.length))throw I.getFormatInstance();s=e[i++]}if(0===n.length())throw I.getFormatInstance();let a=new K(null,n.toString(),null,t);return a.setOther(o),a}static decodeMacroBlock(e,t,n){if(t+fn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw I.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let o=0;o<fn.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)r[o]=e[t];n.setSegmentIndex(v.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new N;t=fn.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new N;t=fn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new N;t=fn.textCompaction(e,t+1,i),n.setSender(i.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let s=new N;t=fn.textCompaction(e,t+1,s),n.setAddressee(s.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let o=new N;t=fn.numericCompaction(e,t+1,o),n.setSegmentCount(v.parseInt(o.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new N;t=fn.numericCompaction(e,t+1,a),n.setTimestamp(rn.parseLong(a.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new N;t=fn.numericCompaction(e,t+1,l),n.setChecksum(v.parseInt(l.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let u=new N;t=fn.numericCompaction(e,t+1,u),n.setFileSize(rn.parseLong(u.toString()));break;default:throw I.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw I.getFormatInstance()}if(-1!==s){let r=t-s;n.isLastSegment()&&r--,n.setOptionalData(w.copyOfRange(e,s,s+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),s=0,o=!1;for(;t<e[0]&&!o;){let n=e[t++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[s]=n/30,r[s+1]=n%30,s+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[s++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],i[s]=n,s++}}return fn.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=q.ALPHA,s=q.ALPHA,o=0;for(;o<n;){let n=e[o],a="";switch(i){case q.ALPHA:if(n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case fn.LL:i=q.LOWER;break;case fn.ML:i=q.MIXED;break;case fn.PS:s=i,i=q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.LOWER:if(n<26)a=String.fromCharCode(97+n);else switch(n){case 26:a=" ";break;case fn.AS:s=i,i=q.ALPHA_SHIFT;break;case fn.ML:i=q.MIXED;break;case fn.PS:s=i,i=q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.MIXED:if(n<fn.PL)a=fn.MIXED_CHARS[n];else switch(n){case fn.PL:i=q.PUNCT;break;case 26:a=" ";break;case fn.LL:i=q.LOWER;break;case fn.AL:i=q.ALPHA;break;case fn.PS:s=i,i=q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.PUNCT:if(n<fn.PAL)a=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=q.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.ALPHA_SHIFT:if(i=s,n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.PUNCT_SHIFT:if(i=s,n<fn.PAL)a=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=q.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}}""!==a&&r.append(a),o++}}static byteCompaction(e,t,n,r,i){let s=new ln,o=0,a=0,l=!1;switch(e){case fn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!l;)switch(e[o++]=n,a=900*a+n,n=t[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(o%5===0&&o>0){for(let e=0;e<6;++e)s.write(Number(hn(a)>>hn(8*(5-e))));a=0,o=0}}r===t[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(e[o++]=n);for(let t=0;t<o;t++)s.write(e[t]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<fn.TEXT_COMPACTION_MODE_LATCH)o++,a=900*a+e;else switch(e){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(o%5===0&&o>0){for(let e=0;e<6;++e)s.write(Number(hn(a)>>hn(8*(5-e))));a=0,o=0}}}return i.append(T.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let o=e[t++];if(t===e[0]&&(i=!0),o<fn.TEXT_COMPACTION_MODE_LATCH)s[r]=o,r++;else switch(o){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%fn.MAX_NUMERIC_CODEWORDS===0||o===fn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(fn.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=hn(0);for(let i=0;i<t;i++)n+=fn.EXP900[t-i-1]*hn(e[i]);let r=n.toString();if("1"!==r.charAt(0))throw new I;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=un()?dn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class gn{constructor(){}static decode(e,t,n,r,i,s,o){let a,l=new Xt(e,t,n,r,i),u=null,c=null;for(let f=!0;;f=!1){if(null!=t&&(u=gn.getRowIndicatorColumn(e,l,t,!0,s,o)),null!=r&&(c=gn.getRowIndicatorColumn(e,l,r,!1,s,o)),a=gn.merge(u,c),null==a)throw R.getNotFoundInstance();let n=a.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}a.setBoundingBox(l);let h=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,u),a.setDetectionResultColumn(h,c);let d=null!=u;for(let f=1;f<=h;f++){let t,n=d?f:h-f;if(void 0!==a.getDetectionResultColumn(n))continue;t=0===n||n===h?new Zt(l,0===n):new Kt(l),a.setDetectionResultColumn(n,t);let r=-1,i=r;for(let u=l.getMinY();u<=l.getMaxY();u++){if(r=gn.getStartColumn(a,n,u,d),r<0||r>l.getMaxX()){if(-1===i)continue;r=i}let c=gn.detectCodeword(e,l.getMinX(),l.getMaxX(),d,r,u,s,o);null!=c&&(t.setCodeword(u,c),i=r,s=Math.min(s,c.getWidth()),o=Math.max(o,c.getWidth()))}}return gn.createDecoderResult(a)}static merge(e,t){if(null==e&&null==t)return null;let n=gn.getBarcodeMetadata(e,t);if(null==n)return null;let r=Xt.merge(gn.adjustBoundingBox(e),gn.adjustBoundingBox(t));return new Jt(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=gn.getMax(t),r=0;for(let o of t)if(r+=n-o,o>0)break;let i=e.getCodewords();for(let o=0;r>0&&null==i[o];o++)r--;let s=0;for(let o=t.length-1;o>=0&&(s+=n-t[o],!(t[o]>0));o--);for(let o=i.length-1;s>0&&null==i[o];o--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let o=new Zt(t,r);for(let a=0;a<2;a++){let l=0===a?1:-1,u=Math.trunc(Math.trunc(n.getX()));for(let a=Math.trunc(Math.trunc(n.getY()));a<=t.getMaxY()&&a>=t.getMinY();a+=l){let t=gn.detectCodeword(e,0,e.getWidth(),r,u,a,i,s);null!=t&&(o.setCodeword(a,t),u=r?t.getStartX():t.getEndX())}}return o}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-gn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>Vt.MAX_CODEWORDS_IN_BARCODE)throw R.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=gn.createBarcodeMatrix(e);gn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let o=0;o<e.getBarcodeColumnCount();o++){let l=t[a][o+1].getValue(),u=a*e.getBarcodeColumnCount()+o;0===l.length?n.push(u):1===l.length?r[u]=l[0]:(s.push(u),i.push(l))}let o=new Array(i.length);for(let a=0;a<o.length;a++)o[a]=i[a];return gn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,Vt.toIntArray(n),Vt.toIntArray(s),o)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),o=100;for(;o-- >0;){for(let e=0;e<s.length;e++)t[r[e]]=i[e][s[e]];try{return gn.decodeCodewords(t,e,n)}catch(a){if(!(a instanceof f))throw a}if(0===s.length)throw f.getChecksumInstance();for(let e=0;e<s.length;e++){if(s[e]<i[e].length-1){s[e]++;break}if(s[e]=0,e===s.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new $t;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(gn.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=s)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=s)return r?s.getStartX():s.getEndX();if(gn.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=s)return r?s.getEndX():s.getStartX();let o=0;for(;gn.isValidBarcodeColumn(e,t-i);){t-=i;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*o*(n.getEndX()-n.getStartX());o++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,o,a){i=gn.adjustCodewordStartColumn(e,t,n,r,i,s);let l,u=gn.getModuleBitCount(e,t,n,r,i,s);if(null==u)return null;let c=se.sum(u);if(r)l=i+c;else{for(let e=0;e<u.length/2;e++){let t=u[e];u[e]=u[u.length-1-e],u[u.length-1-e]=t}l=i,i=l-c}if(!gn.checkCodewordSkew(c,o,a))return null;let h=tn.getDecodedValue(u),d=Vt.getCodeword(h);return-1===d?null:new en(i,l,gn.getCodewordBucketNumber(h),d)}static getModuleBitCount(e,t,n,r,i,s){let o=i,a=new Int32Array(8),l=0,u=r?1:-1,c=r;for(;(r?o<n:o>=t)&&l<a.length;)e.get(o,s)===c?(a[l]++,o+=u):(l++,c=!c);return l===a.length||o===(r?n:t)&&l===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let o=i,a=r?-1:1;for(let l=0;l<2;l++){for(;(r?o>=t:o<n)&&r===e.get(o,s);){if(Math.abs(i-o)>gn.CODEWORD_SKEW_SIZE)return i;o+=a}a=-a,r=!r}return o}static checkCodewordSkew(e,t,n){return t-gn.CODEWORD_SKEW_SIZE<=e&&e<=n+gn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw I.getFormatInstance();let r=1<<t+1,i=gn.correctErrors(e,n,r);gn.verifyCodewordCount(e,r);let s=fn.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+gn.MAX_ERRORS||n<0||n>gn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return gn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw I.getFormatInstance();let n=e[0];if(n>e.length)throw I.getFormatInstance();if(0===n){if(!(t<e.length))throw I.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return gn.getCodewordBucketNumber(gn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Qt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}gn.CODEWORD_SKEW_SIZE=2,gn.MAX_ERRORS=3,gn.MAX_EC_CODEWORDS=512,gn.errorCorrection=new Yt;class pn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=pn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw R.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return pn.decode(e,t,!0)}catch(n){if(n instanceof I||n instanceof f)throw R.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,i=Ht.detectMultiple(e,t,n);for(const s of i.getPoints()){const e=gn.decode(i.getBits(),s[4],s[5],s[6],s[7],pn.getMinCodewordWidth(s),pn.getMaxCodewordWidth(s)),t=new V(e.getText(),e.getRawBytes(),void 0,s,H.PDF_417);t.putMetadata(Q.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(Q.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?v.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(pn.getMaxWidth(e[0],e[4]),pn.getMaxWidth(e[6],e[2])*Vt.MODULES_IN_CODEWORD/Vt.MODULES_IN_STOP_PATTERN),Math.max(pn.getMaxWidth(e[1],e[5]),pn.getMaxWidth(e[7],e[3])*Vt.MODULES_IN_CODEWORD/Vt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(pn.getMinWidth(e[0],e[4]),pn.getMinWidth(e[6],e[2])*Vt.MODULES_IN_CODEWORD/Vt.MODULES_IN_STOP_PATTERN),Math.min(pn.getMinWidth(e[1],e[5]),pn.getMinWidth(e[7],e[3])*Vt.MODULES_IN_CODEWORD/Vt.MODULES_IN_STOP_PATTERN)))}reset(){}}class mn extends u{}mn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(C.TRY_HARDER),r=t(e)?null:e.get(C.POSSIBLE_FORMATS),i=new Array;if(!t(r)){const t=r.some(e=>e===H.UPC_A||e===H.UPC_E||e===H.EAN_13||e===H.EAN_8||e===H.CODABAR||e===H.CODE_39||e===H.CODE_93||e===H.CODE_128||e===H.ITF||e===H.RSS_14||e===H.RSS_EXPANDED);t&&!n&&i.push(new lt(e,this.verbose)),r.includes(H.QR_CODE)&&i.push(new Ut),r.includes(H.DATA_MATRIX)&&i.push(new vt),r.includes(H.AZTEC)&&i.push(new ye),r.includes(H.PDF_417)&&i.push(new pn),t&&n&&i.push(new lt(e,this.verbose))}0===i.length&&(n||i.push(new lt(e,this.verbose)),i.push(new Ut),i.push(new vt),i.push(new ye),i.push(new pn),n&&i.push(new lt(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new mn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof mn)continue}throw new R("No MultiFormat Readers were able to detect the code.")}}class wn extends U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class vn extends U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new pn,e)}}class En extends U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Ut,e)}}var _n;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(_n||(_n={}));var Cn=_n;class In{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Z(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const e=n.multiply(new Z(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new h("No error correction bytes");const n=e.length-t;if(n<=0)throw new h("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);p.arraycopy(e,0,i,0,n);let s=new Z(this.field,i);s=s.multiplyByMonomial(t,1);const o=s.divide(r)[1].getCoefficients(),a=t-o.length;for(let l=0;l<a;l++)e[n+l]=0;p.arraycopy(o,0,e,n+a,o.length)}}class Sn{constructor(){}static applyMaskPenaltyRule1(e){return Sn.applyMaskPenaltyRule1Internal(e,!0)+Sn.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){const e=n[s];for(let i=0;i<r-1;i++){const r=e[i];r===e[i+1]&&r===n[s+1][i]&&r===n[s+1][i+1]&&t++}}return Sn.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let e=0;e<r;e++){const o=n[s];e+6<r&&1===o[e]&&0===o[e+1]&&1===o[e+2]&&1===o[e+3]&&1===o[e+4]&&0===o[e+5]&&1===o[e+6]&&(Sn.isWhiteHorizontal(o,e-4,e)||Sn.isWhiteHorizontal(o,e+7,e+11))&&t++,s+6<i&&1===n[s][e]&&0===n[s+1][e]&&1===n[s+2][e]&&1===n[s+3][e]&&1===n[s+4][e]&&0===n[s+5][e]&&1===n[s+6][e]&&(Sn.isWhiteVertical(n,e,s-4,s)||Sn.isWhiteVertical(n,e,s+7,s+11))&&t++}return t*Sn.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++){const e=n[o];for(let n=0;n<r;n++)1===e[n]&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-s)/s)*Sn.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(1&i)+i%3;break;case 6:i=n*t,r=(1&i)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new h("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let o=0;o<r;o++){let e=0,r=-1;for(let a=0;a<i;a++){const i=t?s[o][a]:s[a][o];i===r?e++:(e>=5&&(n+=Sn.N1+(e-5)),e=1,r=i)}e>=5&&(n+=Sn.N1+(e-5))}return n}}Sn.N1=3,Sn.N2=3,Sn.N3=40,Sn.N4=10;class An{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)w.fill(t,e)}equals(e){if(!(e instanceof An))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new N;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class Tn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new N;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Tn.NUM_MASK_PATTERNS}}Tn.NUM_MASK_PATTERNS=8;class bn extends u{}bn.kind="WriterException";class Nn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){Nn.clearMatrix(i),Nn.embedBasicPatterns(n,i),Nn.embedTypeInfo(t,r,i),Nn.maybeEmbedVersionInfo(n,i),Nn.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){Nn.embedPositionDetectionPatternsAndSeparators(t),Nn.embedDarkDotAtLeftBottomCorner(t),Nn.maybeEmbedPositionAdjustmentPatterns(e,t),Nn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new E;Nn.makeTypeInfoBits(e,t,r);for(let i=0,s=r.getSize();i<s;++i){const e=r.get(r.getSize()-1-i),t=Nn.TYPE_INFO_COORDINATES[i],s=t[0],o=t[1];if(n.setBoolean(s,o,e),i<8){const t=n.getWidth()-i-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(i-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new E;Nn.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const s=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+e,s),t.setBoolean(t.getHeight()-11+e,i,s)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,o=n.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);o>=0&&o<n.getHeight();){for(let i=0;i<2;++i){const a=s-i;if(!Nn.isEmpty(n.get(a,o)))continue;let l;r<e.getSize()?(l=e.get(r),++r):l=!1,255!==t&&Sn.getDataMaskBit(t,a,o)&&(l=!l),n.setBoolean(a,o,l)}o+=i}i=-i,o+=i,s-=2}if(r!==e.getSize())throw new bn("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-v.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new h("0 polynomial");const n=Nn.findMSBSet(t);for(e<<=n-1;Nn.findMSBSet(e)>=n;)e^=t<<Nn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Tn.isValidMaskPattern(t))throw new bn("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=Nn.calculateBCHCode(r,Nn.TYPE_INFO_POLY);n.appendBits(i,10);const s=new E;if(s.appendBits(Nn.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new bn("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=Nn.calculateBCHCode(e.getVersionNumber(),Nn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new bn("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;Nn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),Nn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new bn;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!Nn.isEmpty(n.get(e+r,t)))throw new bn;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!Nn.isEmpty(n.get(e,t+r)))throw new bn;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=Nn.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=Nn.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Nn.POSITION_DETECTION_PATTERN[0].length;Nn.embedPositionDetectionPattern(0,0,e),Nn.embedPositionDetectionPattern(e.getWidth()-t,0,e),Nn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;Nn.embedHorizontalSeparationPattern(0,n-1,e),Nn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Nn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;Nn.embedVerticalSeparationPattern(r,0,e),Nn.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),Nn.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=Nn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,s=r.length;i!==s;i++){const e=r[i];if(e>=0)for(let n=0;n!==s;n++){const i=r[n];i>=0&&Nn.isEmpty(t.get(i,e))&&Nn.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}Nn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Nn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Nn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Nn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Nn.VERSION_INFO_POLY=7973,Nn.TYPE_INFO_POLY=1335,Nn.TYPE_INFO_MASK_PATTERN=21522;class Dn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Rn{constructor(){}static calculateMaskPenalty(e){return Sn.applyMaskPenaltyRule1(e)+Sn.applyMaskPenaltyRule2(e)+Sn.applyMaskPenaltyRule3(e)+Sn.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Rn.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(Cn.CHARACTER_SET);i&&(r=n.get(Cn.CHARACTER_SET).toString());const s=this.chooseMode(e,r),o=new E;if(s===Dt.BYTE&&(i||Rn.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=S.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,o)}this.appendModeInfo(s,o);const a=new E;let l;if(this.appendBytes(e,s,a,r),null!==n&&void 0!==n.get(Cn.QR_VERSION)){const e=Number.parseInt(n.get(Cn.QR_VERSION).toString(),10);l=At.getVersionForNumber(e);const r=this.calculateBitsNeeded(s,o,a,l);if(!this.willFit(r,l,t))throw new bn("Data too big for requested version")}else l=this.recommendVersion(t,s,o,a);const u=new E;u.appendBitArray(o);const c=s===Dt.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(c,l,s,u),u.appendBitArray(a);const h=l.getECBlocksForLevel(t),d=l.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,u);const f=this.interleaveWithECBytes(u,l.getTotalCodewords(),d,h.getNumBlocks()),g=new Tn;g.setECLevel(t),g.setMode(s),g.setVersion(l);const p=l.getDimensionForVersion(),m=new An(p,p),y=this.chooseMaskPattern(f,t,l,m);return g.setMaskPattern(y),Nn.buildMatrix(f,t,l,y,m),g.setMatrix(m),g}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,At.getVersionForNumber(1)),s=this.chooseVersion(i,e),o=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(o,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Rn.ALPHANUMERIC_TABLE.length?Rn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(S.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Dt.KANJI;let n=!1,r=!1;for(let i=0,s=e.length;i<s;++i){const t=e.charAt(i);if(Rn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return Dt.BYTE;r=!0}}return r?Dt.ALPHANUMERIC:n?Dt.NUMERIC:Dt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=T.encode(e,S.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let o=0;o<Tn.NUM_MASK_PATTERNS;o++){Nn.buildMatrix(e,t,n,o,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,s=o)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=At.getVersionForNumber(n);if(Rn.willFit(e,r,t))return r}throw new bn("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new bn("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits(0===(1&s)?236:17,8);if(t.getSize()!==n)throw new bn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new bn("Block ID too large");const o=e%n,a=n-o,l=Math.floor(e/n),u=l+1,c=Math.floor(t/n),h=c+1,d=l-c,f=u-h;if(d!==f)throw new bn("EC bytes mismatch");if(n!==a+o)throw new bn("RS blocks mismatch");if(e!==(c+d)*a+(h+f)*o)throw new bn("Total bytes mismatch");r<a?(i[0]=c,s[0]=d):(i[0]=h,s[0]=f)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new bn("Number of bits and data bytes does not match");let i=0,s=0,o=0;const a=new Array;for(let u=0;u<r;++u){const l=new Int32Array(1),c=new Int32Array(1);Rn.getNumDataBytesAndNumECBytesForBlockID(t,n,r,u,l,c);const h=l[0],d=new Uint8Array(h);e.toBytes(8*i,d,0,h);const f=Rn.generateECBytes(d,c[0]);a.push(new Dn(d,f)),s=Math.max(s,h),o=Math.max(o,f.length),i+=l[0]}if(n!==i)throw new bn("Data bytes does not match offset");const l=new E;for(let u=0;u<s;++u)for(const e of a){const t=e.getDataBytes();u<t.length&&l.appendBits(t[u],8)}for(let u=0;u<o;++u)for(const e of a){const t=e.getErrorCorrectionBytes();u<t.length&&l.appendBits(t[u],8)}if(t!==l.getSizeInBytes())throw new bn("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=255&e[s];new In(ee.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=r[n+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new bn(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case Dt.NUMERIC:Rn.appendNumericBytes(e,n);break;case Dt.ALPHANUMERIC:Rn.appendAlphanumericBytes(e,n);break;case Dt.BYTE:Rn.append8BitBytes(e,n,r);break;case Dt.KANJI:Rn.appendKanjiBytes(e,n);break;default:throw new bn("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Rn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Rn.getDigit(e.charAt(r));if(r+2<n){const n=Rn.getDigit(e.charAt(r+1)),s=Rn.getDigit(e.charAt(r+2));t.appendBits(100*i+10*n+s,10),r+=3}else if(r+1<n){const n=Rn.getDigit(e.charAt(r+1));t.appendBits(10*i+n,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Rn.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new bn;if(r+1<n){const n=Rn.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new bn;t.appendBits(45*i+n,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=T.encode(e,n)}catch(i){throw new bn(i)}for(let s=0,o=r.length;s!==o;s++){const e=r[s];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=T.encode(e,S.SJIS)}catch(i){throw new bn(i)}const r=n.length;for(let s=0;s<r;s+=2){const e=(255&n[s])<<8&4294967295|255&n[s+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new bn("Invalid byte sequence");const i=192*(r>>8)+(255&r);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(Dt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Rn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Rn.DEFAULT_BYTE_MODE_ENCODING=S.UTF8.getName();class Mn{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new h("Found empty contents");if(t<0||n<0)throw new h("Requested dimensions are too small: "+t+"x"+n);let i=_t.L,s=Mn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(Cn.ERROR_CORRECTION)&&(i=_t.fromString(r.get(Cn.ERROR_CORRECTION).toString())),void 0!==r.get(Cn.MARGIN)&&(s=Number.parseInt(r.get(Cn.MARGIN).toString(),10)));const o=Rn.encode(e,i,r);return this.renderResult(o,t,n,s)}writeToDom(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const s=this.write(t,n,r,i);e&&e.appendChild(s)}renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const s=i.getWidth(),o=i.getHeight(),a=s+2*r,l=o+2*r,u=Math.max(t,a),c=Math.max(n,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-s*h)/2),f=Math.floor((c-o*h)/2),g=this.createSVGElement(u,c);for(let p=0,m=f;p<o;p++,m+=h)for(let e=0,t=d;e<s;e++,t+=h)if(1===i.get(e,p)){const e=this.createSvgRectElement(t,m,h,h);g.appendChild(e)}return g}createSVGElement(e,t){const n=document.createElementNS(Mn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Mn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Mn.QUIET_ZONE_SIZE=4,Mn.SVG_NS="http://www.w3.org/2000/svg";class On{encode(e,t,n,r,i){if(0===e.length)throw new h("Found empty contents");if(t!==H.QR_CODE)throw new h("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new h(`Requested dimensions are too small: ${n}x${r}`);let s=_t.L,o=On.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(Cn.ERROR_CORRECTION)&&(s=_t.fromString(i.get(Cn.ERROR_CORRECTION).toString())),void 0!==i.get(Cn.MARGIN)&&(o=Number.parseInt(i.get(Cn.MARGIN).toString(),10)));const a=Rn.encode(e,s,i);return On.renderResult(a,n,r,o)}static renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const s=i.getWidth(),o=i.getHeight(),a=s+2*r,l=o+2*r,u=Math.max(t,a),c=Math.max(n,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-s*h)/2),f=Math.floor((c-o*h)/2),g=new D(u,c);for(let p=0,m=f;p<o;p++,m+=h)for(let e=0,t=d;e<s;e++,t+=h)1===i.get(e,p)&&g.setRegion(t,m,h,h);return g}}On.QUIET_ZONE_SIZE=4;class kn{encode(e,t,n,r,i){let s;if(t!==H.QR_CODE)throw new h("No encoder available for format "+t);return s=new On,s.encode(e,t,n,r,i)}}class Pn extends k{constructor(e,t,n,r,i,s,o,a){if(super(s,o),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+s>t||i+o>n)throw new h("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(s,o)}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return p.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return p.arraycopy(this.yuvData,i,r,0,n),r;for(let s=0;s<t;s++){const t=s*e;p.arraycopy(this.yuvData,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Pn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/Pn.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Pn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const t=s*e;for(let s=0;s<e;s++){const e=255&r[i+s*Pn.THUMBNAIL_SCALE_FACTOR];n[t+s]=4278190080|65793*e}i+=this.dataWidth*Pn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Pn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const t=i+e/2;for(let r=i,s=i+e-1;r<t;r++,s--){const e=n[r];n[r]=n[s],n[s]=e}}}invert(){return new P(this)}}Pn.THUMBNAIL_SCALE_FACTOR=2;class Ln extends k{constructor(e,t,n,r,i,s,o){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=o,4===e.BYTES_PER_ELEMENT){const r=t*n,i=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,s=n>>7&510,o=255&n;i[t]=(r+s+o)/4&255}this.luminances=i}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===s&&(this.left=0),void 0===o&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return p.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return p.arraycopy(this.luminances,i,r,0,n),r;for(let s=0;s<t;s++){const t=s*e;p.arraycopy(this.luminances,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ln(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new P(this)}}class xn extends S{static forName(e){return this.getCharacterSetECIByName(e)}}class Bn{}Bn.ISO_8859_1=S.ISO8859_1;class Fn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Un{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Vn{constructor(e){this.previous=e}getPrevious(){return this.previous}}class zn extends Vn{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new zn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new zn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+v.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hn extends zn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Hn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jn(e,t,n){return new Hn(e,t,n)}function Gn(e,t,n){return new zn(e,t,n)}const Wn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Yn=0,Xn=1,qn=2,Qn=3,Kn=4,$n=new zn(null,0,0),Zn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Jn(e){for(let t of e)w.fill(t,-1);return e[Yn][Kn]=0,e[Xn][Kn]=0,e[Xn][Yn]=28,e[Qn][Kn]=0,e[qn][Kn]=0,e[qn][Yn]=15,e}const er=Jn(w.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=Zn[this.mode][e];r=Gn(r,65535&t,t>>16),n+=t>>16}let i=e===qn?4:5;return r=Gn(r,t,i),new tr(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===qn?4:5;return n=Gn(n,er[this.mode][e],r),n=Gn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Kn||this.mode===qn){let e=Zn[n][Yn];t=Gn(t,65535&e,e>>16),r+=e>>16,n=Yn}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new tr(t,n,this.binaryShiftByteCount+1,r+i);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=jn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Zn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new E;for(const r of t)r.appendTo(n,e);return n}toString(){return b.format("%s bits=%d bytes=%d",Wn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=b.getCharCode(" "),n=b.getCharCode("."),r=b.getCharCode(",");e[Yn][t]=1;const i=b.getCharCode("Z"),s=b.getCharCode("A");for(let d=s;d<=i;d++)e[Yn][d]=d-s+2;e[Xn][t]=1;const o=b.getCharCode("z"),a=b.getCharCode("a");for(let d=a;d<=o;d++)e[Xn][d]=d-a+2;e[qn][t]=1;const l=b.getCharCode("9"),u=b.getCharCode("0");for(let d=u;d<=l;d++)e[qn][d]=d-u+2;e[qn][r]=12,e[qn][n]=13;const c=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let d=0;d<c.length;d++)e[Qn][b.getCharCode(c[d])]=d;const h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let d=0;d<h.length;d++)b.getCharCode(h[d])>0&&(e[Kn][b.getCharCode(h[d])]=d);return e}tr.INITIAL_STATE=new tr($n,Yn,0,0);const rr=nr(w.createInt32Array(5,256));class ir{constructor(e){this.text=e}encode(){const e=b.getCharCode(" "),t=b.getCharCode("\n");let n=Un.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,s=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case b.getCharCode("\r"):i=s===t?2:0;break;case b.getCharCode("."):i=s===e?3:0;break;case b.getCharCode(","):i=s===e?4:0;break;case b.getCharCode(":"):i=s===e?5:0;break;default:i=0}i>0?(n=ir.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}return Un.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ir.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=rr[e.getMode()][r]>0,s=null;for(let o=0;o<=Kn;o++){let a=rr[o][r];if(a>0){if(null==s&&(s=e.endBinaryShift(t)),!i||o===e.getMode()||o===qn){const e=s.latchAndAppend(o,a);n.push(e)}if(!i&&er[e.getMode()][o]>=0){const e=s.shiftAndAppend(o,a);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Kn,n)),e.getMode()!==Kn&&r.push(i.shiftAndAppend(Kn,n)),3===n||4===n){let e=i.latchAndAppend(qn,16-n).latchAndAppend(qn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class sr{constructor(){}static encodeBytes(e){return sr.encode(e,sr.DEFAULT_EC_PERCENT,sr.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,i,s,o,a,l=new ir(e).encode(),u=v.truncDivision(l.getSize()*t,100)+11,c=l.getSize()+u;if(n!==sr.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?sr.MAX_NB_BITS_COMPACT:sr.MAX_NB_BITS))throw new h(b.format("Illegal value %s for layers",n));s=sr.totalBitsInLayer(i,r),o=sr.WORD_SIZE[i];let e=s-s%o;if(a=sr.stuffBits(l,o),a.getSize()+u>e)throw new h("Data to large for user specified layer");if(r&&a.getSize()>64*o)throw new h("Data to large for user specified layer")}else{o=0,a=null;for(let e=0;;e++){if(e>sr.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(r=e<=3,i=r?e+1:e,s=sr.totalBitsInLayer(i,r),c>s)continue;null!=a&&o===sr.WORD_SIZE[i]||(o=sr.WORD_SIZE[i],a=sr.stuffBits(l,o));let t=s-s%o;if(!(r&&a.getSize()>64*o)&&a.getSize()+u<=t)break}}let d,f=sr.generateCheckWords(a,s,o),g=a.getSize()/o,p=sr.generateModeMessage(r,i,g),m=(r?11:14)+4*i,y=new Int32Array(m);if(r){d=m;for(let e=0;e<y.length;e++)y[e]=e}else{d=m+1+2*v.truncDivision(v.truncDivision(m,2)-1,15);let e=v.truncDivision(m,2),t=v.truncDivision(d,2);for(let n=0;n<e;n++){let r=n+v.truncDivision(n,15);y[e-n-1]=t-r-1,y[e+n]=t+r+1}}let w=new D(d);for(let h=0,v=0;h<i;h++){let e=4*(i-h)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)f.get(v+n+r)&&w.set(y[2*h+r],y[2*h+t]),f.get(v+2*e+n+r)&&w.set(y[2*h+t],y[m-1-2*h-r]),f.get(v+4*e+n+r)&&w.set(y[m-1-2*h-r],y[m-1-2*h-t]),f.get(v+6*e+n+r)&&w.set(y[m-1-2*h-t],y[2*h+r])}v+=8*e}if(sr.drawModeMessage(w,r,d,p),r)sr.drawBullsEye(w,v.truncDivision(d,2),5);else{sr.drawBullsEye(w,v.truncDivision(d,2),7);for(let e=0,t=0;e<v.truncDivision(m,2)-1;e+=15,t+=16)for(let n=1&v.truncDivision(d,2);n<d;n+=2)w.set(v.truncDivision(d,2)-t,n),w.set(v.truncDivision(d,2)+t,n),w.set(n,v.truncDivision(d,2)-t),w.set(n,v.truncDivision(d,2)+t)}let E=new Fn;return E.setCompact(r),E.setSize(d),E.setLayers(i),E.setCodeWords(g),E.setMatrix(w),E}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new E;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=sr.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=sr.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=v.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let t=i-3+s;r.get(s)&&e.set(t,i-5),r.get(s+7)&&e.set(i+5,t),r.get(20-s)&&e.set(t,i+5),r.get(27-s)&&e.set(i-5,t)}else for(let s=0;s<10;s++){let t=i-5+s+v.truncDivision(s,5);r.get(s)&&e.set(t,i-7),r.get(s+10)&&e.set(i+7,t),r.get(29-s)&&e.set(t,i+7),r.get(39-s)&&e.set(i-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new In(sr.getGF(n)),s=v.truncDivision(t,n),o=sr.bitsToWords(e,n,s);i.encode(o,s-r);let a=t%n,l=new E;l.appendBits(0,a);for(const u of Array.from(o))l.appendBits(u,n);return l}static bitsToWords(e,t,n){let r,i,s=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){let n=0;for(let i=0;i<t;i++)n|=e.get(r*t+i)?1<<t-i-1:0;s[r]=n}return s}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new h("Unsupported word size "+e)}}static stuffBits(e,t){let n=new E,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let o=0;for(let n=0;n<t;n++)(s+n>=r||e.get(s+n))&&(o|=1<<t-1-n);(o&i)===i?(n.appendBits(o&i,t),s--):0===(o&i)?(n.appendBits(1|o,t),s--):n.appendBits(o,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}sr.DEFAULT_EC_PERCENT=33,sr.DEFAULT_AZTEC_LAYERS=0,sr.MAX_NB_BITS=32,sr.MAX_NB_BITS_COMPACT=4,sr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class or{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=Bn.ISO_8859_1,o=sr.DEFAULT_EC_PERCENT,a=sr.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(Cn.CHARACTER_SET)&&(s=xn.forName(i.get(Cn.CHARACTER_SET).toString())),i.has(Cn.ERROR_CORRECTION)&&(o=v.parseInt(i.get(Cn.ERROR_CORRECTION).toString())),i.has(Cn.AZTEC_LAYERS)&&(a=v.parseInt(i.get(Cn.AZTEC_LAYERS).toString()))),or.encodeLayers(e,t,n,r,s,o,a)}static encodeLayers(e,t,n,r,i,s,o){if(t!==H.AZTEC)throw new h("Can only encode AZTEC, but got "+t);let a=sr.encode(b.getBytes(e,i),s,o);return or.renderResult(a,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let i=r.getWidth(),s=r.getHeight(),o=Math.max(t,i),a=Math.max(n,s),l=Math.min(o/i,a/s),u=(o-i*l)/2,c=(a-s*l)/2,h=new D(o,a);for(let d=0,f=c;d<s;d++,f+=l)for(let e=0,t=u;e<i;e++,t+=l)r.get(e,d)&&h.setRegion(t,f,l,l);return h}}e.AbstractExpandedDecoder=We,e.ArgumentException=c,e.ArithmeticException=J,e.AztecCode=Fn,e.AztecCodeReader=ye,e.AztecCodeWriter=or,e.AztecDecoder=ie,e.AztecDetector=me,e.AztecDetectorResult=ue,e.AztecEncoder=sr,e.AztecHighLevelEncoder=ir,e.AztecPoint=pe,e.BarcodeFormat=H,e.Binarizer=g,e.BinaryBitmap=d,e.BitArray=E,e.BitMatrix=D,e.BitSource=pt,e.BrowserAztecCodeReader=we,e.BrowserBarcodeReader=ut,e.BrowserCodeReader=U,e.BrowserDatamatrixCodeReader=Et,e.BrowserMultiFormatReader=wn,e.BrowserPDF417Reader=vn,e.BrowserQRCodeReader=En,e.BrowserQRCodeSvgWriter=Mn,e.CharacterSetECI=S,e.ChecksumException=f,e.Code128Reader=Ee,e.Code39Reader=_e,e.DataMatrixDecodedBitStreamParser=mt,e.DataMatrixReader=vt,e.DecodeHintType=C,e.DecoderResult=K,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=Ne,e.EncodeHintType=Cn,e.Exception=u,e.FormatException=I,e.GenericGF=ee,e.GenericGFPoly=Z,e.GlobalHistogramBinarizer=M,e.GridSampler=he,e.GridSamplerInstance=ge,e.HTMLCanvasElementLuminanceSource=L,e.HybridBinarizer=O,e.ITFReader=Ce,e.IllegalArgumentException=h,e.IllegalStateException=ne,e.InvertedLuminanceSource=P,e.LuminanceSource=k,e.MathUtils=se,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=kn,e.NotFoundException=R,e.OneDReader=ve,e.PDF417DecodedBitStreamParser=fn,e.PDF417DecoderErrorCorrection=Yt,e.PDF417Reader=pn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=de,e.PlanarYUVLuminanceSource=Pn,e.QRCodeByteMatrix=An,e.QRCodeDataMask=Tt,e.QRCodeDecodedBitStreamParser=Rt,e.QRCodeDecoderErrorCorrectionLevel=_t,e.QRCodeDecoderFormatInformation=Ct,e.QRCodeEncoder=Rn,e.QRCodeEncoderQRCode=Tn,e.QRCodeMaskUtil=Sn,e.QRCodeMatrixUtil=Nn,e.QRCodeMode=Dt,e.QRCodeReader=Ut,e.QRCodeVersion=At,e.QRCodeWriter=On,e.RGBLuminanceSource=Ln,e.RSS14Reader=at,e.RSSExpandedReader=st,e.ReaderException=mn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=In,e.ReedSolomonException=te,e.Result=V,e.ResultMetadataType=Q,e.ResultPoint=ae,e.StringUtils=b,e.UnsupportedOperationException=A,e.VideoInputDevice=x,e.WhiteRectangleDetector=ce,e.WriterException=bn,e.ZXingArrays=w,e.ZXingCharset=xn,e.ZXingInteger=v,e.ZXingStandardCharsets=Bn,e.ZXingStringBuilder=N,e.ZXingStringEncoding=T,e.ZXingSystem=p,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function w(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=y.prototype;var E=v.prototype=new w;E.constructor=v,p(E,y.prototype),E.isPureReactComponent=!0;var _=Array.isArray,C=Object.prototype.hasOwnProperty,I={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)C.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var b=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function D(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+N(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(b,"$&/")+"/"),D(o,t,i,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(b,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var u=0;u<e.length;u++){var c=s+N(a=e[u],u);l+=D(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=D(a=a.value,t,i,c=s+N(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",function(e){return t.call(n,e,i++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},k={transition:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:k,ReactCurrentOwner:I};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=v,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)C.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,g=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(m=!1,E(e),!p)if(null!==r(u))p=!0,k(C);else{var t=r(c);null!==t&&P(_,t.startTime-e)}}function C(e,n){p=!1,m&&(m=!1,w(T),T=-1),g=!0;var s=f;try{for(E(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!D());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),E(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&P(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,S=!1,A=null,T=-1,b=5,N=-1;function D(){return!(t.unstable_now()-N<b)}function R(){if(null!==A){var e=t.unstable_now();N=e;var n=!0;try{n=A(!0,e)}finally{n?I():(S=!1,A=null)}}else S=!1}if("function"===typeof v)I=function(){v(R)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,O=M.port2;M.port1.onmessage=R,I=function(){O.postMessage(null)}}else I=function(){y(R,0)};function k(e){A=e,S||(S=!0,I())}function P(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,k(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(w(T),T=-1):m=!0,P(_,s-o))):(e.sortIndex=a,n(u,e),p||g||(p=!0,k(C))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function p(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function v(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(g,e)||!h.call(f,e)&&(d.test(e)?g[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,w);m[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,w);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,w);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),C=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),b=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var x,B=Object.assign;function F(e){if(void 0===x)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);x=t&&t[1]||""}return"\n"+x+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case C:return"Portal";case A:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case b:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){$(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){ge.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Se=null;function Ae(e){if(e=vi(e)){if("function"!==typeof Ce)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ce(e.stateNode,e.type,t))}}function Te(e){Ie?Se?Se.push(e):Se=[e]:Ie=e}function be(){if(Ie){var e=Ie,t=Se;if(Se=Ie=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ne(e,t){return e(t)}function De(){}var Re=!1;function Me(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ne(e,t,n)}finally{Re=!1,(null!==Ie||null!==Se)&&(De(),be())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var ke=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){ke=!1}function Le(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var xe=!1,Be=null,Fe=!1,Ue=null,Ve={onError:function(e){xe=!0,Be=e}};function ze(e,t,n,r,i,s,o,a,l){xe=!1,Be=null,Le.apply(Ve,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(He(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ke=i.unstable_requestPaint,$e=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function wt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Ct,It,St,At,Tt=!1,bt=[],Nt=null,Dt=null,Rt=null,Mt=new Map,Ot=new Map,kt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function xt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=wi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=je(n)))return e.blockedOn=t,void At(e.priority,function(){It(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ee=r,n.target.dispatchEvent(r),Ee=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Tt=!1,null!==Nt&&Ft(Nt)&&(Nt=null),null!==Dt&&Ft(Dt)&&(Dt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Mt.forEach(Ut),Ot.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Ht(e){function t(t){return zt(t,e)}if(0<bt.length){zt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&zt(Nt,e),null!==Dt&&zt(Dt,e),null!==Rt&&zt(Rt,e),Mt.forEach(t),Ot.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Bt(n),null===n.blockedOn&&kt.shift()}var jt=E.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=vt,s=jt.transition;jt.transition=null;try{vt=1,Xt(e,t,n,r)}finally{vt=i,jt.transition=s}}function Yt(e,t,n,r){var i=vt,s=jt.transition;jt.transition=null;try{vt=4,Xt(e,t,n,r)}finally{vt=i,jt.transition=s}}function Xt(e,t,n,r){if(Gt){var i=Qt(e,t,n,r);if(null===i)Gr(e,t,r,qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=xt(Nt,e,t,n,r,i),!0;case"dragenter":return Dt=xt(Dt,e,t,n,r,i),!0;case"mouseover":return Rt=xt(Rt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Mt.set(s,xt(Mt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,xt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=vi(i);if(null!==s&&_t(s),null===(s=Qt(e,t,n,r))&&Gr(e,t,r,qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var qt=null;function Qt(e,t,n,r){if(qt=null,null!==(e=wi(e=_e(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=B({},un,{view:0,detail:0}),dn=sn(hn),fn=B({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),gn=sn(fn),pn=sn(B({},fn,{dataTransfer:0})),mn=sn(B({},hn,{relatedTarget:0})),yn=sn(B({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=B({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=sn(wn),En=sn(B({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function An(){return Sn}var Tn=B({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),bn=sn(Tn),Nn=sn(B({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(B({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Rn=sn(B({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=B({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Mn),kn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var xn=c&&"TextEvent"in window&&!Ln,Bn=c&&(!Pn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Yr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function qn(e){Fr(e,0)}function Qn(e){if(X(Ei(e)))return e}function Kn(e,t){if("change"===e)return t}var $n=!1;if(c){var Zn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;$n=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Xn=Yn=null)}function nr(e){if("value"===e.propertyName&&Qn(Xn)){var t=[];Wn(t,Xn,e,_e(e)),Me(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Xn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,wr=null,vr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&lr(wr,r)||(wr=r,0<(r=Yr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Sr={};function Ar(e){if(Ir[e])return Ir[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ir[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var Tr=Ar("animationend"),br=Ar("animationiteration"),Nr=Ar("animationstart"),Dr=Ar("transitionend"),Rr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),l(t,[e])}for(var kr=0;kr<Mr.length;kr++){var Pr=Mr[kr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(br,"onAnimationIteration"),Or(Nr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Dr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(ze.apply(this,arguments),xe){if(!xe)throw Error(s(198));var c=Be;xe=!1,Be=null,Fe||(Fe=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Br(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Br(i,a,u),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(xr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Kt(t)){case 1:var i=Wt;break;case 4:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=wi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Me(function(){var r=s,i=_e(n),o=[];e:{var a=Rr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=bn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Tr:case br:case Nr:l=yn;break;case Dr:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,g=r;null!==g;){var p=(f=g).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==d&&(null!=(p=Oe(g,d))&&c.push(Wr(g,p,f)))),h)break;g=g.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Ee||!(u=n.relatedTarget||n.fromElement)||!wi(u)&&!u[gi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?wi(u):null)&&(u!==(h=He(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=gn,p="onMouseLeave",d="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(c=Nn,p="onPointerLeave",d="onPointerEnter",g="pointer"),h=null==l?a:Ei(l),f=null==u?a:Ei(u),(a=new c(p,g+"leave",l,n,i)).target=h,a.relatedTarget=f,p=null,wi(i)===r&&((c=new c(d,g+"enter",u,n,i)).target=f,c.relatedTarget=h,p=c),h=p,l&&u)e:{for(d=u,g=0,f=c=l;f;f=Xr(f))g++;for(f=0,p=d;p;p=Xr(p))f++;for(;0<g-f;)c=Xr(c),g--;for(;0<f-g;)d=Xr(d),f--;for(;g--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==l&&qr(o,a,l,c,!1),null!==u&&null!==h&&qr(o,h,u,c,!0)}if("select"===(l=(a=r?Ei(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Kn;else if(Gn(a))if($n)m=or;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?Ei(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,wr=null);break;case"focusout":wr=yr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,Er(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":Er(o,n,i)}var w;if(Pn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?Vn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Bn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(w=en()):(Zt="value"in($t=i)?$t.value:$t.textContent,Hn=!0)),0<(y=Yr(r,v)).length&&(v=new En(v,e,null,n,i),o.push({event:v,listeners:y}),w?v.data=w:null!==(w=zn(n))&&(v.data=w))),(w=xn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Jt=Zt=$t=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=w))}Fr(o,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Oe(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Oe(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Kr,"")}function Zr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,gi="__reactContainer$"+hi,pi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function wi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[di]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ci=[],Ii=-1;function Si(e){return{current:e}}function Ai(e){0>Ii||(e.current=Ci[Ii],Ci[Ii]=null,Ii--)}function Ti(e,t){Ii++,Ci[Ii]=e.current,e.current=t}var bi={},Ni=Si(bi),Di=Si(!1),Ri=bi;function Mi(e,t){var n=e.type.contextTypes;if(!n)return bi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ki(){Ai(Di),Ai(Ni)}function Pi(e,t,n){if(Ni.current!==bi)throw Error(s(168));Ti(Ni,t),Ti(Di,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,j(e)||"Unknown",i));return B({},n,r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bi,Ri=Ni.current,Ti(Ni,e),Ti(Di,Di.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ai(Di),Ai(Ni),Ti(Ni,e)):Ai(Di),Ti(Di,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Hi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=vt;try{var n=Fi;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Xe(Je,Hi),i}finally{vt=t,Vi=!1}}return null}var ji=[],Gi=0,Wi=null,Yi=0,Xi=[],qi=0,Qi=null,Ki=1,$i="";function Zi(e,t){ji[Gi++]=Yi,ji[Gi++]=Wi,Wi=e,Yi=t}function Ji(e,t,n){Xi[qi++]=Ki,Xi[qi++]=$i,Xi[qi++]=Qi,Qi=e;var r=Ki;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ki=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Ki=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function ts(e){for(;e===Wi;)Wi=ji[--Gi],ji[Gi]=null,Yi=ji[--Gi],ji[Gi]=null;for(;e===Qi;)Qi=Xi[--qi],Xi[qi]=null,$i=Xi[--qi],Xi[qi]=null,Ki=Xi[--qi],Xi[qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Ki,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function gs(e){null===ss?ss=[e]:ss.push(e)}var ps=E.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ws(e){return(0,e._init)(e._payload)}function vs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ku(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&ws(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Pu(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Pu(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case C:return(t=Fu(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lu(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case C:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return g(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function p(i,s,a,l){for(var u=null,c=null,h=s,p=s=0,m=null;null!==h&&p<a.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var y=f(i,h,a[p],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,p),null===c?u=y:c.sibling=y,c=y,h=m}if(p===a.length)return n(i,h),is&&Zi(i,p),u;if(null===h){for(;p<a.length;p++)null!==(h=d(i,a[p],l))&&(s=o(h,s,p),null===c?u=h:c.sibling=h,c=h);return is&&Zi(i,p),u}for(h=r(i,h);p<a.length;p++)null!==(m=g(h,i,p,a[p],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?p:m.key),s=o(m,s,p),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach(function(e){return t(i,e)}),is&&Zi(i,p),u}function m(i,a,l,u){var c=L(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,p=a,m=a=0,y=null,w=l.next();null!==p&&!w.done;m++,w=l.next()){p.index>m?(y=p,p=null):y=p.sibling;var v=f(i,p,w.value,u);if(null===v){null===p&&(p=y);break}e&&p&&null===v.alternate&&t(i,p),a=o(v,a,m),null===h?c=v:h.sibling=v,h=v,p=y}if(w.done)return n(i,p),is&&Zi(i,m),c;if(null===p){for(;!w.done;m++,w=l.next())null!==(w=d(i,w.value,u))&&(a=o(w,a,m),null===h?c=w:h.sibling=w,h=w);return is&&Zi(i,m),c}for(p=r(i,p);!w.done;m++,w=l.next())null!==(w=g(p,i,m,w.value,u))&&(e&&null!==w.alternate&&p.delete(null===w.key?m:w.key),a=o(w,a,m),null===h?c=w:h.sibling=w,h=w);return e&&p.forEach(function(e){return t(i,e)}),is&&Zi(i,m),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===I){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&ws(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=ms(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===I?((s=Lu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Pu(o.type,o.key,o.props,null,r.mode,l)).ref=ms(r,s,o),l.return=r,r=l)}return a(r);case C:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fu(o,r.mode,l)).return=r,r=s}return a(r);case O:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return p(r,s,o,l);if(L(o))return m(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Bu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Es=vs(!0),_s=vs(!1),Cs=Si(null),Is=null,Ss=null,As=null;function Ts(){As=Ss=Is=null}function bs(e){var t=Cs.current;Ai(Cs),e._currentValue=t}function Ns(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ds(e,t){Is=e,As=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(va=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(As!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===Is)throw Error(s(308));Ss=e,Is.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ms=null;function Os(e){null===Ms?Ms=[e]:Ms.push(e)}function ks(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ps(e,r)}function Ps(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function xs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ps(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ps(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,p=a;switch(d=t,f=n,p.tag){case 1:if("function"===typeof(g=p.payload)){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(d="function"===typeof(g=p.payload)?g.call(f,h,d):g)||void 0===d)break e;h=B({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);xl|=o,e.lanes=o,e.memoizedState=h}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Gs={},Ws=Si(Gs),Ys=Si(Gs),Xs=Si(Gs);function qs(e){if(e===Gs)throw Error(s(174));return e}function Qs(e,t){switch(Ti(Xs,t),Ti(Ys,e),Ti(Ws,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(Ws),Ti(Ws,t)}function Ks(){Ai(Ws),Ai(Ys),Ai(Xs)}function $s(e){qs(Xs.current);var t=qs(Ws.current),n=le(t,e.type);t!==n&&(Ti(Ys,e),Ti(Ws,n))}function Zs(e){Ys.current===e&&(Ai(Ws),Ai(Ys))}var Js=Si(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=E.ReactCurrentDispatcher,io=E.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,uo=!1,co=!1,ho=0,fo=0;function go(){throw Error(s(321))}function po(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Jo:ea,e=n(r,i),co){o=0;do{if(co=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(co)}if(ro.current=Zo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,uo=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function vo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function Eo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=vo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((so&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,oo.lanes|=h,xl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(va=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,xl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Co(e){var t=vo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(va=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function So(e,t){var n=oo,r=vo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,va=!0),r=r.queue,xo(bo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Mo(9,To.bind(null,n,r,i,t),void 0,null),null===Dl)throw Error(s(349));0!==(30&so)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Do(e)}function bo(e,t,n){return n(function(){No(t)&&Do(e)})}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Do(e){var t=Ps(e,1);null!==t&&nu(t,e,1,-1)}function Ro(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=qo.bind(null,oo,e),[t.memoizedState,e]}function Mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return vo().memoizedState}function ko(e,t,n,r){var i=wo();oo.flags|=e,i.memoizedState=Mo(1|t,n,void 0,void 0===r?null:r)}function Po(e,t,n,r){var i=vo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&po(r,o.deps))return void(i.memoizedState=Mo(t,n,s,r))}oo.flags|=e,i.memoizedState=Mo(1|t,n,s,r)}function Lo(e,t){return ko(8390656,8,e,t)}function xo(e,t){return Po(2048,8,e,t)}function Bo(e,t){return Po(4,2,e,t)}function Fo(e,t){return Po(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4,4,Uo.bind(null,t,e),n)}function zo(){}function Ho(e,t){var n=vo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&po(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jo(e,t){var n=vo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&po(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,va=!0),e.memoizedState=n):(ar(n,t)||(n=pt(),oo.lanes|=n,xl|=n,e.baseState=!0),t)}function Wo(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{vt=n,io.transition=r}}function Yo(){return vo().memoizedState}function Xo(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Ko(t,n);else if(null!==(n=ks(e,t,n,r))){nu(n,e,r,eu()),$o(n,t,r)}}function qo(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Ko(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=ks(e,t,i,r))&&(nu(n,e,r,i=eu()),$o(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Ko(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wt(e,n)}}var Zo={readContext:Rs,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},Jo={readContext:Rs,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Ro,useDebugValue:zo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Wo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=wo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Dl)throw Error(s(349));0!==(30&so)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(bo.bind(null,r,o,e),[e]),r.flags|=2048,Mo(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Dl.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Ki&~(1<<32-ot(Ki)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Rs,useCallback:Ho,useContext:Rs,useEffect:xo,useImperativeHandle:Vo,useInsertionEffect:Bo,useLayoutEffect:Fo,useMemo:jo,useReducer:_o,useRef:Oo,useState:function(){return _o(Eo)},useDebugValue:zo,useDeferredValue:function(e){return Go(vo(),ao.memoizedState,e)},useTransition:function(){return[_o(Eo)[0],vo().memoizedState]},useMutableSource:Io,useSyncExternalStore:So,useId:Yo,unstable_isNewReconciler:!1},ta={readContext:Rs,useCallback:Ho,useContext:Rs,useEffect:xo,useImperativeHandle:Vo,useInsertionEffect:Bo,useLayoutEffect:Fo,useMemo:jo,useReducer:Co,useRef:Oo,useState:function(){return Co(Eo)},useDebugValue:zo,useDeferredValue:function(e){var t=vo();return null===ao?t.memoizedState=e:Go(t,ao.memoizedState,e)},useTransition:function(){return[Co(Eo)[0],vo().memoizedState]},useMutableSource:Io,useSyncExternalStore:So,useId:Yo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nu(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nu(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nu(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=bi,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(i=Oi(t)?Ri:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Mi(e,i):bi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},xs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Rs(s):(s=Oi(t)?Ri:Ni.current,i.context=Mi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Hs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Wl=r),ha(0,t)},n}function ga(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=E.ReactCurrentOwner,va=!1;function Ea(e,t,n,r){t.child=null===e?_s(t,null,n,r):Es(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return Ds(t,i),r=mo(e,t,n,r,s,i),n=yo(),null===e||va?(is&&n&&es(t),t.flags|=1,Ea(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ca(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=ku(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(va=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(va=!0)}}return Ta(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(kl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(kl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(kl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(kl,Ol),Ol|=r;return Ea(e,t,i,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Oi(n)?Ri:Ni.current;return s=Mi(t,s),Ds(t,i),n=mo(e,t,n,r,s,i),r=yo(),null===e||va?(is&&r&&es(t),t.flags|=1,Ea(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function ba(e,t,n,r,i){if(Oi(n)){var s=!0;xi(t)}else s=!1;if(Ds(t,i),null===t.stateNode)ja(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Rs(u):u=Mi(t,u=Oi(n)?Ri:Ni.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&aa(t,o,r,u),Ls=!1;var d=t.memoizedState;o.state=d,Hs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Di.current||Ls?("function"===typeof c&&(ra(t,n,c,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Bs(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:na(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Mi(t,l=Oi(n)?Ri:Ni.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,Hs(t,r,o,i);var g=t.memoizedState;a!==h||d!==g||Di.current||Ls?("function"===typeof f&&(ra(t,n,f,r),g=t.memoizedState),(u=Ls||sa(t,n,u,r,d,g,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,g,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,g,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){Aa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Bi(t,n,!1),Ga(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Es(t,e.child,null,s),t.child=Es(t,null,a,s)):Ea(e,t,a,s),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Qs(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),gs(i),t.flags|=256,Ea(e,t,n,r),t.child}var Ma,Oa,ka,Pa,La={dehydrated:null,treeContext:null,retryLane:0};function xa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,o=Js.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(Js,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=xu(l,i,0,null),e=Lu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=xa(n),t.memoizedState=La,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ca(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=xu({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Es(t,e.child,null,a),t.child.memoizedState=xa(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ca(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),va||l){if(null!==(r=Dl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ps(e,i),nu(r,e,i,-1))}return pu(),Ua(e,t,a,r=ca(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=bu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Xi[qi++]=Ki,Xi[qi++]=$i,Xi[qi++]=Qi,Ki=e.id,$i=e.overflow,Qi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=ku(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=ku(r,a):(a=Lu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?xa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=ku(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=xu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&gs(r),Es(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ns(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ea(e,t,r.children,n),0!==(2&(r=Js.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Js,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),xl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Oi(t.type)&&ki(),Ya(t),null;case 3:return r=t.stateNode,Ks(),Ai(Di),Ai(Ni),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ou(ss),ss=null))),Oa(e,t),Ya(t),null;case 5:Zs(t);var i=qs(Xs.current);if(n=t.type,null!==e&&null!=t.stateNode)ka(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ya(t),null}if(e=qs(Ws.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":K(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in we(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":Y(r),J(r,o,!0);break;case"textarea":Y(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ma(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":K(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in we(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&v(e,o,c,l))}switch(n){case"input":Y(e),J(e,r,!1);break;case"textarea":Y(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Pa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=qs(Xs.current),qs(Ws.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ya(t),null;case 13:if(Ai(Js),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),o=!1}else null!==ss&&(ou(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Js.current)?0===Pl&&(Pl=3):pu())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return Ks(),Oa(e,t),null===e&&Hr(t.stateNode.containerInfo),Ya(t),null;case 10:return bs(t.type._context),Ya(t),null;case 19:if(Ai(Js),null===(o=t.memoizedState))return Ya(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Js,1&Js.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Hl&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ya(t),null}else 2*$e()-o.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=Js.current,Ti(Js,r?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function qa(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&ki(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ks(),Ai(Di),Ai(Ni),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ai(Js),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(Js),null;case 4:return Ks(),null;case 10:return bs(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ma=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},ka=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,qs(Ws.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in we(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ka=!1,$a="function"===typeof WeakSet?WeakSet:Set,Za=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Su(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[pi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ka||Ja(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ka&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ka&&(Ja(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Su(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ka=(r=Ka)||null!==n.memoizedState,dl(e,t,n),Ka=r):dl(e,t,n);break;default:dl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach(function(t){var r=Nu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(s(160));fl(o,a,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Su(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Su(e,e.return,m)}}break;case 1:pl(t,e),yl(e),512&r&&null!==n&&Ja(n,n.return);break;case 5:if(pl(t,e),yl(e),512&r&&null!==n&&Ja(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Su(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),ve(l,a);var c=ve(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):v(i,h,d,c)}switch(l){case"input":Z(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;null!=g?ne(i,!!o.multiple,g,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Su(e,e.return,m)}}break;case 6:if(pl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Su(e,e.return,m)}}break;case 3:if(pl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){Su(e,e.return,m)}break;case 4:default:pl(t,e),yl(e);break;case 13:pl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=$e())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ka=(c=Ka)||h,pl(t,e),Ka=c):pl(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(g=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Ja(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Su(r,n,m)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==g?(g.return=f,Za=g):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pe("display",a))}catch(m){Su(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Su(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pl(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Su(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ka;a=Qa;var u=Ka;if(Qa=o,(Ka=l)&&!u)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Cl(i):null!==l?(l.return=o,Za=l):Cl(i);for(;null!==s;)Za=s,vl(s,t,n),s=s.sibling;Za=i,Qa=a,Ka=u}El(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):El(e)}}function El(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ka||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ka)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&js(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ht(d)}}}break;default:throw Error(s(163))}Ka||512&t.flags&&il(t)}catch(f){Su(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function _l(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Cl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Su(t,i,l)}}var s=t.return;try{il(t)}catch(l){Su(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Su(t,o,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Il,Sl=Math.ceil,Al=E.ReactCurrentDispatcher,Tl=E.ReactCurrentOwner,bl=E.ReactCurrentBatchConfig,Nl=0,Dl=null,Rl=null,Ml=0,Ol=0,kl=Si(0),Pl=0,Ll=null,xl=0,Bl=0,Fl=0,Ul=null,Vl=null,zl=0,Hl=1/0,jl=null,Gl=!1,Wl=null,Yl=null,Xl=!1,ql=null,Ql=0,Kl=0,$l=null,Zl=-1,Jl=0;function eu(){return 0!==(6&Nl)?$e():-1!==Zl?Zl:Zl=$e()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Ml?Ml&-Ml:null!==ps.transition?(0===Jl&&(Jl=pt()),Jl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nu(e,t,n,r){if(50<Kl)throw Kl=0,$l=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Dl||(e===Dl&&(0===(2&Nl)&&(Bl|=n),4===Pl&&au(e,Ml)),ru(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Hl=$e()+500,Ui&&Hi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Dl?Ml:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lu.bind(null,e)):zi(lu.bind(null,e)),oi(function(){0===(6&Nl)&&Hi()}),n=null;else{switch(Et(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Du(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Zl=-1,Jl=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Cu()&&e.callbackNode!==n)return null;var r=dt(e,e===Dl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=Nl;Nl|=2;var o=gu();for(Dl===e&&Ml===t||(jl=null,Hl=$e()+500,du(e,t));;)try{wu();break}catch(l){fu(e,l)}Ts(),Al.current=o,Nl=i,null!==Rl?t=0:(Dl=null,Ml=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=gt(e))&&(r=i,t=su(e,i))),1===t)throw n=Ll,du(e,0),au(e,r),ru(e,$e()),n;if(6===t)au(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(o=gt(e))&&(r=o,t=su(e,o))),1===t))throw n=Ll,du(e,0),au(e,r),ru(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_u(e,Vl,jl);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=zl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_u.bind(null,e,Vl,jl),t);break}_u(e,Vl,jl);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(_u.bind(null,e,Vl,jl),r);break}_u(e,Vl,jl);break;default:throw Error(s(329))}}}return ru(e,$e()),e.callbackNode===n?iu.bind(null,e):null}function su(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=mu(e,t))&&(t=Vl,Vl=n,null!==t&&ou(t)),e}function ou(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function au(e,t){for(t&=~Fl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Nl))throw Error(s(327));Cu();var t=dt(e,0);if(0===(1&t))return ru(e,$e()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=gt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Ll,du(e,0),au(e,t),ru(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Vl,jl),ru(e,$e()),null}function uu(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Hl=$e()+500,Ui&&Hi())}}function cu(e){null!==ql&&0===ql.tag&&0===(6&Nl)&&Cu();var t=Nl;Nl|=1;var n=bl.transition,r=vt;try{if(bl.transition=null,vt=1,e)return e()}finally{vt=r,bl.transition=n,0===(6&(Nl=t))&&Hi()}}function hu(){Ol=kl.current,Ai(kl)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ki();break;case 3:Ks(),Ai(Di),Ai(Ni),no();break;case 5:Zs(r);break;case 4:Ks();break;case 13:case 19:Ai(Js);break;case 10:bs(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Dl=e,Rl=e=ku(e.current,null),Ml=Ol=t,Pl=0,Ll=null,Fl=Bl=xl=0,Vl=Ul=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(r=(n=Ms[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ms=null}return e}function fu(e,t){for(;;){var n=Rl;try{if(Ts(),ro.current=Zo,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(so=0,lo=ao=oo=null,co=!1,ho=0,Tl.current=null,null===n||null===n.return){Pl=1,Ll=t,Rl=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=ma(a);if(null!==g){g.flags&=-257,ya(g,a,l,0,t),1&g.mode&&pa(o,c,t),u=c;var p=(t=g).updateQueue;if(null===p){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}if(0===(1&t)){pa(o,c,t),pu();break e}u=Error(s(426))}else if(is&&1&l.mode){var y=ma(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),gs(ua(u,l));break e}}o=u=ua(u,l),4!==Pl&&(Pl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,u,t));break e;case 1:l=u;var w=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof w.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Yl||!Yl.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}Eu(n)}catch(E){t=E,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gu(){var e=Al.current;return Al.current=Zo,null===e?Zo:e}function pu(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Dl||0===(268435455&xl)&&0===(268435455&Bl)||au(Dl,Ml)}function mu(e,t){var n=Nl;Nl|=2;var r=gu();for(Dl===e&&Ml===t||(jl=null,du(e,t));;)try{yu();break}catch(i){fu(e,i)}if(Ts(),Nl=n,Al.current=r,null!==Rl)throw Error(s(261));return Dl=null,Ml=0,Pl}function yu(){for(;null!==Rl;)vu(Rl)}function wu(){for(;null!==Rl&&!Qe();)vu(Rl)}function vu(e){var t=Il(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?Eu(e):Rl=t,Tl.current=null}function Eu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xa(n,t,Ol)))return void(Rl=n)}else{if(null!==(n=qa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Pl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Pl&&(Pl=5)}function _u(e,t,n){var r=vt,i=bl.transition;try{bl.transition=null,vt=1,function(e,t,n,r){do{Cu()}while(null!==ql);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Dl&&(Rl=Dl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Du(tt,function(){return Cu(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=bl.transition,bl.transition=null;var a=vt;vt=1;var l=Nl;Nl|=4,Tl.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var g;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(g=d.firstChild);)f=d,d=g;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(g=d.nextSibling))break;f=(d=f).parentNode}d=g}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,w=t.stateNode,v=w.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),y);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(s(163))}}catch(_){Su(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}p=tl,tl=!1}(e,n),ml(n,e),gr(ti),Gt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Ke(),Nl=l,vt=a,bl.transition=o}else e.current=n;if(Xl&&(Xl=!1,ql=e,Ql=i),o=e.pendingLanes,0===o&&(Yl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Wl,Wl=null,e;0!==(1&Ql)&&0!==e.tag&&Cu(),o=e.pendingLanes,0!==(1&o)?e===$l?Kl++:(Kl=0,$l=e):Kl=0,Hi()}(e,t,n,r)}finally{bl.transition=i,vt=r}return null}function Cu(){if(null!==ql){var e=Et(Ql),t=bl.transition,n=vt;try{if(bl.transition=null,vt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Ql=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,g=h.return;if(sl(h),h===c){Za=null;break}if(null!==f){f.return=g,Za=f;break}Za=g}}}var p=o.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var w=o.sibling;if(null!==w){w.return=o.return,Za=w;break e}Za=o.return}}var v=e.current;for(Za=v;null!==Za;){var E=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==E)E.return=a,Za=E;else e:for(a=v;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(C){Su(l,l.return,C)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Nl=i,Hi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(C){}r=!0}return r}finally{vt=n,bl.transition=t}}return!1}function Iu(e,t,n){e=Us(e,t=fa(0,t=ua(n,t),1),1),t=eu(),null!==e&&(yt(e,1,t),ru(e,t))}function Su(e,t,n){if(3===e.tag)Iu(e,e,n);else for(;null!==t;){if(3===t.tag){Iu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Us(t,e=ga(t,e=ua(n,e),1),1),e=eu(),null!==t&&(yt(t,1,e),ru(t,e));break}}t=t.return}}function Au(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Ml&n)===n&&(4===Pl||3===Pl&&(130023424&Ml)===Ml&&500>$e()-zl?du(e,0):Fl|=n),ru(e,t)}function Tu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ps(e,t))&&(yt(e,t,n),ru(e,n))}function bu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tu(e,n)}function Du(e,t){return Xe(e,t)}function Ru(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Ru(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ku(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ou(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Lu(n.children,i,o,t);case S:a=8,i|=8;break;case A:return(e=Mu(12,n,t,2|i)).elementType=A,e.lanes=o,e;case D:return(e=Mu(13,n,t,i)).elementType=D,e.lanes=o,e;case R:return(e=Mu(19,n,t,i)).elementType=R,e.lanes=o,e;case k:return xu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case b:a=9;break e;case N:a=11;break e;case M:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Mu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function xu(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function Bu(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vu(e,t,n,r,i,s,o,a,l){return e=new Uu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Mu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xs(s),e}function zu(e){if(!e)return bi;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Hu(e,t,n,r,i,s,o,a,l){return(e=Vu(n,r,!0,e,0,s,0,a,l)).context=zu(null),n=e.current,(s=Fs(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),ru(e,r),e}function ju(e,t,n,r){var i=t.current,s=eu(),o=tu(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nu(e,i,o,s),Vs(e,i,o)),o}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)va=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return va=!1,function(e,t,n){switch(t.tag){case 3:Da(t),fs();break;case 5:$s(t);break;case 1:Oi(t.type)&&xi(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Cs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Js,1&Js.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ti(Js,1&Js.current),null!==(e=Ga(e,t,n))?e.sibling:null);Ti(Js,1&Js.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Js,Js.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ga(e,t,n)}(e,t,n);va=0!==(131072&e.flags)}else va=!1,is&&0!==(1048576&t.flags)&&Ji(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ja(e,t),e=t.pendingProps;var i=Mi(t,Ni.current);Ds(t,n),i=mo(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,xi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,xs(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),Ea(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===M)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=ba(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ca(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,ba(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Da(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Bs(e,t),Hs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}Ea(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Aa(e,t),Ea(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Ba(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Es(t,null,r,n):Ea(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return Ea(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(Cs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Di.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Fs(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ns(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ns(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ea(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ds(t,n),r=r(i=Rs(i)),t.flags|=1,Ea(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ca(e,t,r,i=na(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),ja(e,t),t.tag=1,Oi(r)?(e=!0,xi(t)):e=!1,Ds(t,n),oa(t,r,i),la(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Ha(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function qu(e){this._internalRoot=e}function Qu(e){this._internalRoot=e}function Ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function Ju(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Gu(o);a.call(e)}}ju(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gu(o);s.call(e)}}var o=Hu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[gi]=o.current,Hr(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gu(l);a.call(e)}}var l=Vu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[gi]=l.current,Hr(8===e.nodeType?e.parentNode:e),cu(function(){ju(t,l,n,r)}),l}(n,t,e,i,r);return Gu(o)}Qu.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));ju(e,t,null,null)},Qu.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu(function(){ju(null,e,null,null)}),t[gi]=null}},Qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&Bt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(wt(t,1|n),ru(t,$e()),0===(6&Nl)&&(Hl=$e()+500,Hi()))}break;case 13:cu(function(){var t=Ps(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}}),Yu(e,1)}},Ct=function(e){if(13===e.tag){var t=Ps(e,134217728);if(null!==t)nu(t,e,134217728,eu());Yu(e,134217728)}},It=function(e){if(13===e.tag){var t=tu(e),n=Ps(e,t);if(null!==n)nu(n,e,t,eu());Yu(e,t)}},St=function(){return vt},At=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Ce=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));X(r),Z(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=uu,De=cu;var ec={usingClientEntryPoint:!1,Events:[vi,Ei,_i,Te,be,uu]},tc={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),st=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ku(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ku(e))throw Error(s(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vu(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!$u(t))throw Error(s(200));return Ju(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ku(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hu(t,null,e,1,null!=n?n:null,i,0,o,a),e[gi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qu(t)},t.render=function(e,t,n){if(!$u(t))throw Error(s(200));return Ju(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(s(40));return!!e._reactRootContainer&&(cu(function(){Ju(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Ju(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),(()=>{"use strict";var e=n(43),t=n(391);const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==l)throw new s;const u=t<<2|o>>4;if(r.push(u),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,u=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/bla-loyalty-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},c=e=>{var t,n;return null===(n=null===(t=u())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},h=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},d=e=>{var t;return null===(t=u())||void 0===t?void 0:t[`_${e}`]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function p(){return!function(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m(){try{return"object"===typeof indexedDB}catch(e){return!1}}class y extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(v,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new y(n,s,t)}}const v=/\{\$([^}]+)}/g;function E(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(_(n)&&_(s)){if(!E(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _(e){return null!==e&&"object"===typeof e}function C(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function I(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function S(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class A{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T(){}function b(e){return e&&e._delegate?e._delegate:e}class N{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const D="[DEFAULT]";class R{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new f;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:D})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===D?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.component?this.component.multipleInstances?e:D:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class M{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const O=[];var k;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(k||(k={}));const P={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},L=k.INFO,x={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},B=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=x[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class F{constructor(e){this.name=e,this._logLevel=L,this._logHandler=B,this._userLogHandler=null,O.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in k))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...t),this._logHandler(this,k.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...t),this._logHandler(this,k.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.INFO,...t),this._logHandler(this,k.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.WARN,...t),this._logHandler(this,k.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.ERROR,...t),this._logHandler(this,k.ERROR,...t)}}let U,V;const z=new WeakMap,H=new WeakMap,j=new WeakMap,G=new WeakMap,W=new WeakMap;let Y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||j.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Q(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function X(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(K(this),n),Q(z.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q(e.apply(K(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(K(this),t,...r);return j.set(s,t.sort?t.sort():[t]),Q(s)}}function q(e){return"function"===typeof e?X(e):(e instanceof IDBTransaction&&function(e){if(H.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});H.set(e,t)}(e),t=e,(U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Y):e);var t}function Q(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Q(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&z.set(t,e)}).catch(()=>{}),W.set(t,e),t}(e);if(G.has(e))return G.get(e);const t=q(e);return t!==e&&(G.set(e,t),W.set(t,e)),t}const K=e=>W.get(e);const $=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],J=new Map;function ee(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(J.get(t))return J.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Z.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!$.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return J.set(t,s),s}Y=(e=>({...e,get:(t,n,r)=>ee(t,n)||e.get(t,n,r),has:(t,n)=>!!ee(t,n)||e.has(t,n)}))(Y);class te{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const ne="@firebase/app",re="0.10.13",ie=new F("@firebase/app"),se="@firebase/app-compat",oe="@firebase/analytics-compat",ae="@firebase/analytics",le="@firebase/app-check-compat",ue="@firebase/app-check",ce="@firebase/auth",he="@firebase/auth-compat",de="@firebase/database",fe="@firebase/data-connect",ge="@firebase/database-compat",pe="@firebase/functions",me="@firebase/functions-compat",ye="@firebase/installations",we="@firebase/installations-compat",ve="@firebase/messaging",Ee="@firebase/messaging-compat",_e="@firebase/performance",Ce="@firebase/performance-compat",Ie="@firebase/remote-config",Se="@firebase/remote-config-compat",Ae="@firebase/storage",Te="@firebase/storage-compat",be="@firebase/firestore",Ne="@firebase/vertexai-preview",De="@firebase/firestore-compat",Re="firebase",Me="[DEFAULT]",Oe={[ne]:"fire-core",[se]:"fire-core-compat",[ae]:"fire-analytics",[oe]:"fire-analytics-compat",[ue]:"fire-app-check",[le]:"fire-app-check-compat",[ce]:"fire-auth",[he]:"fire-auth-compat",[de]:"fire-rtdb",[fe]:"fire-data-connect",[ge]:"fire-rtdb-compat",[pe]:"fire-fn",[me]:"fire-fn-compat",[ye]:"fire-iid",[we]:"fire-iid-compat",[ve]:"fire-fcm",[Ee]:"fire-fcm-compat",[_e]:"fire-perf",[Ce]:"fire-perf-compat",[Ie]:"fire-rc",[Se]:"fire-rc-compat",[Ae]:"fire-gcs",[Te]:"fire-gcs-compat",[be]:"fire-fst",[De]:"fire-fst-compat",[Ne]:"fire-vertex","fire-js":"fire-js",[Re]:"fire-js-all"},ke=new Map,Pe=new Map,Le=new Map;function xe(e,t){try{e.container.addComponent(t)}catch(n){ie.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Be(e){const t=e.name;if(Le.has(t))return ie.debug(`There were multiple attempts to register component ${t}.`),!1;Le.set(t,e);for(const n of ke.values())xe(n,e);for(const n of Pe.values())xe(n,e);return!0}function Fe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ue(e){return void 0!==e.settings}const Ve=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ze{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new N("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ve.create("app-deleted",{appName:this._name})}}const He="10.14.1";function je(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Me,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ve.create("bad-app-name",{appName:String(i)});if(n||(n=h()),!n)throw Ve.create("no-options");const s=ke.get(i);if(s){if(E(n,s.options)&&E(r,s.config))return s;throw Ve.create("duplicate-app",{appName:i})}const o=new M(i);for(const l of Le.values())o.addComponent(l);const a=new ze(n,r,o);return ke.set(i,a),a}function Ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me;const t=ke.get(e);if(!t&&e===Me&&h())return je();if(!t)throw Ve.create("no-app",{appName:e});return t}function We(e,t,n){var r;let i=null!==(r=Oe[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ie.warn(e.join(" "))}Be(new N(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const Ye="firebase-heartbeat-store";let Xe=null;function qe(){return Xe||(Xe=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Q(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Q(o.result),e.oldVersion,e.newVersion,Q(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ye)}catch(n){console.warn(n)}}}).catch(e=>{throw Ve.create("idb-open",{originalErrorMessage:e.message})})),Xe}async function Qe(e,t){try{const n=(await qe()).transaction(Ye,"readwrite"),r=n.objectStore(Ye);await r.put(t,Ke(e)),await n.done}catch(n){if(n instanceof y)ie.warn(n.message);else{const e=Ve.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ie.warn(e.message)}}}function Ke(e){return`${e.name}!${e.options.appId}`}class $e{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Je(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ze();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){ie.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ze(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),et(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),et(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=o(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ie.warn(t),""}}}function Ze(){return(new Date).toISOString().substring(0,10)}class Je{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!m()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await qe()).transaction(Ye),n=await t.objectStore(Ye).get(Ke(e));return await t.done,n}catch(t){if(t instanceof y)ie.warn(t.message);else{const e=Ve.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ie.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function et(e){return o(JSON.stringify({version:2,heartbeats:e})).length}var tt;tt="",Be(new N("platform-logger",e=>new te(e),"PRIVATE")),Be(new N("heartbeat",e=>new $e(e),"PRIVATE")),We(ne,re,tt),We(ne,re,"esm2017"),We("fire-js","");We("firebase","10.14.1","app");function nt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const it=rt,st=new w("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new F("@firebase/auth");function at(e){if(ot.logLevel<=k.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ot.error(`Auth (${He}): ${e}`,...n)}}function lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw dt(e,...n)}function ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dt(e,...n)}function ct(e,t,n){const r=Object.assign(Object.assign({},it()),{[t]:n});return new w("auth","Firebase",r).create(t,{appName:e.name})}function ht(e){return ct(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return st.create(e,...n)}function ft(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw dt(t,...r)}}function gt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw at(t),new Error(t)}function pt(e,t){e||gt(t)}function mt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yt(){return"http:"===wt()||"https:"===wt()}function wt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function vt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Et{constructor(e,t){this.shortDelay=e,this.longDelay=t,pt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return vt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _t(e,t){pt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Ct{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const It={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},St=new Et(3e4,6e4);function At(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Tt(e,t,n,r){return bt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=C(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Ct.fetch()(Dt(e,e.config.apiHost,n,o),l)})}async function bt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},It),t);try{const t=new Mt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Ot(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ot(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ot(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ot(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ct(e,a,o);lt(e,a)}}catch(i){if(i instanceof y)throw i;lt(e,"network-request-failed",{message:String(i)})}}async function Nt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Tt(e,t,n,r,i);return"mfaPendingCredential"in s&&lt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Dt(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?_t(e.config,i):`${e.config.apiScheme}://${i}`}function Rt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ut(this.auth,"network-request-failed")),St.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ot(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ut(e,t,r);return i.customData._tokenResponse=n,i}function kt(e){return void 0!==e&&void 0!==e.enterprise}class Pt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Rt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Lt(e,t){return Tt(e,"GET","/v2/recaptchaConfig",At(e,t))}async function xt(e,t){return Tt(e,"POST","/v1/accounts:lookup",t)}function Bt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Ft(e){return 1e3*Number(e)}function Ut(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return at("JWT malformed, contained fewer than 3 sections"),null;try{const e=a(n);return e?JSON.parse(e):(at("Failed to decode base64 JWT payload"),null)}catch(i){return at("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Vt(e){const t=Ut(e);return ft(t,"internal-error"),ft("undefined"!==typeof t.exp,"internal-error"),ft("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function zt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof y&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ht{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class jt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bt(this.lastLoginAt),this.creationTime=Bt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Gt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await zt(e,xt(n,{idToken:r}));ft(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Wt(s.providerUserInfo):[],a=(l=e.providerData,u=o,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Wt(e){return e.map(e=>{var{providerId:t}=e,n=nt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Yt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft("undefined"!==typeof e.idToken,"internal-error"),ft("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Vt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ft(0!==e.length,"internal-error");const t=Vt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await bt(e,{},async()=>{const n=C({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Dt(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ct.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Yt;return n&&(ft("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ft("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ft("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yt,this.toJSON())}_performRefresh(){return gt("not implemented")}}function Xt(e,t){ft("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class qt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=nt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ht(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await zt(this,this.stsTokenManager.getToken(this.auth,e));return ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=b(e),r=await n.getIdToken(t),i=Ut(r);ft(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Bt(Ft(i.auth_time)),issuedAtTime:Bt(Ft(i.iat)),expirationTime:Bt(Ft(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=b(e);await Gt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Gt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ue(this.auth.app))return Promise.reject(ht(this.auth));const e=await this.getIdToken();return await zt(this,async function(e,t){return Tt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,g=null!==(o=t.tenantId)&&void 0!==o?o:void 0,p=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:v,isAnonymous:E,providerData:_,stsTokenManager:C}=t;ft(w&&C,e,"internal-error");const I=Yt.fromJSON(this.name,C);ft("string"===typeof w,e,"internal-error"),Xt(c,e.name),Xt(h,e.name),ft("boolean"===typeof v,e,"internal-error"),ft("boolean"===typeof E,e,"internal-error"),Xt(d,e.name),Xt(f,e.name),Xt(g,e.name),Xt(p,e.name),Xt(m,e.name),Xt(y,e.name);const S=new qt({uid:w,auth:e,email:h,emailVerified:v,displayName:c,isAnonymous:E,photoURL:f,phoneNumber:d,tenantId:g,stsTokenManager:I,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map(e=>Object.assign({},e))),p&&(S._redirectEventId=p),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Yt;r.updateFromServerResponse(t);const i=new qt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Gt(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ft(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Wt(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Yt;o.updateFromIdToken(n);const a=new qt({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new jt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Qt=new Map;function Kt(e){pt(e instanceof Function,"Expected a class definition");let t=Qt.get(e);return t?(pt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Qt.set(e,t),t)}class $t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$t.type="NONE";const Zt=$t;function Jt(e,t,n){return`firebase:${e}:${t}:${n}`}class en{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Jt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Jt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new en(Kt(Zt),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Kt(Zt);const s=Jt(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=qt._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new en(i,e,n)):new en(i,e,n)}}function tn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(on(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ln(t))return"Blackberry";if(un(t))return"Webos";if(rn(t))return"Safari";if((t.includes("chrome/")||sn(t))&&!t.includes("edge/"))return"Chrome";if(an(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/firefox\//i.test(e)}function rn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/crios\//i.test(e)}function on(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iemobile/i.test(e)}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/android/i.test(e)}function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/blackberry/i.test(e)}function un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/webos/i.test(e)}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hn(){return function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return cn(e)||an(e)||un(e)||ln(e)||/windows phone/i.test(e)||on(e)}function fn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=tn(g());break;case"Worker":t=`${tn(g())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${He}/${r}`}class gn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class pn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class mn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wn(this),this.idTokenSubscription=new wn(this),this.beforeStateQueue=new gn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kt(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await en.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await xt(this,{idToken:e}),n=await qt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ue(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gt(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ue(this.app))return Promise.reject(ht(this));const t=e?b(e):null;return t&&ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ue(this.app)?Promise.reject(ht(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ue(this.app)?Promise.reject(ht(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kt(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Tt(e,"GET","/v2/passwordPolicy",At(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new pn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new w("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Tt(e,"POST","/v2/accounts:revokeToken",At(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kt(e)||this._popupRedirectResolver;ft(t,this,"argument-error"),this.redirectPersistenceManager=await en.create(this,[Kt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ot.logLevel<=k.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ot.warn(`Auth (${He}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function yn(e){return b(e)}class wn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new A(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function En(e){return vn.loadJS(e)}function _n(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Cn{constructor(e){this.type="recaptcha-enterprise",this.auth=yn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;kt(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Lt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Pt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&kt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=vn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),En(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function In(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Cn(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Sn(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await In(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await In(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function An(e,t,n){const r=yn(e);ft(r._canInitEmulator,r,"emulator-config-failed"),ft(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Tn(t),{host:o,port:a}=function(e){const t=Tn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:bn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:bn(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Tn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Nn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gt("not implemented")}_getIdTokenResponse(e){return gt("not implemented")}_linkToIdToken(e,t){return gt("not implemented")}_getReauthenticationResolver(e){return gt("not implemented")}}async function Dn(e,t){return Tt(e,"POST","/v1/accounts:signUp",t)}async function Rn(e,t){return Nt(e,"POST","/v1/accounts:signInWithPassword",At(e,t))}class Mn extends Nn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Mn(e,t,"password")}static _fromEmailAndCode(e,t){return new Mn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Sn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Rn);case"emailLink":return async function(e,t){return Nt(e,"POST","/v1/accounts:signInWithEmailLink",At(e,t))}(e,{email:this._email,oobCode:this._password});default:lt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Sn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dn);case"emailLink":return async function(e,t){return Nt(e,"POST","/v1/accounts:signInWithEmailLink",At(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:lt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function On(e,t){return Nt(e,"POST","/v1/accounts:signInWithIdp",At(e,t))}class kn extends Nn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=nt(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new kn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return On(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,On(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,On(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=C(t)}return e}}const Pn={USER_NOT_FOUND:"user-not-found"};class Ln extends Nn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ln({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ln({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Nt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Nt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,t));if(n.temporaryProof)throw Ot(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Nt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Pn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ln({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class xn{constructor(e){var t,n,r,i,s,o;const a=I(S(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ft(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=I(S(e)).link,n=t?I(S(t)).deep_link_id:null,r=I(S(e)).deep_link_id;return(r?I(S(r)).link:null)||r||n||t||e}(e);try{return new xn(t)}catch(n){return null}}}class Bn{constructor(){this.providerId=Bn.PROVIDER_ID}static credential(e,t){return Mn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xn.parseLink(t);return ft(n,"argument-error"),Mn._fromEmailAndCode(e,n.code,n.tenantId)}}Bn.PROVIDER_ID="password",Bn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Bn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Fn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Un extends Fn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vn extends Un{constructor(){super("facebook.com")}static credential(e){return kn._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Vn.credential(t.oauthAccessToken)}catch(n){return null}}}Vn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Vn.PROVIDER_ID="facebook.com";class zn extends Un{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kn._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return zn.credential(n,r)}catch(i){return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com",zn.PROVIDER_ID="google.com";class Hn extends Un{constructor(){super("github.com")}static credential(e){return kn._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Hn.credential(t.oauthAccessToken)}catch(n){return null}}}Hn.GITHUB_SIGN_IN_METHOD="github.com",Hn.PROVIDER_ID="github.com";class jn extends Un{constructor(){super("twitter.com")}static credential(e,t){return kn._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return jn.credential(n,r)}catch(i){return null}}}async function Gn(e,t){return Nt(e,"POST","/v1/accounts:signUp",At(e,t))}jn.TWITTER_SIGN_IN_METHOD="twitter.com",jn.PROVIDER_ID="twitter.com";class Wn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await qt._fromIdTokenResponse(e,n,r),s=Yn(n);return new Wn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Yn(n);return new Wn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Yn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Xn extends y{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Xn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Xn(e,t,n,r)}}function qn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Xn._fromErrorAndOperation(e,n,t,r);throw n})}async function Qn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await zt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Wn._forOperation(e,"link",r)}async function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ue(r.app))return Promise.reject(ht(r));const i="reauthenticate";try{const s=await zt(e,qn(r,i,t,e),n);ft(s.idToken,r,"internal-error");const o=Ut(s.idToken);ft(o,r,"internal-error");const{sub:a}=o;return ft(e.uid===a,r,"user-mismatch"),Wn._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&lt(r,"user-mismatch"),s}}async function $n(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ue(e.app))return Promise.reject(ht(e));const r="signIn",i=await qn(e,r,t),s=await Wn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Zn(e,t){return $n(yn(e),t)}async function Jn(e){const t=yn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const er="__sak";class tr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(er,"1"),this.storage.removeItem(er),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class nr extends tr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);hn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nr.type="LOCAL";const rr=nr;class ir extends tr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ir.type="SESSION";const sr=ir;class or{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new or(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}or.receivers=[];class lr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=ar("",20);r.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function ur(){return window}function cr(){return"undefined"!==typeof ur().WorkerGlobalScope&&"function"===typeof ur().importScripts}const hr="firebaseLocalStorageDb",dr="firebaseLocalStorage",fr="fbase_key";class gr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pr(e,t){return e.transaction([dr],t?"readwrite":"readonly").objectStore(dr)}function mr(){const e=indexedDB.open(hr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(dr,{keyPath:fr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(dr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(hr);return new gr(e).toPromise()}(),t(await mr()))})})}async function yr(e,t,n){const r=pr(e,!0).put({[fr]:t,value:n});return new gr(r).toPromise()}function wr(e,t){const n=pr(e,!0).delete(t);return new gr(n).toPromise()}class vr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await mr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=or._getInstance(cr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new lr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mr();return await yr(e,er,"1"),await wr(e,er),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>yr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=pr(e,!1).get(t),r=await new gr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=pr(e,!1).getAll();return new gr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}vr.type="LOCAL";const Er=vr;_n("rcb"),new Et(3e4,6e4);const _r="recaptcha";async function Cr(e,t,n){var r;const i=await n.verify();try{let s;if(ft("string"===typeof i,e,"argument-error"),ft(n.type===_r,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ft("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Tt(e,"POST","/v2/accounts/mfaEnrollment:start",At(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ft("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ft(n,e,"missing-multi-factor-info");const o=await function(e,t){return Tt(e,"POST","/v2/accounts/mfaSignIn:start",At(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Tt(e,"POST","/v1/accounts:sendVerificationCode",At(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ir{constructor(e){this.providerId=Ir.PROVIDER_ID,this.auth=yn(e)}verifyPhoneNumber(e,t){return Cr(this.auth,e,b(t))}static credential(e,t){return Ln._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ir.credentialFromTaggedObject(t)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ln._fromTokenResponse(n,r):null}}function Sr(e,t){return t?Kt(t):(ft(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ir.PROVIDER_ID="phone",Ir.PHONE_SIGN_IN_METHOD="phone";class Ar extends Nn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return On(e,this._buildIdpRequest())}_linkToIdToken(e,t){return On(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return On(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Tr(e){return $n(e.auth,new Ar(e),e.bypassAuthState)}function br(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),Kn(n,new Ar(e),e.bypassAuthState)}async function Nr(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),Qn(n,new Ar(e),e.bypassAuthState)}class Dr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tr;case"linkViaPopup":case"linkViaRedirect":return Nr;case"reauthViaPopup":case"reauthViaRedirect":return br;default:lt(this.auth,"internal-error")}}resolve(e){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rr=new Et(2e3,1e4);class Mr extends Dr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Mr.currentPopupAction&&Mr.currentPopupAction.cancel(),Mr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){pt(1===this.filter.length,"Popup operations only handle one event");const e=ar();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ut(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ut(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Rr.get())};e()}}Mr.currentPopupAction=null;const Or=new Map;class kr extends Dr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Or.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=xr(t),r=Lr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Or.set(this.auth._key(),e)}return this.bypassAuthState||Or.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Pr(e,t){Or.set(e._key(),t)}function Lr(e){return Kt(e._redirectPersistence)}function xr(e){return Jt("pendingRedirect",e.config.apiKey,e.name)}async function Br(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ue(e.app))return Promise.reject(ht(e));const r=yn(e),i=Sr(r,t),s=new kr(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Fr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Vr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ut(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ur(e))}saveEventToCache(e){this.cachedEventUids.add(Ur(e)),this.lastProcessedEventTime=Date.now()}}function Ur(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Vr(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const zr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hr=/^https?/;async function jr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Tt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Gr(r))return}catch(n){}lt(e,"unauthorized-domain")}function Gr(e){const t=mt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Hr.test(n))return!1;if(zr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Wr=new Et(3e4,6e4);function Yr(){const e=ur().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Xr(e){return new Promise((t,n)=>{var r,i,s;function o(){Yr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Yr(),n(ut(e,"network-request-failed"))},timeout:Wr.get()})}if(null===(i=null===(r=ur().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ur().gapi)||void 0===s?void 0:s.load)){const t=_n("iframefcb");return ur()[t]=()=>{gapi.load?o():n(ut(e,"network-request-failed"))},En(`${vn.gapiScript}?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw qr=null,e})}let qr=null;const Qr=new Et(5e3,15e3),Kr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$r=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zr(e){const t=e.config;ft(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_t(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:He},i=$r.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${C(r).slice(1)}`}async function Jr(e){const t=await function(e){return qr=qr||Xr(e),qr}(e),n=ur().gapi;return ft(n,e,"internal-error"),t.open({where:document.body,url:Zr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ut(e,"network-request-failed"),s=ur().setTimeout(()=>{r(i)},Qr.get());function o(){ur().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const ei={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ti{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ni(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ei),{width:r.toString(),height:i.toString(),top:s,left:o}),u=g().toLowerCase();n&&(a=sn(u)?"_blank":n),nn(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return cn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ti(null);const h=window.open(t||"",a,c);ft(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ti(h)}const ri="__/auth/handler",ii="emulator/auth/handler",si=encodeURIComponent("fac");async function oi(e,t,n,r,i,s){ft(e.config.authDomain,e,"auth-domain-config-required"),ft(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:He,eventId:i};if(t instanceof Fn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Un){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${si}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${ri}`;return _t(t,ii)}(e)}?${C(a).slice(1)}${u}`}const ai="webStorageSupport";const li=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sr,this._completeRedirectFn=Br,this._overrideRedirectResult=Pr}async _openPopup(e,t,n,r){var i;pt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ni(e,await oi(e,t,n,mt(),r),ar())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ur().location.href=e}(await oi(e,t,n,mt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(pt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Jr(e),n=new Fr(e);return t.register("authEvent",t=>{ft(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ai,{type:ai},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ai];void 0!==i&&t(!!i),lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dn()||rn()||cn()}};var ui="@firebase/auth",ci="1.7.9";class hi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const di=d("authIdTokenMaxAge")||300;let fi=null;var gi;vn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ut("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},gi="Browser",Be(new N("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ft(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:gi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fn(gi)},u=new mn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Be(new N("auth-internal",e=>(e=>new hi(e))(yn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),We(ui,ci,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(gi)),We(ui,ci,"esm2017");var pi,mi,yi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wi={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function g(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new p(a,a);if(h(e))return t=m(d(e),t),new p(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new p(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=w(n,1),s=w(r,1);for(r=w(r,2),n=w(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=w(r,1),n=w(n,1)}return t=f(e,i.j(t)),new p(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new p(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function w(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),p=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,g(n,2*i+2*s),n[2*i+2*s+1]+=l*m,g(n,2*i+2*s+1),n[2*i+2*s+1]+=f*p,g(n,2*i+2*s+1),n[2*i+2*s+2]+=l*p,g(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,mi=wi.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},pi=wi.Integer=r}).apply("undefined"!==typeof yi?yi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var vi,Ei,_i,Ci,Ii,Si,Ai,Ti,bi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ni={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof bi&&bi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function g(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function w(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function v(e){const t={};for(const n in e)t[n]=e[n];return t}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<E.length;t++)n=E[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function C(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function I(e){i.setTimeout(()=>{throw e},0)}function S(){var e=D;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var A=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let b,N=!1,D=new class{constructor(){this.h=this.g=null}add(e,t){const n=A.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);b=()=>{e.then(M)}};var M=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){I(n)}var t=A;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}N=!1};function O(){this.s=this.s,this.C=this.C}function k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:x[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,k);var x={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var B="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function H(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function j(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=j(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),W={};function Y(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);return null}return n=te(n),e&&e[B]?e.K(t,n,o(r)?!!r.capture:!!r,i):X(e,t,n,!1,r,i)}function X(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=J(e);if(l||(e[G]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=te(n),e&&e[B]?e.L(t,n,o(r)?!!r.capture:!!r,i):X(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[B]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=j(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=j(t,n,r,i)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[B])H(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(H(n,e),0==n.h&&(n.src=null,t[G]=null)):V(e)}}}function $(e){return e in W?W[e]:W[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function J(e){return(e=e[G])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new k(t,e);else if(t instanceof k)t.target=t.target||e;else{var i=t;_(t=new k(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&H(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,O),ne.prototype[B]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){O.call(this),this.h=e,this.g={}}h(le,O);var ue=[];function ce(e){w(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function ge(){}function pe(e){return e.h||(e.h=e.i())}function me(){}ge.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function we(){k.call(this,"d")}function ve(){k.call(this,"c")}h(we,k),h(ve,k);var Ee={},_e=null;function Ce(){return _e=_e||new ne}function Ie(e){k.call(this,Ee.La,e)}function Se(e){const t=Ce();re(t,new Ie(t))}function Ae(e,t){k.call(this,Ee.STAT_EVENT,e),this.stat=t}function Te(e){const t=Ce();re(t,new Ae(t,e))}function be(e,t){k.call(this,Ee.Ma,e),this.size=t}function Ne(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function De(){this.g=!0}function Re(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ee.La="serverreachability",h(Ie,k),Ee.STAT_EVENT="statevent",h(Ae,k),Ee.Ma="timingevent",h(be,k),De.prototype.xa=function(){this.g=!1},De.prototype.info=function(){};var Me,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ke={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}h(Pe,ge),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Me=new Pe;var Be={},Fe={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),je(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),At(n.i,"t",r),e.C=0,n=e.j.J,e.h=new xe,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=Y(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?v(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function He(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Be:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function je(e){e.S=Date.now()+e.I,Ge(e,e.I)}function Ge(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ne(u(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ye(e){0==e.j.G||e.J||ln(e.j,e)}function Xe(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Kt(n)}rn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ne(u(n.Za,n),6e3));if(1>=Ze(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!g(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(We(a),je(a)),r.g=o}else nn(r);0<n.i.length&&Zt(n)}else"stop"!=u[0]&&"close"!=u[0]||cn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cn(n,7):Qt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Se()}catch(c){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Yt(this.g)))){this.J||4!=d||7==t||Se(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Yt(this.g);e="";var s=r.length,o=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xe(this),Ye(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Te(12),Xe(this),Ye(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=He(this,a),e==Fe){4==d&&(this.s=4,Te(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Be){this.s=4,Te(15),Re(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Te(11))}}else Re(this.i,this.l,a,"[Invalid Chunked Response]"),Xe(this),Ye(this)}else Re(this.i,this.l,a,null),qe(this,a);4==d&&Xe(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,je(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(g(e[r]))continue;var n=C(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Xe(this),Ye(this)}}}catch(Di){}},Le.prototype.cancel=function(){this.J=!0,Xe(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),Te(17)),Xe(this),this.s=2,Ye(this)):Ge(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ke.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(Ct(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(It(this,t),At(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new _t(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ht(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?wt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,Et)),e.join("")};var pt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,wt=/[#\?]/g,vt=/[#\?@]/g,Et=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ct(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function It(e,t){Ct(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return Ct(e),t=Tt(e,t),e.g.has(t)}function At(e,t,n){It(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),d(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function bt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Nt(){this.g=new fe}function Dt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Rt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Mt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function kt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return w(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function xt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Bt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){Ct(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Ct(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Ct(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Ct(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Ct(this),this.i=null,St(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Rt,ge),Rt.prototype.g=function(){return new Mt(this.l,this.j)},Rt.prototype.i=(pt={},function(){return pt}),h(Mt,ne),(e=Mt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?kt(this):Pt(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,kt(this))},e.Qa=function(e){this.g&&(this.response=e,kt(this))},e.ga=function(){this.g&&kt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Bt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),jt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Ht(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Wt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){Gt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Gt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Yt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Oi){return null}}function Xt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function qt(e){this.Aa=0,this.i=[],this.j=new De,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xt("baseRetryDelayMs",5e3,e),this.cb=Xt("retryDelaySeedMs",1e4,e),this.Wa=Xt("forwardChannelMaxRetries",2,e),this.wa=Xt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new Nt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if($t(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),je(t)}hn(e)}function Kt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function $t(e){Kt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Zt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;b||R(),N||(b(),N=!0),D.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),en(e,r),e.m&&e.o&&xt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&w(e.H,function(e,n){ct(t,n,e)}),e.l&&rt({},function(e,n){ct(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Dt(a,e,"req"+n+"_")}catch(Di){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;b||R(),N||(b(),N=!0),D.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ne(u(e.Fa,e),un(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&xt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ce(),new be(r,n)),Zt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ne(u(e.Ga,e,t),un(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function un(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new De;if(i.Image){const r=new Image;r.onload=c(bt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(bt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(bt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(bt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new De;const n=new AbortController,r=setTimeout(()=>{n.abort(),bt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?bt(0,0,!0,t):bt(0,0,!1,t)}).catch(()=>{clearTimeout(r),bt(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),hn(e),$t(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Bt(new Rt({eb:n})):new Bt(e.pa)).Ha(e.J),t}function gn(){}function pn(){}function mn(e,t){ne.call(this),this.g=new qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!g(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!g(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function yn(e){we.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wn(){ve.call(this),this.status=1}function vn(e){this.g=e}(e=Bt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Me.g(),this.v=this.o?pe(this.o):pe(Me),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),Bt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ht(this):this.bb())},e.bb=function(){Ht(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Zt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=v(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&xt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||$e(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ne(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Kt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Kt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=gn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Qt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Zt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,mn.aa.N.call(this)},h(yn,we),h(wn,ve),h(vn,gn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new yn(e))},vn.prototype.sa=function(e){re(this.g,new wn)},vn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Ti=Ni.createWebChannelTransport=function(){return new pn},Ai=Ni.getStatEventTarget=function(){return Ce()},Si=Ni.Event=Ee,Ii=Ni.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,Ci=Ni.ErrorCode=Oe,ke.COMPLETE="complete",_i=Ni.EventType=ke,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ei=Ni.WebChannel=me,Ni.FetchXmlHttpFactory=Rt,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,vi=Ni.XhrIo=Bt}).apply("undefined"!==typeof bi?bi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Di="@firebase/firestore";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let Mi="10.14.0";const Oi=new F("@firebase/firestore");function ki(){return Oi.logLevel}function Pi(e){if(Oi.logLevel<=k.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Bi);Oi.debug(`Firestore (${Mi}): ${e}`,...i)}}function Li(e){if(Oi.logLevel<=k.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Bi);Oi.error(`Firestore (${Mi}): ${e}`,...i)}}function xi(e){if(Oi.logLevel<=k.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Bi);Oi.warn(`Firestore (${Mi}): ${e}`,...i)}}function Bi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Fi(){const e=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Li(e),new Error(e)}function Ui(e,t){e||Fi()}function Vi(e,t){return e}const zi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Hi extends y{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ji{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class Yi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xi{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ui(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ji,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Pi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Pi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ji)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Pi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ui("string"==typeof t.accessToken),new Gi(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ui(null===e||"string"==typeof e),new Ri(e)}}class qi{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qi{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new qi(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ki{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $i{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ui(void 0===this.o);const n=e=>{null!=e.error&&Pi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Pi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Pi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Pi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ui("string"==typeof e.token),this.R=e.token,new Ki(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Zi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ji{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Zi(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function es(e,t){return e<t?-1:e>t?1:0}function ts(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class ns{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Hi(zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Hi(zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Hi(zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Hi(zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ns.fromMillis(Date.now())}static fromDate(e){return ns.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ns(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?es(this.nanoseconds,e.nanoseconds):es(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rs{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rs(e)}static min(){return new rs(new ns(0,0))}static max(){return new rs(new ns(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class is{constructor(e,t,n){void 0===t?t=0:t>e.length&&Fi(),void 0===n?n=e.length-t:n>e.length-t&&Fi(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===is.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof is?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ss extends is{construct(e,t,n){return new ss(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Hi(zi.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new ss(e)}static emptyPath(){return new ss([])}}const os=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class as extends is{construct(e,t,n){return new as(e,t,n)}static isValidIdentifier(e){return os.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),as.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new as(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Hi(zi.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Hi(zi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Hi(zi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Hi(zi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new as(t)}static emptyPath(){return new as([])}}class ls{constructor(e){this.path=e}static fromPath(e){return new ls(ss.fromString(e))}static fromName(e){return new ls(ss.fromString(e).popFirst(5))}static empty(){return new ls(ss.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ss.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ss.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ls(new ss(e.slice()))}}class us{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}us.UNKNOWN_ID=-1;function cs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rs.fromTimestamp(1e9===r?new ns(n+1,0):new ns(n,r));return new ds(i,ls.empty(),t)}function hs(e){return new ds(e.readTime,e.key,-1)}class ds{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ds(rs.min(),ls.empty(),-1)}static max(){return new ds(rs.max(),ls.empty(),-1)}}function fs(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ls.comparator(e.documentKey,t.documentKey),0!==n?n:es(e.largestBatchId,t.largestBatchId))}const gs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ps{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ms(e){if(e.code!==zi.FAILED_PRECONDITION||e.message!==gs)throw e;Pi("LocalStore","Unexpectedly lost primary lease")}class ys{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ys((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ys?t:ys.resolve(t)}catch(e){return ys.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ys.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ys.reject(t)}static resolve(e){return new ys((t,n)=>{t(e)})}static reject(e){return new ys((t,n)=>{n(e)})}static waitFor(e){return new ys((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=ys.resolve(!1);for(const n of e)t=t.next(e=>e?ys.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ys((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new ys((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function ws(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vs(e){return"IndexedDbTransactionError"===e.name}class Es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function _s(e){return null==e}function Cs(e){return 0===e&&1/e==-1/0}function Is(e){return"number"==typeof e&&Number.isInteger(e)&&!Cs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Es.oe=-1;const Ss=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],As=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ts=As,bs=[...Ts,"indexConfiguration","indexState","indexEntries"];function Ns(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ds(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ms{constructor(e,t){this.comparator=e,this.root=t||ks.EMPTY}insert(e,t){return new Ms(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ks.BLACK,null,null))}remove(e){return new Ms(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ks.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Os(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Os(this.root,e,this.comparator,!1)}getReverseIterator(){return new Os(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Os(this.root,e,this.comparator,!0)}}class Os{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ks{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ks.RED,this.left=null!=r?r:ks.EMPTY,this.right=null!=i?i:ks.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ks(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ks.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ks.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fi();if(this.right.isRed())throw Fi();const e=this.left.check();if(e!==this.right.check())throw Fi();return e+(this.isRed()?0:1)}}ks.EMPTY=null,ks.RED=!0,ks.BLACK=!1,ks.EMPTY=new class{constructor(){this.size=0}get key(){throw Fi()}get value(){throw Fi()}get color(){throw Fi()}get left(){throw Fi()}get right(){throw Fi()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ks(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ps{constructor(e){this.comparator=e,this.data=new Ms(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ls(this.data.getIterator())}getIteratorFrom(e){return new Ls(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ps))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ps(this.comparator);return t.data=e,t}}class Ls{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class xs{constructor(e){this.fields=e,e.sort(as.comparator)}static empty(){return new xs([])}unionWith(e){let t=new Ps(as.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ts(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Bs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Bs("Invalid base64 string: "+e):e}}(e);return new Fs(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Fs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return es(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fs.EMPTY_BYTE_STRING=new Fs("");const Us=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(e){if(Ui(!!e),"string"==typeof e){let t=0;const n=Us.exec(e);if(Ui(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:zs(e.seconds),nanos:zs(e.nanos)}}function zs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hs(e){return"string"==typeof e?Fs.fromBase64String(e):Fs.fromUint8Array(e)}function js(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gs(e){const t=e.mapValue.fields.__previous_value__;return js(t)?Gs(t):t}function Ws(e){const t=Vs(e.mapValue.fields.__local_write_time__.timestampValue);return new ns(t.seconds,t.nanos)}class Ys{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Xs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xs&&e.projectId===this.projectId&&e.database===this.database}}const qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?js(e)?4:ho(e)?9007199254740991:uo(e)?10:11:Fi()}function Ks(e,t){if(e===t)return!0;const n=Qs(e);if(n!==Qs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ws(e).isEqual(Ws(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Vs(e.timestampValue),r=Vs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hs(e.bytesValue).isEqual(Hs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zs(e.geoPointValue.latitude)===zs(t.geoPointValue.latitude)&&zs(e.geoPointValue.longitude)===zs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return zs(e.integerValue)===zs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=zs(e.doubleValue),r=zs(t.doubleValue);return n===r?Cs(n)===Cs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ts(e.arrayValue.values||[],t.arrayValue.values||[],Ks);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ns(n)!==Ns(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ks(n[i],r[i])))return!1;return!0}(e,t);default:return Fi()}}function $s(e,t){return void 0!==(e.values||[]).find(e=>Ks(e,t))}function Zs(e,t){if(e===t)return 0;const n=Qs(e),r=Qs(t);if(n!==r)return es(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return es(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=zs(e.integerValue||e.doubleValue),r=zs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Js(e.timestampValue,t.timestampValue);case 4:return Js(Ws(e),Ws(t));case 5:return es(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Hs(e),r=Hs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=es(n[i],r[i]);if(0!==e)return e}return es(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=es(zs(e.latitude),zs(t.latitude));return 0!==n?n:es(zs(e.longitude),zs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return eo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,u=null===(r=a.value)||void 0===r?void 0:r.arrayValue,c=es((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:eo(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===qs.mapValue&&t===qs.mapValue)return 0;if(e===qs.mapValue)return 1;if(t===qs.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=es(r[o],s[o]);if(0!==e)return e;const t=Zs(n[r[o]],i[s[o]]);if(0!==t)return t}return es(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Fi()}}function Js(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return es(e,t);const n=Vs(e),r=Vs(t),i=es(n.seconds,r.seconds);return 0!==i?i:es(n.nanos,r.nanos)}function eo(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Zs(n[i],r[i]);if(e)return e}return es(n.length,r.length)}function to(e){return no(e)}function no(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Vs(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Hs(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ls.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=no(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${no(e.fields[i])}`;return n+"}"}(e.mapValue):Fi()}function ro(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function io(e){return!!e&&"integerValue"in e}function so(e){return!!e&&"arrayValue"in e}function oo(e){return!!e&&"nullValue"in e}function ao(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lo(e){return!!e&&"mapValue"in e}function uo(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function co(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ds(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=co(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=co(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ho(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class fo{constructor(e){this.value=e}static empty(){return new fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!lo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=co(t)}setAll(e){let t=as.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=co(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());lo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];lo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ds(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new fo(co(this.value))}}function go(e){const t=[];return Ds(e.fields,(e,n)=>{const r=new as([e]);if(lo(n)){const e=go(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new xs(t)}class po{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new po(e,0,rs.min(),rs.min(),rs.min(),fo.empty(),0)}static newFoundDocument(e,t,n,r){return new po(e,1,t,rs.min(),n,r,0)}static newNoDocument(e,t){return new po(e,2,t,rs.min(),rs.min(),fo.empty(),0)}static newUnknownDocument(e,t){return new po(e,3,t,rs.min(),rs.min(),fo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof po&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new po(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mo{constructor(e,t){this.position=e,this.inclusive=t}}function yo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ls.comparator(ls.fromName(o.referenceValue),n.key):Zs(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function wo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ks(e.position[n],t.position[n]))return!1;return!0}class vo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Eo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class _o{}class Co extends _o{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ro(e,t,n):"array-contains"===t?new Po(e,n):"in"===t?new Lo(e,n):"not-in"===t?new xo(e,n):"array-contains-any"===t?new Bo(e,n):new Co(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Mo(e,n):new Oo(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zs(t,this.value)):null!==t&&Qs(this.value)===Qs(t)&&this.matchesComparison(Zs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Io extends _o{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Io(e,t)}matches(e){return So(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function So(e){return"and"===e.op}function Ao(e){return To(e)&&So(e)}function To(e){for(const t of e.filters)if(t instanceof Io)return!1;return!0}function bo(e){if(e instanceof Co)return e.field.canonicalString()+e.op.toString()+to(e.value);if(Ao(e))return e.filters.map(e=>bo(e)).join(",");{const t=e.filters.map(e=>bo(e)).join(",");return`${e.op}(${t})`}}function No(e,t){return e instanceof Co?function(e,t){return t instanceof Co&&e.op===t.op&&e.field.isEqual(t.field)&&Ks(e.value,t.value)}(e,t):e instanceof Io?function(e,t){return t instanceof Io&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&No(n,t.filters[r]),!0)}(e,t):void Fi()}function Do(e){return e instanceof Co?function(e){return`${e.field.canonicalString()} ${e.op} ${to(e.value)}`}(e):e instanceof Io?function(e){return e.op.toString()+" {"+e.getFilters().map(Do).join(" ,")+"}"}(e):"Filter"}class Ro extends Co{constructor(e,t,n){super(e,t,n),this.key=ls.fromName(n.referenceValue)}matches(e){const t=ls.comparator(e.key,this.key);return this.matchesComparison(t)}}class Mo extends Co{constructor(e,t){super(e,"in",t),this.keys=ko("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Oo extends Co{constructor(e,t){super(e,"not-in",t),this.keys=ko("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ko(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ls.fromName(e.referenceValue))}class Po extends Co{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return so(t)&&$s(t.arrayValue,this.value)}}class Lo extends Co{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$s(this.value.arrayValue,t)}}class xo extends Co{constructor(e,t){super(e,"not-in",t)}matches(e){if($s(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$s(this.value.arrayValue,t)}}class Bo extends Co{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!so(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>$s(this.value.arrayValue,e))}}class Fo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Uo(e){return new Fo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Vo(e){const t=Vi(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>bo(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),_s(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>to(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>to(e)).join(",")),t.ue=e}return t.ue}function zo(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Eo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!No(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!wo(e.startAt,t.startAt)&&wo(e.endAt,t.endAt)}function Ho(e){return ls.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class jo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Go(e,t,n,r,i,s,o,a){return new jo(e,t,n,r,i,s,o,a)}function Wo(e){return new jo(e)}function Yo(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Xo(e){return null!==e.collectionGroup}function qo(e){const t=Vi(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ps(as.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new vo(r,n))}),e.has(as.keyField().canonicalString())||t.ce.push(new vo(as.keyField(),n))}return t.ce}function Qo(e){const t=Vi(e);return t.le||(t.le=Ko(t,qo(e))),t.le}function Ko(e,t){if("F"===e.limitType)return Uo(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new vo(e.field,t)});const n=e.endAt?new mo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mo(e.startAt.position,e.startAt.inclusive):null;return Uo(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function $o(e,t){const n=e.filters.concat([t]);return new jo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Zo(e,t,n){return new jo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Jo(e,t){return zo(Qo(e),Qo(t))&&e.limitType===t.limitType}function ea(e){return`${Vo(Qo(e))}|lt:${e.limitType}`}function ta(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Do(e)).join(", ")}]`),_s(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>to(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>to(e)).join(",")),`Target(${t})`}(Qo(e))}; limitType=${e.limitType})`}function na(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ls.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of qo(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=yo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,qo(e),t))&&!(e.endAt&&!function(e,t,n){const r=yo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,qo(e),t))}(e,t)}function ra(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ia(e){return(t,n)=>{let r=!1;for(const i of qo(e)){const e=sa(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function sa(e,t,n){const r=e.field.isKeyField()?ls.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Zs(r,i):Fi()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fi()}}class oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Rs(this.inner)}size(){return this.innerSize}}const aa=new Ms(ls.comparator);function la(){return aa}const ua=new Ms(ls.comparator);function ca(){let e=ua;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ha(e){let t=ua;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function da(){return ga()}function fa(){return ga()}function ga(){return new oa(e=>e.toString(),(e,t)=>e.isEqual(t))}const pa=new Ms(ls.comparator),ma=new Ps(ls.comparator);function ya(){let e=ma;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const wa=new Ps(es);function va(){return wa}function Ea(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cs(t)?"-0":t}}function _a(e){return{integerValue:""+e}}function Ca(e,t){return Is(t)?_a(t):Ea(e,t)}class Ia{constructor(){this._=void 0}}function Sa(e,t,n){return e instanceof ba?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&js(t)&&(t=Gs(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Na?Da(e,t):e instanceof Ra?Ma(e,t):function(e,t){const n=Ta(e,t),r=ka(n)+ka(e.Pe);return io(n)&&io(e.Pe)?_a(r):Ea(e.serializer,r)}(e,t)}function Aa(e,t,n){return e instanceof Na?Da(e,t):e instanceof Ra?Ma(e,t):n}function Ta(e,t){return e instanceof Oa?function(e){return io(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ba extends Ia{}class Na extends Ia{constructor(e){super(),this.elements=e}}function Da(e,t){const n=Pa(t);for(const r of e.elements)n.some(e=>Ks(e,r))||n.push(r);return{arrayValue:{values:n}}}class Ra extends Ia{constructor(e){super(),this.elements=e}}function Ma(e,t){let n=Pa(t);for(const r of e.elements)n=n.filter(e=>!Ks(e,r));return{arrayValue:{values:n}}}class Oa extends Ia{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ka(e){return zs(e.integerValue||e.doubleValue)}function Pa(e){return so(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class La{constructor(e,t){this.version=e,this.transformResults=t}}class xa{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xa}static exists(e){return new xa(void 0,e)}static updateTime(e){return new xa(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ba(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Fa{}function Ua(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Qa(e.key,xa.none()):new Ga(e.key,e.data,xa.none());{const n=e.data,r=fo.empty();let i=new Ps(as.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Wa(e.key,r,new xs(i.toArray()),xa.none())}}function Va(e,t,n){e instanceof Ga?function(e,t,n){const r=e.value.clone(),i=Xa(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wa?function(e,t,n){if(!Ba(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xa(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ya(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function za(e,t,n,r){return e instanceof Ga?function(e,t,n,r){if(!Ba(e.precondition,t))return n;const i=e.value.clone(),s=qa(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wa?function(e,t,n,r){if(!Ba(e.precondition,t))return n;const i=qa(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ya(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ba(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ha(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ta(r.transform,e||null);null!=i&&(null===n&&(n=fo.empty()),n.set(r.field,i))}return n||null}function ja(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ts(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Na&&t instanceof Na||e instanceof Ra&&t instanceof Ra?ts(e.elements,t.elements,Ks):e instanceof Oa&&t instanceof Oa?Ks(e.Pe,t.Pe):e instanceof ba&&t instanceof ba}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ga extends Fa{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wa extends Fa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ya(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xa(e,t,n){const r=new Map;Ui(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Aa(o,a,n[i]))}return r}function qa(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Sa(e,s,t))}return r}class Qa extends Fa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ka extends Fa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $a{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Va(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=za(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=za(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fa();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ua(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(rs.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ya())}isEqual(e){return this.batchId===e.batchId&&ts(this.mutations,e.mutations,(e,t)=>ja(e,t))&&ts(this.baseMutations,e.baseMutations,(e,t)=>ja(e,t))}}class Za{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ui(e.mutations.length===n.length);let r=pa;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Za(e,t,n,r)}}class Ja{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class el{constructor(e,t){this.count=e,this.unchangedNames=t}}var tl,nl;function rl(e){switch(e){default:return Fi();case zi.CANCELLED:case zi.UNKNOWN:case zi.DEADLINE_EXCEEDED:case zi.RESOURCE_EXHAUSTED:case zi.INTERNAL:case zi.UNAVAILABLE:case zi.UNAUTHENTICATED:return!1;case zi.INVALID_ARGUMENT:case zi.NOT_FOUND:case zi.ALREADY_EXISTS:case zi.PERMISSION_DENIED:case zi.FAILED_PRECONDITION:case zi.ABORTED:case zi.OUT_OF_RANGE:case zi.UNIMPLEMENTED:case zi.DATA_LOSS:return!0}}function il(e){if(void 0===e)return Li("GRPC error has no .code"),zi.UNKNOWN;switch(e){case tl.OK:return zi.OK;case tl.CANCELLED:return zi.CANCELLED;case tl.UNKNOWN:return zi.UNKNOWN;case tl.DEADLINE_EXCEEDED:return zi.DEADLINE_EXCEEDED;case tl.RESOURCE_EXHAUSTED:return zi.RESOURCE_EXHAUSTED;case tl.INTERNAL:return zi.INTERNAL;case tl.UNAVAILABLE:return zi.UNAVAILABLE;case tl.UNAUTHENTICATED:return zi.UNAUTHENTICATED;case tl.INVALID_ARGUMENT:return zi.INVALID_ARGUMENT;case tl.NOT_FOUND:return zi.NOT_FOUND;case tl.ALREADY_EXISTS:return zi.ALREADY_EXISTS;case tl.PERMISSION_DENIED:return zi.PERMISSION_DENIED;case tl.FAILED_PRECONDITION:return zi.FAILED_PRECONDITION;case tl.ABORTED:return zi.ABORTED;case tl.OUT_OF_RANGE:return zi.OUT_OF_RANGE;case tl.UNIMPLEMENTED:return zi.UNIMPLEMENTED;case tl.DATA_LOSS:return zi.DATA_LOSS;default:return Fi()}}(nl=tl||(tl={}))[nl.OK=0]="OK",nl[nl.CANCELLED=1]="CANCELLED",nl[nl.UNKNOWN=2]="UNKNOWN",nl[nl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nl[nl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nl[nl.NOT_FOUND=5]="NOT_FOUND",nl[nl.ALREADY_EXISTS=6]="ALREADY_EXISTS",nl[nl.PERMISSION_DENIED=7]="PERMISSION_DENIED",nl[nl.UNAUTHENTICATED=16]="UNAUTHENTICATED",nl[nl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nl[nl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nl[nl.ABORTED=10]="ABORTED",nl[nl.OUT_OF_RANGE=11]="OUT_OF_RANGE",nl[nl.UNIMPLEMENTED=12]="UNIMPLEMENTED",nl[nl.INTERNAL=13]="INTERNAL",nl[nl.UNAVAILABLE=14]="UNAVAILABLE",nl[nl.DATA_LOSS=15]="DATA_LOSS";let sl=null;function ol(){return new TextEncoder}const al=new pi([4294967295,4294967295],0);function ll(e){const t=ol().encode(e),n=new mi;return n.update(t),new Uint8Array(n.digest())}function ul(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new pi([n,r],0),new pi([i,s],0)]}class cl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hl(`Invalid padding: ${t}`);if(n<0)throw new hl(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new hl(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new hl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=pi.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(pi.fromNumber(n)));return 1===r.compare(al)&&(r=new pi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=ll(e),[n,r]=ul(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new cl(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=ll(e),[n,r]=ul(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dl{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new dl(rs.min(),r,new Ms(es),la(),ya())}}class fl{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fl(n,t,ya(),ya(),ya())}}class gl{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class pl{constructor(e,t){this.targetId=e,this.me=t}}class ml{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fs.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yl{constructor(){this.fe=0,this.ge=El(),this.pe=Fs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ya(),t=ya(),n=ya();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fi()}}),new fl(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=El()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ui(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class wl{constructor(e){this.Le=e,this.Be=new Map,this.ke=la(),this.qe=vl(),this.Qe=new Ms(es)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Fi()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Ho(i))if(0===n){const e=new ls(i.path);this.Ue(t,e,po.newNoDocument(e,rs.min()))}else Ui(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==sl||sl.et(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Hs(n).toUint8Array()}catch(e){if(e instanceof Bs)return xi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new cl(s,r,i)}catch(e){return xi(e instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Ho(i.target)){const t=new ls(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,po.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=ya();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new dl(e,t,this.Qe,this.ke,n);return this.ke=la(),this.qe=vl(),this.Qe=new Ms(es),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new yl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ps(es),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Pi("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yl),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function vl(){return new Ms(ls.comparator)}function El(){return new Ms(ls.comparator)}const _l={asc:"ASCENDING",desc:"DESCENDING"},Cl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Il={and:"AND",or:"OR"};class Sl{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Al(e,t){return e.useProto3Json||_s(t)?t:{value:t}}function Tl(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Nl(e,t){return Tl(e,t.toTimestamp())}function Dl(e){return Ui(!!e),rs.fromTimestamp(function(e){const t=Vs(e);return new ns(t.seconds,t.nanos)}(e))}function Rl(e,t){return Ml(e,t).canonicalString()}function Ml(e,t){const n=function(e){return new ss(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ol(e){const t=ss.fromString(e);return Ui(Zl(t)),t}function kl(e,t){return Rl(e.databaseId,t.path)}function Pl(e,t){const n=Ol(t);if(n.get(1)!==e.databaseId.projectId)throw new Hi(zi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hi(zi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ls(Fl(n))}function Ll(e,t){return Rl(e.databaseId,t)}function xl(e){const t=Ol(e);return 4===t.length?ss.emptyPath():Fl(t)}function Bl(e){return new ss(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fl(e){return Ui(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ul(e,t,n){return{name:kl(e,t),fields:n.value.mapValue.fields}}function Vl(e,t){let n;if(t instanceof Ga)n={update:Ul(e,t.key,t.value)};else if(t instanceof Qa)n={delete:kl(e,t.key)};else if(t instanceof Wa)n={update:Ul(e,t.key,t.data),updateMask:$l(t.fieldMask)};else{if(!(t instanceof Ka))return Fi();n={verify:kl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ba)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Na)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ra)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Oa)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Fi()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Nl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fi()}(e,t.precondition)),n}function zl(e,t){return{documents:[Ll(e,t.path)]}}function Hl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ll(e,i);const s=function(e){if(0!==e.length)return Kl(Io.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:ql(e.field),direction:Wl(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Al(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function jl(e){let t=xl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ui(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Gl(e);return t instanceof Io&&Ao(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new vo(Ql(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,_s(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new mo(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new mo(n,t)}(n.endAt)),Go(t,i,o,s,a,"F",l,u)}function Gl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ql(e.unaryFilter.field);return Co.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ql(e.unaryFilter.field);return Co.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ql(e.unaryFilter.field);return Co.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ql(e.unaryFilter.field);return Co.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fi()}}(e):void 0!==e.fieldFilter?function(e){return Co.create(Ql(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fi()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Io.create(e.compositeFilter.filters.map(e=>Gl(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Fi()}}(e.compositeFilter.op))}(e):Fi()}function Wl(e){return _l[e]}function Yl(e){return Cl[e]}function Xl(e){return Il[e]}function ql(e){return{fieldPath:e.canonicalString()}}function Ql(e){return as.fromServerFormat(e.fieldPath)}function Kl(e){return e instanceof Co?function(e){if("=="===e.op){if(ao(e.value))return{unaryFilter:{field:ql(e.field),op:"IS_NAN"}};if(oo(e.value))return{unaryFilter:{field:ql(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ao(e.value))return{unaryFilter:{field:ql(e.field),op:"IS_NOT_NAN"}};if(oo(e.value))return{unaryFilter:{field:ql(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(e.field),op:Yl(e.op),value:e.value}}}(e):e instanceof Io?function(e){const t=e.getFilters().map(e=>Kl(e));return 1===t.length?t[0]:{compositeFilter:{op:Xl(e.op),filters:t}}}(e):Fi()}function $l(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Jl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rs.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rs.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Fs.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class eu{constructor(e){this.ct=e}}function tu(e){const t=jl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zo(t,t.limit,"L"):t}class nu{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(zs(e.integerValue));else if("doubleValue"in e){const n=zs(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Cs(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Vs(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Hs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?ho(e)?this.dt(t,Number.MAX_SAFE_INTEGER):uo(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Fi()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(zs(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),ls.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}nu.vt=new nu;class ru{constructor(){this.un=new iu}addToCollectionParentIndex(e,t){return this.un.add(t),ys.resolve()}getCollectionParents(e,t){return ys.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ys.resolve()}deleteFieldIndex(e,t){return ys.resolve()}deleteAllFieldIndexes(e){return ys.resolve()}createTargetIndexes(e,t){return ys.resolve()}getDocumentsMatchingTarget(e,t){return ys.resolve(null)}getIndexType(e,t){return ys.resolve(0)}getFieldIndexes(e,t){return ys.resolve([])}getNextCollectionGroupToUpdate(e){return ys.resolve(null)}getMinOffset(e,t){return ys.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return ys.resolve(ds.min())}updateCollectionGroup(e,t,n){return ys.resolve()}updateIndexEntries(e,t){return ys.resolve()}}class iu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ps(ss.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ps(ss.comparator)).toArray()}}new Uint8Array(0);class su{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new su(e,su.DEFAULT_COLLECTION_PERCENTILE,su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}su.DEFAULT_COLLECTION_PERCENTILE=10,su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,su.DEFAULT=new su(41943040,su.DEFAULT_COLLECTION_PERCENTILE,su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),su.DISABLED=new su(-1,0,0);class ou{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ou(0)}static kn(){return new ou(-1)}}class au{constructor(){this.changes=new oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,po.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ys.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&za(n.mutation,e,xs.empty(),ns.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ya()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ya();const r=da();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ca();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=da();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ya()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=la();const s=ga(),o=ga();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Wa)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),za(o.mutation,t,o.mutation.getFieldMask(),ns.now())):s.set(t.key,xs.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new lu(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=ga();let r=new Ms((e,t)=>e-t),i=ya();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||xs.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ya()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=fa();l.forEach(e=>{if(!i.has(e)){const r=Ua(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return ys.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ls.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xo(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ys.resolve(da());let o=-1,a=i;return s.next(t=>ys.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ys.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,ya())).next(e=>({batchId:o,changes:ha(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ls(t)).next(e=>{let t=ca();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ca();return this.indexManager.getCollectionParents(e,i).next(o=>ys.forEach(o,o=>{const a=function(e,t){return new jo(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,po.newInvalidDocument(r)))});let n=ca();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&za(s.mutation,r,xs.empty(),ns.now()),na(t,r)&&(n=n.insert(e,r))}),n})}}class cu{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ys.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Dl(e.createTime)}}(t)),ys.resolve()}getNamedQuery(e,t){return ys.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:tu(e.bundledQuery),readTime:Dl(e.readTime)}}(t)),ys.resolve()}}class hu{constructor(){this.overlays=new Ms(ls.comparator),this.Ir=new Map}getOverlay(e,t){return ys.resolve(this.overlays.get(t))}getOverlays(e,t){const n=da();return ys.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),ys.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),ys.resolve()}getOverlaysForCollection(e,t,n){const r=da(),i=t.length+1,s=new ls(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ys.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ms((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=da(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=da(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return ys.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ja(t,n));let i=this.Ir.get(t);void 0===i&&(i=ya(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class du{constructor(){this.sessionToken=Fs.EMPTY_BYTE_STRING}getSessionToken(e){return ys.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ys.resolve()}}class fu{constructor(){this.Tr=new Ps(gu.Er),this.dr=new Ps(gu.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new gu(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new gu(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new ls(new ss([])),n=new gu(t,e),r=new gu(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ls(new ss([])),n=new gu(t,e),r=new gu(t,e+1);let i=ya();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new gu(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class gu{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ls.comparator(e.key,t.key)||es(e.wr,t.wr)}static Ar(e,t){return es(e.wr,t.wr)||ls.comparator(e.key,t.key)}}class pu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ps(gu.Er)}checkEmpty(e){return ys.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new $a(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new gu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ys.resolve(s)}lookupMutationBatch(e,t){return ys.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return ys.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ys.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return ys.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new gu(t,0),r=new gu(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),ys.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ps(es);return t.forEach(e=>{const t=new gu(e,0),r=new gu(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),ys.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ls.isDocumentKey(i)||(i=i.child(""));const s=new gu(new ls(i),0);let o=new Ps(es);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)},s),ys.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ui(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return ys.forEach(t.mutations,r=>{const i=new gu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new gu(t,0),r=this.br.firstAfterOrEqual(n);return ys.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ys.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mu{constructor(e){this.Mr=e,this.docs=new Ms(ls.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ys.resolve(n?n.document.mutableCopy():po.newInvalidDocument(t))}getEntries(e,t){let n=la();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():po.newInvalidDocument(e))}),ys.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=la();const s=t.path,o=new ls(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||fs(hs(o),n)<=0||(r.has(o.key)||na(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ys.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Fi()}Or(e,t){return ys.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new yu(this)}getSize(e){return ys.resolve(this.size)}}class yu extends au{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),ys.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class wu{constructor(e){this.persistence=e,this.Nr=new oa(e=>Vo(e),zo),this.lastRemoteSnapshotVersion=rs.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fu,this.targetCount=0,this.kr=ou.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),ys.resolve()}getLastRemoteSnapshotVersion(e){return ys.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ys.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ys.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),ys.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ou(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ys.resolve()}updateTargetData(e,t){return this.Kn(t),ys.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ys.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),ys.waitFor(i).next(()=>r)}getTargetCount(e){return ys.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return ys.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),ys.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ys.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ys.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return ys.resolve(n)}containsKey(e,t){return ys.resolve(this.Br.containsKey(t))}}class vu{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Es(0),this.Kr=!1,this.Kr=!0,this.$r=new du,this.referenceDelegate=e(this),this.Ur=new wu(this),this.indexManager=new ru,this.remoteDocumentCache=function(e){return new mu(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new eu(t),this.Gr=new cu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new pu(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Pi("MemoryPersistence","Starting transaction:",e);const r=new Eu(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return ys.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Eu extends ps{constructor(e){super(),this.currentSequenceNumber=e}}class _u{constructor(e){this.persistence=e,this.Jr=new fu,this.Yr=null}static Zr(e){return new _u(e)}get Xr(){if(this.Yr)return this.Yr;throw Fi()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),ys.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),ys.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ys.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ys.forEach(this.Xr,n=>{const r=ls.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,rs.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ys.or([()=>ys.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Cu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=ya(),r=ya();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Cu(e,t.fromCache,n,r)}}class Iu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Su{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=p()?8:ws(g())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Iu;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(ki()<=k.DEBUG&&Pi("QueryEngine","SDK will not create cache indexes for query:",ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ys.resolve()):(ki()<=k.DEBUG&&Pi("QueryEngine","Query:",ta(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(ki()<=k.DEBUG&&Pi("QueryEngine","The SDK decides to create cache indexes for query:",ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qo(t))):ys.resolve())}Yi(e,t){if(Yo(t))return ys.resolve(null);let n=Qo(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Zo(t,null,"F"),n=Qo(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ya(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,Zo(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return Yo(t)||r.isEqual(rs.min())?ys.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?ys.resolve(null):(ki()<=k.DEBUG&&Pi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ta(t)),this.rs(e,s,t,cs(r,-1)).next(e=>e))})}ts(e,t){let n=new Ps(ia(e));return t.forEach((t,r)=>{na(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return ki()<=k.DEBUG&&Pi("QueryEngine","Using full collection scan to execute query:",ta(t)),this.Ji.getDocumentsMatchingQuery(e,t,ds.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Au{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Ms(es),this._s=new oa(e=>Vo(e),zo),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uu(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Tu(e,t,n,r){return new Au(e,t,n,r)}async function bu(e,t){const n=Vi(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=ya();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Nu(e){const t=Vi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Du(e,t,n){let r=ya(),i=ya();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=la();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(rs.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Pi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ps:r,Is:i}})}function Ru(e,t){const n=Vi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Mu(e,t){const n=Vi(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,ys.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new Jl(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Ou(e,t,n){const r=Vi(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!vs(e))throw e;Pi("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function ku(e,t,n){const r=Vi(e);let i=rs.min(),s=ya();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Vi(e),i=r._s.get(n);return void 0!==i?ys.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Qo(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:rs.min(),n?s:ya())).next(e=>(Pu(r,ra(t),e),{documents:e,Ts:s})))}function Pu(e,t,n){let r=e.us.get(t)||rs.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Lu{constructor(){this.activeTargetIds=va()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xu{constructor(){this.so=new Lu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bu{_o(e){}shutdown(){}}class Fu{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Pi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Pi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Uu=null;function Vu(){return null===Uu?Uu=268435456+Math.round(2147483648*Math.random()):Uu++,"0x"+Uu.toString(16)}const zu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hu{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const ju="WebChannelConnection";class Gu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=Vu(),o=this.xo(e,t.toUriEncodedString());Pi("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then(t=>(Pi("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw xi("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=zu[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Vu();return new Promise((s,o)=>{const a=new vi;a.setWithCredentials(!0),a.listenOnce(_i.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ci.NO_ERROR:const t=a.getResponseJson();Pi(ju,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Ci.TIMEOUT:Pi(ju,`RPC '${e}' ${i} timed out`),o(new Hi(zi.DEADLINE_EXCEEDED,"Request time out"));break;case Ci.HTTP_ERROR:const n=a.getStatus();if(Pi(ju,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(zi).indexOf(t)>=0?t:zi.UNKNOWN}(t.status);o(new Hi(e,t.message))}else o(new Hi(zi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Hi(zi.UNAVAILABLE,"Connection failed."));break;default:Fi()}}finally{Pi(ju,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);Pi(ju,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Vu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ti(),o=Ai(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Pi(ju,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Hu({Io:t=>{d?Pi(ju,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Pi(ju,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),Pi(ju,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},To:()=>c.close()}),g=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(c,Ei.EventType.OPEN,()=>{d||(Pi(ju,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),g(c,Ei.EventType.CLOSE,()=>{d||(d=!0,Pi(ju,`RPC '${e}' stream ${r} transport closed`),f.So())}),g(c,Ei.EventType.ERROR,t=>{d||(d=!0,xi(ju,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Hi(zi.UNAVAILABLE,"The operation could not be completed")))}),g(c,Ei.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];Ui(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Pi(ju,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=tl[e];if(void 0!==t)return il(t)}(t),i=o.message;void 0===n&&(n=zi.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.So(new Hi(n,i)),c.close()}else Pi(ju,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}}),g(o,Si.STAT_EVENT,t=>{t.stat===Ii.PROXY?Pi(ju,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ii.NOPROXY&&Pi(ju,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function Wu(){return"undefined"!=typeof document?document:null}function Yu(e){return new Sl(e,!0)}class Xu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Pi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class qu{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Xu(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===zi.RESOURCE_EXHAUSTED?(Li(t.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===zi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Hi(zi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Pi("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Pi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qu extends qu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fi()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ui(void 0===t||"string"==typeof t),Fs.fromBase64String(t||"")):(Ui(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Fs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?zi.UNKNOWN:il(e.code);return new Hi(t,e.message||"")}(o);n=new ml(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Pl(e,r.document.name),s=Dl(r.document.updateTime),o=r.document.createTime?Dl(r.document.createTime):rs.min(),a=new fo({mapValue:{fields:r.document.fields}}),l=po.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new gl(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Pl(e,r.document),s=r.readTime?Dl(r.readTime):rs.min(),o=po.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gl([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Pl(e,r.document),s=r.removedTargetIds||[];n=new gl([],s,i,null)}else{if(!("filter"in t))return Fi();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new el(r,i),o=e.targetId;n=new pl(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return rs.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?rs.min():t.readTime?Dl(t.readTime):rs.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Bl(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ho(r)?{documents:zl(e,r)}:{query:Hl(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=bl(e,t.resumeToken);const r=Al(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(rs.min())>0){n.readTime=Tl(e,t.snapshotVersion.toTimestamp());const r=Al(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fi()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Bl(this.serializer),t.removeTarget=e,this.a_(t)}}class Ku extends qu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ui(!!e.streamToken),this.lastStreamToken=e.streamToken,Ui(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ui(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Ui(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Dl(e.updateTime):Dl(t);return n.isEqual(rs.min())&&(n=Dl(t)),new La(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Dl(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Bl(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Vl(this.serializer,e))};this.a_(t)}}class $u extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Hi(zi.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Mo(e,Ml(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Hi(zi.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Lo(e,Ml(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Hi(zi.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Zu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Li(t),this.D_=!1):Pi("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Ju{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{lc(this)&&(Pi("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Vi(e);t.L_.add(4),await tc(t),t.q_.set("Unknown"),t.L_.delete(4),await ec(t)}(this))})}),this.q_=new Zu(n,r)}}async function ec(e){if(lc(e))for(const t of e.B_)await t(!0)}async function tc(e){for(const t of e.B_)await t(!1)}function nc(e,t){const n=Vi(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),ac(n)?oc(n):bc(n).r_()&&ic(n,t))}function rc(e,t){const n=Vi(e),r=bc(n);n.N_.delete(t),r.r_()&&sc(n,t),0===n.N_.size&&(r.r_()?r.o_():lc(n)&&n.q_.set("Unknown"))}function ic(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rs.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}bc(e).A_(t)}function sc(e,t){e.Q_.xe(t),bc(e).R_(t)}function oc(e){e.Q_=new wl({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),bc(e).start(),e.q_.v_()}function ac(e){return lc(e)&&!bc(e).n_()&&e.N_.size>0}function lc(e){return 0===Vi(e).L_.size}function uc(e){e.Q_=void 0}async function cc(e){e.q_.set("Online")}async function hc(e){e.N_.forEach((t,n)=>{ic(e,t)})}async function dc(e,t){uc(e),ac(e)?(e.q_.M_(t),oc(e)):e.q_.set("Unknown")}async function fc(e,t,n){if(e.q_.set("Online"),t instanceof ml&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Pi("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await gc(e,n)}else if(t instanceof gl?e.Q_.Ke(t):t instanceof pl?e.Q_.He(t):e.Q_.We(t),!n.isEqual(rs.min()))try{const t=await Nu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Fs.EMPTY_BYTE_STRING,r.snapshotVersion)),sc(e,t);const i=new Jl(r.target,t,n,r.sequenceNumber);ic(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Pi("RemoteStore","Failed to raise snapshot:",t),await gc(e,t)}}async function gc(e,t,n){if(!vs(t))throw t;e.L_.add(1),await tc(e),e.q_.set("Offline"),n||(n=()=>Nu(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Pi("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await ec(e)})}function pc(e,t){return t().catch(n=>gc(e,n,t))}async function mc(e){const t=Vi(e),n=Nc(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;yc(t);)try{const e=await Ru(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,wc(t,e)}catch(e){await gc(t,e)}vc(t)&&Ec(t)}function yc(e){return lc(e)&&e.O_.length<10}function wc(e,t){e.O_.push(t);const n=Nc(e);n.r_()&&n.V_&&n.m_(t.mutations)}function vc(e){return lc(e)&&!Nc(e).n_()&&e.O_.length>0}function Ec(e){Nc(e).start()}async function _c(e){Nc(e).p_()}async function Cc(e){const t=Nc(e);for(const n of e.O_)t.m_(n.mutations)}async function Ic(e,t,n){const r=e.O_.shift(),i=Za.from(r,t,n);await pc(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await mc(e)}async function Sc(e,t){t&&Nc(e).V_&&await async function(e,t){if(function(e){return rl(e)&&e!==zi.ABORTED}(t.code)){const n=e.O_.shift();Nc(e).s_(),await pc(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await mc(e)}}(e,t),vc(e)&&Ec(e)}async function Ac(e,t){const n=Vi(e);n.asyncQueue.verifyOperationInProgress(),Pi("RemoteStore","RemoteStore received new credentials");const r=lc(n);n.L_.add(3),await tc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await ec(n)}async function Tc(e,t){const n=Vi(e);t?(n.L_.delete(2),await ec(n)):t||(n.L_.add(2),await tc(n),n.q_.set("Unknown"))}function bc(e){return e.K_||(e.K_=function(e,t,n){const r=Vi(e);return r.w_(),new Qu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:cc.bind(null,e),Ro:hc.bind(null,e),mo:dc.bind(null,e),d_:fc.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),ac(e)?oc(e):e.q_.set("Unknown")):(await e.K_.stop(),uc(e))})),e.K_}function Nc(e){return e.U_||(e.U_=function(e,t,n){const r=Vi(e);return r.w_(),new Ku(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_c.bind(null,e),mo:Sc.bind(null,e),f_:Cc.bind(null,e),g_:Ic.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await mc(e)):(await e.U_.stop(),e.O_.length>0&&(Pi("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class Dc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Dc(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hi(zi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rc(e,t){if(Li("AsyncQueue",`${t}: ${e}`),vs(e))return new Hi(zi.UNAVAILABLE,`${t}: ${e}`);throw e}class Mc{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ls.comparator(t.key,n.key):(e,t)=>ls.comparator(e.key,t.key),this.keyedMap=ca(),this.sortedSet=new Ms(this.comparator)}static emptySet(e){return new Mc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Mc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Oc{constructor(){this.W_=new Ms(ls.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Fi():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class kc{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new kc(e,t,Mc.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Pc{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Lc{constructor(){this.queries=xc(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Vi(e),r=n.queries;n.queries=xc(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Hi(zi.ABORTED,"Firestore shutting down"))}}function xc(){return new oa(e=>ea(e),Jo)}async function Bc(e,t){const n=Vi(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Pc,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Rc(e,`Initialization of query '${ta(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&zc(n)}async function Fc(e,t){const n=Vi(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Uc(e,t){const n=Vi(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&zc(n)}function Vc(e,t,n){const r=Vi(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function zc(e){e.Y_.forEach(e=>{e.next()})}var Hc,jc;(jc=Hc||(Hc={})).ea="default",jc.Cache="cache";class Gc{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new kc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hc.Cache}}class Wc{constructor(e){this.key=e}}class Yc{constructor(e){this.key=e}}class Xc{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ya(),this.mutatedKeys=ya(),this.Aa=ia(e),this.Ra=new Mc(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Oc,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=na(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.ga(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Aa(c,a)>0||l&&this.Aa(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fi()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new kc(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Oc,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ya(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Yc(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Wc(n))}),t}ba(e){this.Ta=e.Ts,this.da=ya();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return kc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class qc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Qc{constructor(e){this.key=e,this.va=!1}}class Kc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new oa(e=>ea(e),Jo),this.Ma=new Map,this.xa=new Set,this.Oa=new Ms(ls.comparator),this.Na=new Map,this.La=new fu,this.Ba={},this.ka=new Map,this.qa=ou.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function $c(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=wh(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Jc(r,t,n,!0),i}async function Zc(e,t){const n=wh(e);await Jc(n,t,!0,!1)}async function Jc(e,t,n,r){const i=await Mu(e.localStore,Qo(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await eh(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&nc(e.remoteStore,i),a}async function eh(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await ku(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return dh(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await ku(e.localStore,t,!0),o=new Xc(t,s.Ts),a=o.ma(s.documents),l=fl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);dh(e,n,u.wa);const c=new qc(t,n,o);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),u.snapshot}async function th(e,t,n){const r=Vi(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!Jo(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ou(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rc(r.remoteStore,i.targetId),ch(r,i.targetId)}).catch(ms)):(ch(r,i.targetId),await Ou(r.localStore,i.targetId,!0))}async function nh(e,t){const n=Vi(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rc(n.remoteStore,r.targetId))}async function rh(e,t){const n=Vi(e);try{const e=await function(e,t){const n=Vi(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Fs.EMPTY_BYTE_STRING,rs.min()).withLastLimboFreeSnapshotVersion(rs.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Ur.updateTargetData(e,u))});let a=la(),l=ya();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Du(e,s,t.documentUpdates).next(e=>{a=e.Ps,l=e.Is})),!r.isEqual(rs.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return ys.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Ui(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Ui(r.va):e.removedDocuments.size>0&&(Ui(r.va),r.va=!1))}),await ph(n,e,t)}catch(e){await ms(e)}}function ih(e,t,n){const r=Vi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Vi(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&zc(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sh(e,t,n){const r=Vi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new Ms(ls.comparator);e=e.insert(s,po.newNoDocument(s,rs.min()));const n=ya().add(s),i=new dl(rs.min(),new Map,new Ms(es),e,n);await rh(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),gh(r)}else await Ou(r.localStore,t,!1).then(()=>ch(r,t,n)).catch(ms)}async function oh(e,t){const n=Vi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Vi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ys.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Ui(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ya();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);uh(n,r,null),lh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ph(n,e)}catch(e){await ms(e)}}async function ah(e,t,n){const r=Vi(e);try{const e=await function(e,t){const n=Vi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ui(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);uh(r,t,n),lh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ph(r,e)}catch(n){await ms(n)}}function lh(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function uh(e,t,n){const r=Vi(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function ch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||hh(e,t)})}function hh(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(rc(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),gh(e))}function dh(e,t,n){for(const r of n)r instanceof Wc?(e.La.addReference(r.key,t),fh(e,r)):r instanceof Yc?(Pi("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||hh(e,r.key)):Fi()}function fh(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Pi("SyncEngine","New document in limbo: "+n),e.xa.add(r),gh(e))}function gh(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new ls(ss.fromString(t)),r=e.qa.next();e.Na.set(r,new Qc(n)),e.Oa=e.Oa.insert(n,r),nc(e.remoteStore,new Jl(Qo(Wo(n.path)),r,"TargetPurposeLimboResolution",Es.oe))}}async function ph(e,t,n){const r=Vi(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((e,a)=>{o.push(r.Ka(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Cu.Wi(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=Vi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ys.forEach(t,t=>ys.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ys.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!vs(e))throw e;Pi("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function mh(e,t){const n=Vi(e);if(!n.currentUser.isEqual(t)){Pi("SyncEngine","User change. New user:",t.toKey());const e=await bu(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Hi(zi.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ph(n,e.hs)}}function yh(e,t){const n=Vi(e),r=n.Na.get(t);if(r&&r.va)return ya().add(r.key);{let e=ya();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function wh(e){const t=Vi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sh.bind(null,t),t.Ca.d_=Uc.bind(null,t.eventManager),t.Ca.$a=Vc.bind(null,t.eventManager),t}function vh(e){const t=Vi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ah.bind(null,t),t}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Tu(this.persistence,new Su,e.initialUser,this.serializer)}Ga(e){return new vu(_u.Zr,this.serializer)}Wa(e){return new xu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class _h{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ih(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=mh.bind(null,this.syncEngine),await Tc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Lc}createDatastore(e){const t=Yu(e.databaseInfo.databaseId),n=function(e){return new Gu(e)}(e.databaseInfo);return function(e,t,n,r){return new $u(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ju(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ih(this.syncEngine,e,0),Fu.D()?new Fu:new Bu)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Kc(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Vi(e);Pi("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await tc(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}_h.provider={build:()=>new _h};class Ch{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Ih{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ri.UNAUTHENTICATED,this.clientId=Ji.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Pi("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Pi("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Rc(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Sh(e,t){e.asyncQueue.verifyOperationInProgress(),Pi("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await bu(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ah(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Th(e);Pi("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ac(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ac(t.remoteStore,n)),e._onlineComponents=t}async function Th(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Pi("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===zi.FAILED_PRECONDITION||e.code===zi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;xi("Error using user provided cache. Falling back to memory cache: "+n),await Sh(e,new Eh)}}else Pi("FirestoreClient","Using default OfflineComponentProvider"),await Sh(e,new Eh);return e._offlineComponents}async function bh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Pi("FirestoreClient","Using user provided OnlineComponentProvider"),await Ah(e,e._uninitializedComponentsProvider._online)):(Pi("FirestoreClient","Using default OnlineComponentProvider"),await Ah(e,new _h))),e._onlineComponents}function Nh(e){return bh(e).then(e=>e.syncEngine)}async function Dh(e){const t=await bh(e),n=t.eventManager;return n.onListen=$c.bind(null,t.syncEngine),n.onUnlisten=th.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Zc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=nh.bind(null,t.syncEngine),n}function Rh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ji;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Ch({next:a=>{s.Za(),t.enqueueAndForget(()=>Fc(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Hi(zi.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Hi(zi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Gc(Wo(n.path),s,{includeMetadataChanges:!0,_a:!0});return Bc(e,o)}(await Dh(e),e.asyncQueue,t,n,r)),r.promise}function Mh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ji;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Ch({next:n=>{s.Za(),t.enqueueAndForget(()=>Fc(e,o)),n.fromCache&&"server"===r.source?i.reject(new Hi(zi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Gc(n,s,{includeMetadataChanges:!0,_a:!0});return Bc(e,o)}(await Dh(e),e.asyncQueue,t,n,r)),r.promise}function Oh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const kh=new Map;function Ph(e,t,n){if(!n)throw new Hi(zi.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Lh(e){if(!ls.isDocumentKey(e))throw new Hi(zi.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function xh(e){if(ls.isDocumentKey(e))throw new Hi(zi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Bh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Fi()}function Fh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hi(zi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bh(e);throw new Hi(zi.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Uh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Hi(zi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Hi(zi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Hi(zi.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Oh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Hi(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Hi(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Hi(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Hi(zi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Hi(zi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uh(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Wi;switch(e.type){case"firstParty":return new Qi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hi(zi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kh.get(e);t&&(Pi("ComponentProvider","Removing Datastore"),kh.delete(e),t.terminate())}(this),Promise.resolve()}}function zh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Fh(e,Vh))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ri.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Hi(zi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ri(s)}e._authCredentials=new Yi(new Gi(t,n))}}class Hh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hh(this.firestore,e,this._query)}}class jh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jh(this.firestore,e,this._key)}}class Gh extends Hh{constructor(e,t,n){super(e,t,Wo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jh(this.firestore,null,new ls(e))}withConverter(e){return new Gh(this.firestore,e,this._path)}}function Wh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=b(e),1===arguments.length&&(t=Ji.newId()),Ph("doc","path",t),e instanceof Vh){const n=ss.fromString(t,...r);return Lh(n),new jh(e,null,new ls(n))}{if(!(e instanceof jh||e instanceof Gh))throw new Hi(zi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ss.fromString(t,...r));return Lh(n),new jh(e.firestore,e instanceof Gh?e.converter:null,new ls(n))}}class Yh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Xu(this,"async_queue_retry"),this.Vu=()=>{const e=Wu();e&&Pi("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Wu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Wu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ji;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vs(e))throw e;Pi("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Li("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Dc.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Fi()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Xh extends Vh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Yh,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yh(e),this._firestoreClient=void 0,await e}}}function qh(e){if(e._terminated)throw new Hi(zi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Qh(e),e._firestoreClient}function Qh(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ys(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Oh(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Ih(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Kh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kh(Fs.fromBase64String(e))}catch(e){throw new Hi(zi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Kh(Fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $h{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Hi(zi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new as(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zh{constructor(e){this._methodName=e}}class Jh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Hi(zi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Hi(zi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return es(this._lat,e._lat)||es(this._long,e._long)}}class ed{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const td=/^__.*__$/;class nd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ga(e,this.data,t,this.fieldTransforms)}}class rd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function id(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fi()}}class sd{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new sd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ed(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(id(this.Cu)&&td.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class od{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Yu(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new sd({Cu:e,methodName:t,qu:n,path:as.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ad(e){const t=e._freezeSettings(),n=Yu(e._databaseId);return new od(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ld(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);md("Data must be an object, but it was:",o,r);const a=gd(r,o);let l,u;if(s.merge)l=new xs(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=yd(t,r,n);if(!o.contains(i))throw new Hi(zi.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);_d(e,i)||e.push(i)}l=new xs(e),u=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=o.fieldTransforms;return new nd(new fo(a),l,u)}class ud extends Zh{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ud}}function cd(e,t,n,r){const i=e.Qu(1,t,n);md("Data must be an object, but it was:",i,r);const s=[],o=fo.empty();Ds(r,(e,r)=>{const a=vd(t,e,n);r=b(r);const l=i.Nu(a);if(r instanceof ud)s.push(a);else{const e=fd(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new xs(s);return new rd(o,a,i.fieldTransforms)}function hd(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[yd(t,r,n)],l=[i];if(s.length%2!=0)throw new Hi(zi.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(yd(t,s[d])),l.push(s[d+1]);const u=[],c=fo.empty();for(let d=a.length-1;d>=0;--d)if(!_d(u,a[d])){const e=a[d];let t=l[d];t=b(t);const n=o.Nu(e);if(t instanceof ud)u.push(e);else{const r=fd(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new xs(u);return new rd(c,h,o.fieldTransforms)}function dd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return fd(n,e.Qu(r?4:3,t))}function fd(e,t){if(pd(e=b(e)))return md("Unsupported field value:",t,e),gd(e,t);if(e instanceof Zh)return function(e,t){if(!id(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=fd(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=b(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ca(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ns.fromDate(e);return{timestampValue:Tl(t.serializer,n)}}if(e instanceof ns){const n=new ns(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Tl(t.serializer,n)}}if(e instanceof Jh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Kh)return{bytesValue:bl(t.serializer,e._byteString)};if(e instanceof jh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Rl(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ed)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Ea(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Bh(e)}`)}(e,t)}function gd(e,t){const n={};return Rs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ds(e,(e,r)=>{const i=fd(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function pd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ns||e instanceof Jh||e instanceof Kh||e instanceof jh||e instanceof Zh||e instanceof ed)}function md(e,t,n){if(!pd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Bh(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function yd(e,t,n){if((t=b(t))instanceof $h)return t._internalPath;if("string"==typeof t)return vd(e,t);throw Ed("Field path arguments must be of type string or ",e,!1,void 0,n)}const wd=new RegExp("[~\\*/\\[\\]]");function vd(e,t,n){if(t.search(wd)>=0)throw Ed(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new $h(...t.split("."))._internalPath}catch(r){throw Ed(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ed(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Hi(zi.INVALID_ARGUMENT,a+e+l)}function _d(e,t){return e.some(e=>e.isEqual(t))}class Cd{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Id(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Id extends Cd{data(){return super.data()}}function Sd(e,t){return"string"==typeof t?vd(e,t):t instanceof $h?t._internalPath:t._delegate._internalPath}function Ad(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hi(zi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Td{}class bd extends Td{}class Nd extends bd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Nd(e,t,n)}_apply(e){const t=this._parse(e);return Od(e._query,t),new Hh(e.firestore,e.converter,$o(e._query,t))}_parse(e){const t=ad(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Hi(zi.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Md(o,s);const t=[];for(const n of o)t.push(Rd(r,e,n));a={arrayValue:{values:t}}}else a=Rd(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Md(o,s),a=dd(n,t,o,"in"===s||"not-in"===s);return Co.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Dd extends Td{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dd(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Io.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Od(n,i),n=$o(n,i)}(e._query,t),new Hh(e.firestore,e.converter,$o(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Rd(e,t,n){if("string"==typeof(n=b(n))){if(""===n)throw new Hi(zi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xo(t)&&-1!==n.indexOf("/"))throw new Hi(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ss.fromString(n));if(!ls.isDocumentKey(r))throw new Hi(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ro(e,new ls(r))}if(n instanceof jh)return ro(e,n._key);throw new Hi(zi.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bh(n)}.`)}function Md(e,t){if(!Array.isArray(e)||0===e.length)throw new Hi(zi.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Od(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Hi(zi.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Hi(zi.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class kd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fi()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ds(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>zs(e.doubleValue));return new ed(i)}convertGeoPoint(e){return new Jh(zs(e.latitude),zs(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Gs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ws(e));default:return null}}convertTimestamp(e){const t=Vs(e);return new ns(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ss.fromString(e);Ui(Zl(n));const r=new Xs(n.get(1),n.get(3)),i=new ls(n.popFirst(5));return r.isEqual(t)||Li(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Pd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ld{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xd extends Cd{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Sd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Bd extends xd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ld(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Bd(this._firestore,this._userDataWriter,n.key,n,new Ld(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hi(zi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Bd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ld(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Bd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ld(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Ud(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ud(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fi()}}function Vd(e){e=Fh(e,jh);const t=Fh(e.firestore,Xh);return Rh(qh(t),e._key).then(n=>Gd(t,e,n))}class zd extends kd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jh(this.firestore,null,t)}}function Hd(e,t,n){e=Fh(e,jh);const r=Fh(e.firestore,Xh),i=Pd(e.converter,t,n);return jd(r,[ld(ad(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xa.none())])}function jd(e,t){return function(e,t){const n=new ji;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=vh(e);try{const e=await function(e,t){const n=Vi(e),r=ns.now(),i=t.reduce((e,t)=>e.add(t.key),ya());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=la(),l=ya();return n.cs.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Ha(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Wa(e.key,t,go(t.value.mapValue),xa.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:ha(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Ms(es)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await ph(r,e.changes),await mc(r.remoteStore)}catch(e){const t=Rc(e,"Failed to persist write");n.reject(t)}}(await Nh(e),t,n)),n.promise}(qh(e),t)}function Gd(e,t,n){const r=n.docs.get(t._key),i=new zd(e);return new xd(e,i,t._key,r,new Ld(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;var Wd;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Mi=e}(He),Be(new N("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Xh(new Xi(e.getProvider("auth-internal")),new $i(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hi(zi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xs(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),We(Di,"4.7.3",e),We(Di,"4.7.3","esm2017")}(),function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(Wd||(Wd={}));var Yd,Xd,qd=new Map([[Wd.QR_CODE,"QR_CODE"],[Wd.AZTEC,"AZTEC"],[Wd.CODABAR,"CODABAR"],[Wd.CODE_39,"CODE_39"],[Wd.CODE_93,"CODE_93"],[Wd.CODE_128,"CODE_128"],[Wd.DATA_MATRIX,"DATA_MATRIX"],[Wd.MAXICODE,"MAXICODE"],[Wd.ITF,"ITF"],[Wd.EAN_13,"EAN_13"],[Wd.EAN_8,"EAN_8"],[Wd.PDF_417,"PDF_417"],[Wd.RSS_14,"RSS_14"],[Wd.RSS_EXPANDED,"RSS_EXPANDED"],[Wd.UPC_A,"UPC_A"],[Wd.UPC_E,"UPC_E"],[Wd.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Qd(e){return Object.values(Wd).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(Yd||(Yd={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(Xd||(Xd={}));var Kd,$d=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Xd.SCAN_TYPE_CAMERA,Xd.SCAN_TYPE_FILE],e}(),Zd=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!qd.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,qd.get(t))},e}(),Jd=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(Kd||(Kd={}));var ef=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:Kd.UNKWOWN_ERROR}},e}(),tf=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function nf(e){return"undefined"===typeof e||null===e}var rf,sf=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),of=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),af=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),lf=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,s=Object.keys(e);i<s.length;i++){var o=s[i];if(r.has(o))return t.logError("".concat(o," is not supported videoConstaints."),!0),!1}return!0},e}(),uf=n(72),cf=function(){function e(e,t,n){if(this.formatMap=new Map([[Wd.QR_CODE,uf.BarcodeFormat.QR_CODE],[Wd.AZTEC,uf.BarcodeFormat.AZTEC],[Wd.CODABAR,uf.BarcodeFormat.CODABAR],[Wd.CODE_39,uf.BarcodeFormat.CODE_39],[Wd.CODE_93,uf.BarcodeFormat.CODE_93],[Wd.CODE_128,uf.BarcodeFormat.CODE_128],[Wd.DATA_MATRIX,uf.BarcodeFormat.DATA_MATRIX],[Wd.MAXICODE,uf.BarcodeFormat.MAXICODE],[Wd.ITF,uf.BarcodeFormat.ITF],[Wd.EAN_13,uf.BarcodeFormat.EAN_13],[Wd.EAN_8,uf.BarcodeFormat.EAN_8],[Wd.PDF_417,uf.BarcodeFormat.PDF_417],[Wd.RSS_14,uf.BarcodeFormat.RSS_14],[Wd.RSS_EXPANDED,uf.BarcodeFormat.RSS_EXPANDED],[Wd.UPC_A,uf.BarcodeFormat.UPC_A],[Wd.UPC_E,uf.BarcodeFormat.UPC_E],[Wd.UPC_EAN_EXTENSION,uf.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!uf)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),i=new Map;i.set(uf.DecodeHintType.POSSIBLE_FORMATS,r),i.set(uf.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(i){r(i)}})},e.prototype.decode=function(e){var t=new uf.MultiFormatReader(this.verbose,this.hints),n=new uf.HTMLCanvasElementLuminanceSource(e),r=new uf.BinaryBitmap(new uf.HybridBinarizer(n)),i=t.decode(r);return{text:i.text,format:Zd.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),hf=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},df=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ff=function(){function e(t,n,r){if(this.formatMap=new Map([[Wd.QR_CODE,"qr_code"],[Wd.AZTEC,"aztec"],[Wd.CODABAR,"codabar"],[Wd.CODE_39,"code_39"],[Wd.CODE_93,"code_93"],[Wd.CODE_128,"code_128"],[Wd.DATA_MATRIX,"data_matrix"],[Wd.ITF,"itf"],[Wd.EAN_13,"ean_13"],[Wd.EAN_8,"ean_8"],[Wd.PDF_417,"pdf417"],[Wd.UPC_A,"upc_a"],[Wd.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return hf(this,void 0,void 0,function(){var t,n;return df(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:Zd.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,i=e;r<i.length;r++){var s=i[r],o=s.boundingBox.width*s.boundingBox.height;o>n&&(n=o,t=s)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),gf=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},pf=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},mf=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&ff.isSupported()?(this.primaryDecoder=new ff(e,n,r),this.secondaryDecoder=new cf(e,n,r)):this.primaryDecoder=new cf(e,n,r)}return e.prototype.decodeAsync=function(e){return gf(this,void 0,void 0,function(){var t;return pf(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return gf(this,void 0,void 0,function(){var t,n;return pf(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),yf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wf=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},vf=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ef=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),_f=function(e){function t(t){return e.call(this,"zoom",t)||this}return yf(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return yf(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Ef)),Cf=function(e){function t(t){return e.call(this,"torch",t)||this}return yf(t,e),t}(Ef),If=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new _f(this.track)},e.prototype.torchFeature=function(){return new Cf(this.track)},e}(),Sf=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return wf(this,void 0,void 0,function(){var s,o;return vf(this,function(a){switch(a.label){case 0:return s=new e(t,n,i),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:a.sent(),a.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return wf(this,void 0,void 0,function(){return vf(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++i>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new If(this.getFirstTrackOrFail())},e}(),Af=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return wf(this,void 0,void 0,function(){return vf(this,function(r){return[2,Sf.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return wf(this,void 0,void 0,function(){var n;return vf(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),Tf=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},bf=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Nf=function(){function e(){}return e.failIfNotSupported=function(){return Tf(this,void 0,void 0,function(){return bf(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return Tf(this,void 0,void 0,function(){return bf(this,function(t){return[2,Af.create(e)]})})},e}(),Df=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},Rf=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Mf=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=sf.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=sf.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return Df(this,void 0,void 0,function(){var e,t,n,r,i,s,o;return Rf(this,function(a){switch(a.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=a.sent(),r=[],i=0,s=n;i<s.length;i++)"videoinput"===(o=s[i]).kind&&r.push({id:o.deviceId,label:o.label});return e(t),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];"video"===s.kind&&n.push({id:s.id,label:s.label})}e(n)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(rf||(rf={}));var Of,kf=function(){function e(){this.state=rf.NOT_STARTED,this.onGoingTransactionNewState=rf.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===rf.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=rf.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===rf.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=rf.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==rf.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case rf.UNKNOWN:throw"Transition from unknown is not allowed";case rf.NOT_STARTED:this.failIfNewStateIs(e,[rf.PAUSED]);case rf.SCANNING:case rf.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),Pf=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===rf.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==rf.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===rf.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===rf.PAUSED},e}(),Lf=function(){function e(){}return e.create=function(){return new Pf(new kf)},e}(),xf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xf(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}($d),Ff=function(){function e(e,t){this.logger=t,this.fps=Bf.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Bf.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?lf.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!nf(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Uf=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new tf(this.verbose),this.qrcode=new mf(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Lf.create()}return e.prototype.start=function(e,t,n,r){var i,s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var o=Ff.create(t,this.logger);this.clearElement();var a=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=a,u=document.getElementById(this.elementId);u.clientWidth?u.clientWidth:Bf.DEFAULT_WIDTH;u.style.position="relative",this.shouldScan=!0,this.element=u;var c=this,h=this.stateManagerProxy.startTransition(rf.SCANNING);return new Promise(function(t,r){var a=l?o.videoConstraints:c.createVideoConstraints(e);if(!a)return h.cancel(),void r("videoConstraints should be defined");var u={};l&&!o.aspectRatio||(u.aspectRatio=o.aspectRatio);var d={onRenderSurfaceReady:function(e,t){c.setupUi(e,t,o),c.isScanning=!0,c.foreverScan(o,n,i)}};Nf.failIfNotSupported().then(function(e){e.create(a).then(function(e){return e.render(s.element,u,d).then(function(e){c.renderedCamera=e,h.execute(),t(null)}).catch(function(e){h.cancel(),r(e)})}).catch(function(e){h.cancel(),r(sf.errorGettingUserMedia(e))})}).catch(function(e){h.cancel(),r(sf.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(rf.PAUSED),this.showPausedState(),(nf(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(rf.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(rf.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(Bf.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(nf(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var s=new Image;s.onload=function(){var e=s.width,o=s.height,a=document.getElementById(n.elementId),l=a.clientWidth?a.clientWidth:Bf.DEFAULT_WIDTH,u=Math.max(a.clientHeight?a.clientHeight:o,Bf.FILE_SCAN_MIN_HEIGHT),c=n.computeCanvasDrawConfig(e,o,l,u);if(t){var h=n.createCanvasElement(l,u,"qr-canvas-visible");h.style.display="inline-block",a.appendChild(h);var d=h.getContext("2d");if(!d)throw"Unable to get 2d context from canvas";d.canvas.width=l,d.canvas.height=u,d.drawImage(s,0,0,e,o,c.x,c.y,c.width,c.height)}var f=Bf.FILE_SCAN_HIDDEN_CANVAS_PADDING,g=Math.max(s.width,c.width),p=Math.max(s.height,c.height),m=g+2*f,y=p+2*f,w=n.createCanvasElement(m,y);a.appendChild(w);var v=w.getContext("2d");if(!v)throw"Unable to get 2d context from canvas";v.canvas.width=m,v.canvas.height=y,v.drawImage(s,0,0,e,o,f,f,g,p);try{n.qrcode.decodeRobustlyAsync(w).then(function(e){r(Jd.createFromQrcodeResult(e))}).catch(i)}catch(E){i("QR code parse error, error = ".concat(E))}},s.onerror=i,s.onabort=i,s.onstalled=i,s.onsuspend=i,s.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Mf.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!lf.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[Wd.QR_CODE,Wd.AZTEC,Wd.CODABAR,Wd.CODE_39,Wd.CODE_93,Wd.CODE_128,Wd.DATA_MATRIX,Wd.MAXICODE,Wd.ITF,Wd.EAN_13,Wd.EAN_8,Wd.PDF_417,Wd.RSS_14,Wd.RSS_EXPANDED,Wd.UPC_A,Wd.UPC_E,Wd.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=e.formatsToSupport;r<i.length;r++){var s=i[r];Qd(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(nf(e))return!0;if(!nf(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(nf(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!nf(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var s,o=this.toQrdimensions(e,t,i),a=function(e){if(e<Bf.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Bf.MIN_QR_BOX_SIZE,"px.")};a(o.width),a(o.height),o.width=((s=o.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),s=e),s)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=nf(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(e,t,r);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&i.height<=t,o={x:0,y:0,width:e,height:t},a=s?this.getShadedRegionBounds(e,t,i):o,l=this.createCanvasElement(a.width,a.height),u=l.getContext("2d",{willReadFrequently:!0});u.canvas.width=a.width,u.canvas.height=a.height,this.element.append(l),s&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=u,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=sf.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,Jd.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=sf.codeParseError(e);return t(r,ef.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),s=i.videoWidth/i.clientWidth,o=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*s,l=this.qrRegion.height*o,u=this.qrRegion.x*s,c=this.qrRegion.y*o;this.context.drawImage(i,u,c,a,l,0,0,this.qrRegion.width,this.qrRegion.height);var h=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(i){i||!0===e.disableFlip?h():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){h()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),h()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",s=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},o=Object.keys(e);if(1!==o.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var a=Object.keys(e)[0];if(a!==t&&a!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(a!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var u=e.facingMode;if("string"==typeof u){if(s(u))return{facingMode:u}}else{if("object"!=typeof u)throw"Invalid type of 'facingMode' = ".concat(typeof u);if(!(i in u))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(s(u["".concat(i)]))return{facingMode:{exact:u["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var i=e,s=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(s)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Bf.BORDER_SHADER_MATCH_COLOR:Bf.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,i=t,s=document.createElement("canvas");return s.style.width="".concat(r,"px"),s.style.height="".concat(i,"px"),s.style.display="none",s.id=nf(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var s=(t-r.width)/2,o=(n-r.height)/2;if(i.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Bf.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var a=40;this.insertShaderBorders(i,a,5,-5,null,0,!0),this.insertShaderBorders(i,a,5,-5,null,0,!1),this.insertShaderBorders(i,a,5,null,-5,0,!0),this.insertShaderBorders(i,a,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,n,r,i,s,o){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=Bf.BORDER_SHADER_DEFAULT_COLOR,a.style.width="".concat(t,"px"),a.style.height="".concat(n,"px"),null!==r&&(a.style.top="".concat(r,"px")),null!==i&&(a.style.bottom="".concat(i,"px")),o?a.style.left="".concat(s,"px"):a.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),e.appendChild(a)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),Vf="data:image/svg+xml;base64,",zf=Vf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Hf=Vf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",jf=Vf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Gf=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Wf=function(){function e(){this.data=Gf.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Gf.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),Yf=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=af.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=af.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Xf=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=jf,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=jf,this.infoIcon.style.opacity="0.6")},e}(),qf=function(){function e(){var e=this;this.infoDiv=new Yf,this.infoIcon=new Xf(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),Qf=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},Kf=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},$f=function(){function e(){}return e.hasPermissions=function(){return Qf(this,void 0,void 0,function(){var e,t,n,r;return Kf(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}})})},e}(),Zf=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===Xd.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===Xd.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return $d.DEFAULT_SUPPORTED_SCAN_TYPE;var t=$d.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var i=r[n];if(!$d.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},e}(),Jf=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),eg=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(Jf.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),tg=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},ng=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},rg=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return tg(this,void 0,void 0,function(){var e,t;return ng(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?of.torchOffButton():of.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?of.torchOnFailedMessage():of.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),ig=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=eg.createElement("button",Jf.TORCH_BUTTON_ID),this.torchController=new rg(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=of.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return tg(n,void 0,void 0,function(){return ng(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(Jf.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(Jf.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(Jf.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(Jf.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new rg(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=of.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var s=new e(n,i);return s.render(t,r),s},e}(),sg=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=eg.createElement("button",Jf.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=eg.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],s=r.name;i.setImageNameToButton(s),n(r)}}});var s=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(s),this.fileBasedScanRegion.addEventListener("dragenter",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var o=!1,a=0;a<r.length;++a){var l=r.item(a);if(l){if(l.type.match(/image.*/)){o=!0;var u=l.name;i.setImageNameToButton(u),n(l),s.innerText=of.dragAndDropMessage();break}}}o||(s.innerText=of.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=of.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var i=of.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=of.fileSelectionChooseImage()+" - "+of.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),og=function(){function e(e){this.selectElement=eg.createElement("select",Jf.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=of.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var i=1,s=0,o=this.cameras;s<o.length;s++){var a=o[s],l=a.id,u=null==a.label?l:a.label;u&&""!==u||(u=[of.anonymousCameraPrefix(),i++].join(" "));var c=document.createElement("option");c.value=l,c.innerText=u,this.options.push(c),this.selectElement.appendChild(c)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),ag=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=eg.createElement("input",Jf.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=of.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=of.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Of||(Of={}));!function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Zf(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new tf(this.verbose),this.persistedDataManager=new Wf,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(of.lastMatch(t),Of.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r,i,s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new Uf(this.getScanRegionId(),(r=this.config,i=this.verbose,{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:i}))},e.prototype.pause=function(e){(nf(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t(),n()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=$d.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!$d.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=$d.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=$d.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:$d.SCAN_DEFAULT_FPS,rememberLastUsedCamera:$d.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:$d.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Zf.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new qf).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(of.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(e,t)};Uf.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(of.noCameraFound(),Of.STATUS_WARNING),i())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(e,Of.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=eg.createElement("button",this.getCameraPermissionButtonId());r.innerText=of.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;Zf.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?$f.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=Zf.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=Zf.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=sg.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";Zf.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(of.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,Of.STATUS_WARNING),n.qrCodeErrorCallback(e,ef.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=ag.create(r,!1),s=og.create(r,e),o=document.createElement("span"),a=eg.createElement("button",Jf.CAMERA_START_BUTTON_ID);a.innerText=of.scanButtonStartScanningText(),o.appendChild(a);var l,u=eg.createElement("button",Jf.CAMERA_STOP_BUTTON_ID);u.innerText=of.scanButtonStopScanningText(),u.style.display="none",u.disabled=!0,o.appendChild(u);r.appendChild(o);var c=function(e){e||(a.style.display="none"),a.innerText=of.scanButtonStartScanningText(),a.style.opacity="1",a.disabled=!1,e&&(a.style.display="inline-block")};if(a.addEventListener("click",function(e){a.innerText=of.scanButtonScanningStarting(),s.disable(),a.disabled=!0,a.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r,h=s.getValue();n.persistedDataManager.setLastUsedCameraId(h),n.html5Qrcode.start(h,(r=n.config,{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){u.disabled=!1,u.style.display="inline-block",c(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=ig.create(o,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,Of.STATUS_WARNING)}),l.show()):l&&l.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var r,s,o,a=1;t.config.defaultZoomValueIfSupported&&(a=t.config.defaultZoomValueIfSupported),r=a,s=n.min(),a=r>(o=n.max())?o:r<s?s:r,i.setValues(n.min(),n.max(),a,n.step()),i.show()}}(r)}).catch(function(e){n.showHideScanTypeSwapLink(!0),s.enable(),c(!0),n.setHeaderMessage(e,Of.STATUS_WARNING)})}),s.hasSingleItem()&&a.click(),u.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";u.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),s.enable(),a.disabled=!1,u.style.display="none",a.style.display="inline-block",l&&(l.reset(),l.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){u.disabled=!1,n.setHeaderMessage(e,Of.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var h=n.persistedDataManager.getLastUsedCameraId();s.hasValue(h)?(s.setValue(h),a.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=of.textIfCameraScanSelected(),n=of.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var s=eg.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=Zf.isCameraScanType(this.currentScanType)?t:n,s.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Zf.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),s.innerText=n,e.currentScanType=Xd.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),s.innerText=t,e.currentScanType=Xd.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),i.appendChild(s),r.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&$f.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=Of.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case Of.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Of.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Of.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=zf,this.cameraScanImage.alt=of.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Hf,this.fileScanImage.alt=of.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Jf.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Jf.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();var lg=n(579);je({apiKey:"AIzaSyC4A4fr0B-cJTFhzYE6hQBq-Qw2t07XKlw",authDomain:"bla-dealer-app.firebaseapp.com",projectId:"bla-dealer-app",storageBucket:"bla-dealer-app.appspot.com",messagingSenderId:"999902556520",appId:"1:999902556520:web:f7c215c1036cb2af5566dd",measurementId:"G-GQG741YCLF"});const ug=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();const t=Fe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Fe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(E(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;lt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:li,persistence:[Er,rr,sr]}),r=d("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>di)return;const r=null===t||void 0===t?void 0:t.token;fi!==r&&(fi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){b(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){b(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=c("auth");return s&&An(n,`http://${s}`),n}(),cg=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Fe("object"==typeof e?e:Ge(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=c(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&zh(r,...e)}return r}(),hg=["shawn@tjspecialty.com","jodi@tjspecialty.com","kevin@tjspecialty.com"];function dg(){const[t,n]=(0,e.useState)(null),[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(""),[a,l]=(0,e.useState)(""),[u,c]=(0,e.useState)(!1),[h,d]=(0,e.useState)(""),[f,g]=(0,e.useState)(0),[p,m]=(0,e.useState)([]),[y,w]=(0,e.useState)(null),[v,E]=(0,e.useState)([]),[_,C]=(0,e.useState)([]),[I,S]=(0,e.useState)(!1),[A,T]=(0,e.useState)(""),[N,D]=(0,e.useState)([]),[R,M]=(0,e.useState)(null),O=(0,e.useRef)(null),k=(0,e.useRef)(!1);(0,e.useEffect)(()=>{const e=function(e,t,n,r){return b(e).onAuthStateChanged(t,n,r)}(ug,async e=>{if(e){n(e);const t=hg.includes(e.email);i(t),await L(e.uid),await x()}else P()});return()=>e()},[]),(0,e.useEffect)(()=>()=>G(!0),[]);const P=()=>{n(null),i(!1),o(""),l(""),d(""),g(0),m([]),w(null),E([]),C([]),S(!1),T(""),G(!0)},L=async e=>{const t=Wh(cg,"users",e),n=await Vd(t);if(n.exists()){var r;const e=n.data();d(e.name||""),g(e.points||0),m(e.coupons||[]),w((null===(r=e.lastCheckIn)||void 0===r?void 0:r.toDate())||null)}},x=async()=>{const e=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Td&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Dd).length,n=e.filter(e=>e instanceof Nd).length;if(t>1||t>0&&n>0)throw new Hi(zi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=b(e),Ph("collection","path",t),e instanceof Vh){const n=ss.fromString(t,...r);return xh(n),new Gh(e,null,n)}{if(!(e instanceof jh||e instanceof Gh))throw new Hi(zi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ss.fromString(t,...r));return xh(n),new Gh(e.firestore,null,n)}}(cg,"users")),t=(await function(e){e=Fh(e,Hh);const t=Fh(e.firestore,Xh),n=qh(t),r=new zd(t);return Ad(e._query),Mh(n,e._query).then(n=>new Fd(t,r,e,n))}(e)).docs.map(e=>({id:e.id,...e.data()}));if(E(t),t.length){const e=Math.max(...t.map(e=>e.points||0));C(e>0?t.filter(t=>(t.points||0)===e):[])}else C([])},B=async()=>{try{await function(e,t,n){return Ue(e.app)?Promise.reject(ht(e)):Zn(b(e),Bn.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Jn(e),t})}(ug,s.trim(),a)}catch{alert("Login failed.")}},F=async()=>{try{const e=await async function(e,t,n){if(Ue(e.app))return Promise.reject(ht(e));const r=yn(e),i=Sn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gn),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Jn(e),t}),o=await Wn._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(ug,s.trim(),a);await Hd(Wh(cg,"users",e.user.uid),{email:s.trim(),name:h.trim(),points:0,coupons:[],lastCheckIn:null})}catch{alert("Sign up failed.")}},U=async e=>{var n;const r=Wh(cg,"users",e),i=await Vd(r);if(!i.exists())return!1;const s=i.data(),o=new Date,a=null===(n=s.lastCheckIn)||void 0===n?void 0:n.toDate();if(a&&o-a<6048e5)return alert("You can only check in once per week."),!1;const l=(s.points||0)+1,u=[...s.coupons||[]];return l%5===0&&u.push({id:Date.now(),redeemed:!1}),await Hd(r,{points:l,coupons:u,lastCheckIn:ns.fromDate(o),email:s.email||t.email,name:s.name||h},{merge:!0}),e===t.uid&&(g(l),m(u),w(o)),await x(),!0},V=async(e,n)=>{const r=Wh(cg,"users",e),i=await Vd(r);if(!i.exists())return;const s=(i.data().coupons||[]).map(e=>e.id===n?{...e,redeemed:!0}:e);await function(e,t,n){e=Fh(e,jh);const r=Fh(e.firestore,Xh),i=ad(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=b(t))||t instanceof $h?hd(i,"updateDoc",e._key,t,n,a):cd(i,"updateDoc",e._key,t),jd(r,[s.toMutation(e._key,xa.exists(!0))])}(r,{coupons:s}),e===t.uid&&m(s),await x()},z=async e=>{O.current&&(await O.current.start({deviceId:{exact:e}},{fps:10,qrbox:240},j,()=>{}),k.current=!0)},H=async()=>{O.current&&(await O.current.start({facingMode:"environment"},{fps:10,qrbox:240},j,()=>{}),k.current=!0)},j=e=>{"bla-poker-checkin"===e?(G(!0),U(t.uid).then(e=>{e&&alert("\u2705 Check-in successful!")})):(alert("\ud83d\udeab Invalid QR Code"),G(!0))},G=function(){I&&S(!1),O.current&&k.current&&O.current.stop().then(()=>{var e;null===(e=O.current)||void 0===e||e.clear(),k.current=!1}).catch(()=>{k.current=!1})},W=(0,e.useCallback)(e=>{"Escape"===e.key&&I&&G()},[I]);(0,e.useEffect)(()=>(window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)),[W]);return t?(0,lg.jsxs)("div",{className:"app-shell "+(I?"no-scroll":""),children:[(0,lg.jsxs)("div",{className:"top-bar",children:[(0,lg.jsxs)("span",{className:"user-name",children:["Logged in as: ",h||t.email]}),(0,lg.jsx)("button",{className:"logout-btn",onClick:()=>{G(!0),function(e){b(e).signOut()}(ug)},children:"Log Out"})]}),_.length?(0,lg.jsxs)("div",{className:"leader-box",children:["\ud83c\udfc6 Leader",_.length>1?"s":"",":"," ",_.map(e=>e.name||e.email).join(", ")," \u2014 ",_[0].points," check-ins"]}):null,(0,lg.jsxs)("div",{className:"panel",children:[(0,lg.jsx)("h2",{children:"Your Status"}),(0,lg.jsxs)("p",{children:["Check-ins: ",f]}),(0,lg.jsxs)("p",{children:["Coupons: ",p.filter(e=>!e.redeemed).length," active /"," ",p.length," total"]}),y&&(0,lg.jsxs)("p",{style:{fontSize:12,opacity:.7},children:["Last Check-In: ",y.toLocaleDateString()]}),!r&&!I&&(0,lg.jsx)("button",{className:"primary",onClick:async()=>{T(""),"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&T("Camera may be blocked on HTTP. Use HTTPS (GitHub Pages) or a tunnel."),k.current||(S(!0),setTimeout(async()=>{try{var e;if(null===(e=navigator.mediaDevices)||void 0===e||!e.getUserMedia)return void T("Camera API not supported.");O.current||(O.current=new Uf("qr-reader"));const t=await Uf.getCameras();if(null!==t&&void 0!==t&&t.length){D(t);const e=t.find(e=>/back|environment/i.test(e.label))||t[0];M(e.id),await z(e.id)}else await H()}catch(t){console.error("Scanner init failed:",t),T("Unable to start camera."),G(!0)}},80))},children:"\ud83d\udcf7 Scan QR to Check-In"}),r&&(0,lg.jsx)("button",{className:"primary",onClick:async()=>{t&&await U(t.uid)},children:"Admin Self Check-In"}),(0,lg.jsx)("ul",{className:"coupon-list",children:p.map((e,t)=>(0,lg.jsxs)("li",{children:["\ud83c\udf9f\ufe0f Coupon #",t+1," \u2014 ",e.redeemed?"\ud83d\udd34 Redeemed":"\ud83d\udfe2 Available"]},e.id))})]}),r&&(0,lg.jsxs)("div",{className:"panel admin-panel",children:[(0,lg.jsx)("h2",{children:"Admin Dashboard"}),v.map(e=>(0,lg.jsxs)("div",{className:"user-row",children:[(0,lg.jsxs)("div",{className:"user-summary",children:[(0,lg.jsx)("strong",{children:e.name||e.email})," \u2014 ",e.points||0," check-ins | Coupons:"," ",(e.coupons||[]).length]}),(0,lg.jsx)("div",{className:"admin-actions",children:(0,lg.jsx)("button",{className:"small-btn",onClick:()=>U(e.id),children:"+ Check-In"})}),(0,lg.jsx)("ul",{className:"coupon-mini-list",children:(e.coupons||[]).map((t,n)=>(0,lg.jsxs)("li",{children:["\ud83c\udf9f\ufe0f #",n+1," ",t.redeemed?"\ud83d\udd34":"\ud83d\udfe2",!t.redeemed&&(0,lg.jsx)("button",{className:"redeem-btn",onClick:()=>V(e.id,t.id),children:"Redeem"})]},t.id))})]},e.id))]}),I&&(0,lg.jsx)("div",{className:"scanner-modal",children:(0,lg.jsxs)("div",{className:"scanner-dialog",children:[(0,lg.jsx)("button",{className:"scanner-close","aria-label":"Close scanner",onClick:()=>G(),children:"\u2715"}),(0,lg.jsx)("h3",{className:"scanner-title",children:"Scan QR Code"}),(0,lg.jsx)("div",{id:"qr-reader",className:"qr-reader-box"}),N.length>1&&(0,lg.jsxs)("div",{className:"camera-switch",children:[(0,lg.jsx)("label",{children:"Camera:"}),(0,lg.jsx)("select",{value:R||"",onChange:async e=>{const t=e.target.value;if(M(t),O.current&&k.current){await O.current.stop().then(()=>{O.current.clear(),k.current=!1}).catch(()=>{k.current=!1});try{await z(t)}catch{T("Failed to switch camera.")}}},children:N.map(e=>(0,lg.jsx)("option",{value:e.id,children:e.label||e.id},e.id))})]}),A&&(0,lg.jsx)("p",{className:"camera-error",children:A}),(0,lg.jsx)("button",{className:"secondary wide",onClick:()=>G(),style:{marginTop:12},children:"Cancel"}),(0,lg.jsx)("p",{className:"scanner-hint",children:"Point your camera at the venue QR code to check in."})]})})]}):(0,lg.jsxs)("div",{className:"auth-wrapper",children:[(0,lg.jsx)("h1",{className:"app-title",children:"BLA Loyalty Rewards"}),(0,lg.jsxs)("div",{className:"auth-card",children:[u&&(0,lg.jsx)("input",{placeholder:"Name",value:h,onChange:e=>d(e.target.value)}),(0,lg.jsx)("input",{placeholder:"Email",value:s,type:"email",onChange:e=>o(e.target.value)}),(0,lg.jsx)("input",{placeholder:"Password",value:a,type:"password",onChange:e=>l(e.target.value)}),(0,lg.jsx)("button",{onClick:u?F:B,children:u?"Sign Up":"Log In"}),(0,lg.jsx)("p",{className:"switch-mode",onClick:()=>c(e=>!e),children:u?"Have an account? Log In":"New user? Sign up"})]})]})}t.createRoot(document.getElementById("root")).render((0,lg.jsx)(e.StrictMode,{children:(0,lg.jsx)(dg,{})}))})()})();
//# sourceMappingURL=main.786f1ed4.js.map